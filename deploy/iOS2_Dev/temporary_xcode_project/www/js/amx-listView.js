(function(){function a(a,b,c,d){if(!b.isTreeNodeIterator()){var e={},b=b.getRowKey().toString().replace("'","\\'");e[c]=d+"['"+b+"']";a.__pushElReplacements(e)}}function b(a,b,c){var d=b.getCollectionChange("value");if(null!=d&&d.isItemized()&&0==d.getCreatedKeys().length&&0==d.getDeletedKeys().length&&0==d.getDirtiedKeys().length&&0<d.getUpdatedKeys().length){b=a.getAttribute("value");if(void 0===b)return adf.mf.api.amx.AmxNodeChangeResult.REPLACE;for(var b=adf.mf.api.amx.createIterator(b),d=d.getUpdatedKeys(),
e=d.length,g=0;g<e;++g){var h=d[g];if(b.setCurrentRowKey(h)){var k=a.getChildren(null,h);if(1!=k.length)return adf.mf.api.amx.AmxNodeChangeResult.REPLACE;a.removeChild(k[0]);a.createStampedChildren(h,[null]);if(1!=a.getChildren(null,h).length)return adf.mf.api.amx.AmxNodeChangeResult.REPLACE}else return adf.mf.api.amx.AmxNodeChangeResult.REPLACE}return c}return adf.mf.api.amx.AmxNodeChangeResult.REPLACE}function c(a,b,c){a=c.getAttributeExpression("selectedRowKeys");void 0===a||null==a?(c=c.getVolatileState(),
null!=c&&(c.selectedRowKey=b)):adf.mf.el.setValue({name:a,value:[b]},function(){},null)}function d(a,b){var c=b.getAttributeExpression("selectedRowKeys");if(void 0===c||null==c){if(c=b.getVolatileState(),null!=c)return c.selectedRowKey}else if(c=adf.mf.el.getLocalValue(c),null!=c)return c[0];return null}function e(a){adf.mf.internal.amx.addCSSClassName(a,"amx-listItem-selected");a.setAttribute("aria-selected",!0)}function g(a){adf.mf.internal.amx.removeCSSClassName(a,"amx-listItem-selected");a.setAttribute("aria-selected",
!1)}function h(a,b){for(var c=a.childNodes,d=c.length,e=b.length,g=[],h=0,k=0;k<d&&h<e;++k)for(var m=c[k],n=0;n<e;++n)if(adf.mf.internal.amx.containsCSSClassName(m,b[n])){g[n]=m;++h;break}return g}function k(a){var b=null,c=null,d=null,e=null,g=null,k=h(a,["amx-listItem-handle"])[0];null!=k&&adf.mf.api.amx.addDragListener(k,{start:function(h,k){k.requestDragLock(this,!0,!0);d=c=void 0;e=a.offsetHeight;g=a.parentNode.scrollHeight+1+e/2;var m=adf.mf.internal.amx._getNonPrimitiveElementData(a,"amxNode");
null!=m&&(c=m.getStampKey());adf.mf.internal.amx.addCSSClassName(a,"move");b=document.createElement("div");b.className="amx-listItem amx-listItem-drop-spacer";o(a.parentNode,a,b)},drag:function(c,d){c.preventDefault();c.stopPropagation();d.preventDefault=!0;d.stopPropagation=!0;var h=adf.mf.internal.amx.getElementTop(a),k=d.pageY,m=h+d.deltaPageY,h=a.parentNode,s=adf.mf.internal.amx.getElementTop(h);m<s&&(m=s);m<=s+5?(h.setAttribute("data-stop",!1),n(h,-1)):m+e>=s+h.offsetHeight-5?(h.setAttribute("data-stop",
!1),n(h,1)):h.setAttribute("data-stop",!0);m=e/2;k=Math.min(g,k-m-s+h.scrollTop);a.style.top=k+"px";adf.mf.internal.amx.containsCSSClassName(parent,"notSelect")||adf.mf.internal.amx.addCSSClassName(h,"notSelect");for(var t=h.childNodes,k=[],s=0,u=t.length;s<u;++s){var v=t[s];adf.mf.internal.amx.containsCSSClassName(v,"amx-listItem")&&!adf.mf.internal.amx.containsCSSClassName(v,"amx-listItem-drop-spacer")&&!adf.mf.internal.amx.containsCSSClassName(v,"move")&&!adf.mf.internal.amx.containsCSSClassName(v,
"amx-listItem-moreRows")&&k.push(v)}s=0;for(t=k.length;s<t;++s){var u=k[s],v=u.offsetTop,w=u.offsetHeight,C=a.offsetTop+m;if(v<=C&&C<=v+w){C<=v+w/2?h.insertBefore(b,u):o(h,u,b);break}}},end:function(){var e=a.cloneNode(!0),g=a.parentNode;g.appendChild(e);a.style.display="none";var h=b.nextSibling;null!=h&&(h=adf.mf.internal.amx._getNonPrimitiveElementData(h,"amxNode"),null!=h&&(d=h.getStampKey()));$(e).animate({opacity:0,height:0},function(){adf.mf.api.amx.removeDomNode(e);o(g,b,a);a.style.display=
"";adf.mf.internal.amx.removeCSSClassName(a,"move");a.style.top=""});$(b).animate({height:32},function(){adf.mf.api.amx.removeDomNode(b)});adf.mf.internal.amx.removeCSSClassName(g,"notSelect");g.setAttribute("data-stop",!0);if("undefined"!==typeof c){var h=new adf.mf.internal.amx.MoveEvent(c,d),k=m(a);null!=k&&(k=adf.mf.internal.amx._getNonPrimitiveElementData(k,"amxNode"),adf.mf.api.amx.processAmxEvent(k,"move",void 0,void 0,h))}}})}function m(a){if(void 0!==typeof a)for(a=a.parentNode;null!=a;){if(adf.mf.internal.amx.containsCSSClassName(a,
"amx-listView"))return a;a=a.parentNode}}function n(a,b){var b=1==b?1:-1,c=adf.mf.api.amx.isValueTrue(a.getAttribute("data-stop"));a.scrollTop+=5*b;c||setTimeout(function(){n(a,b)},300)}function o(a,b,c){b=b.nextSibling;null==b?a.appendChild(c):a.insertBefore(c,b)}var s=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"listView");s.prototype.createChildrenNodes=function(a){if(!a.isAttributeDefined("value"))return!1;var b;if(adf.mf.environment.profile.dtMode)b=[{},{},{}],a.setAttributeResolvedValue("value",
b);else{b=a.getAttribute("value");if(void 0===b)return a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER),a.setAttributeResolvedValue("_placeholder","yes"),adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.DEFERRED;if(null==b)return!0}var c=Infinity,d=null,e=a.getAttribute("fetchSize");null!=e&&adf.mf.internal.amx.isFiniteNumber(parseInt(e,10))&&(c=parseInt(e,10),0>c?c=Infinity:0==c&&(c=25));a.setAttributeResolvedValue("fetchSize",c);e=a.getClientState();null!=e&&(d=e.maxRows,null!=d&&a.setAttributeResolvedValue("maxRows",
d));null==d&&(!1==a.isAttributeDefined("maxRows")?(d=c,a.setAttributeResolvedValue("maxRows",c)):(d=parseInt(a.getAttribute("maxRows"),10),isNaN(d)&&(d=c,a.setAttributeResolvedValue("maxRows",c))));a.setAttributeResolvedValue("_oldMaxRows",d);c=adf.mf.api.amx.createIterator(b);if(c.getTotalCount()>c.getAvailableCount()&&c.getAvailableCount()<d)return adf.mf.api.amx.showLoadingIndicator(),adf.mf.api.amx.bulkLoadProviders(b,0,d,function(){try{var b=new adf.mf.api.amx.AmxNodeUpdateArguments;b.setAffectedAttribute(a,
"value");adf.mf.api.amx.markNodeForUpdate(b)}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.api.adf.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"createChildrenNodes","MSG_ITERATOR_FIRST_NEXT_ERROR",a,b);adf.mf.api.amx.hideLoadingIndicator()}),a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER),a.setAttributeResolvedValue("_placeholder","yes"),adf.mf.api.amx.AmxNodeCreateChildrenNodesResult.DEFERRED;a.setAttributeResolvedValue("_placeholder","nomore");a.createStampedChildren(null,
["header","footer"]);for(b=0;b<d&&c.hasNext();++b)c.next(),a.createStampedChildren(c.getRowKey(),[null]);a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);return!0};s.prototype.updateChildren=function(a,c){var d=!1;if(c.hasChanged("value")&&(d=this._isLoadMoreRowsDataChangeEvent(a,c),!d))return b(a,c,adf.mf.api.amx.AmxNodeChangeResult.REFRESH);if(d||1==c.getSize()){if(d||c.hasChanged("maxRows")){var e=a.getAttribute("_oldMaxRows"),g=a.getAttribute("value"),g=adf.mf.api.amx.createIterator(g);
g.setCurrentIndex(e-1);for(var h=a.getAttribute("maxRows");e<h&&g.hasNext();++e)g.next(),a.createStampedChildren(g.getRowKey(),[null]);d&&(a.setAttributeResolvedValue("_loadMoreObj",null),c.setCustomValue("isLoadMoreRowsChange",!0));return adf.mf.api.amx.AmxNodeChangeResult.REFRESH}if(c.hasChanged("showMoreStrategy"))return adf.mf.api.amx.AmxNodeChangeResult.REFRESH;if(c.hasChanged("editMode")){d=a.getAttribute("editMode");e=c.getOldValue("editMode");if(d==e)return adf.mf.api.amx.AmxNodeChangeResult.NONE;
if(adf.mf.api.amx.isValueTrue(d))return adf.mf.api.amx.AmxNodeChangeResult.REFRESH}}return adf.mf.api.amx.AmxNodeChangeResult.RERENDER};s.prototype.visitChildren=function(b,c,d){var e=b.getAttribute("value");if(void 0===e)return b.visitStampedChildren(null,null,null,c,d);if(b.visitStampedChildren(null,["header","footer"],null,c,d))return!0;for(var e=adf.mf.api.amx.createIterator(e),g=b.getAttribute("var"),h=b.getAttributeExpression("value"),h=h.trim().replace(/^#{/,"").replace(/}$/,"");e.hasNext();){var k=
e.next();adf.mf.el.pushVariable(g,k);try{if(a(b,e,g,h),b.visitStampedChildren(e.getRowKey(),[null],null,c,d))return!0}finally{k=b,e.isTreeNodeIterator()||k.__popElReplacements(),adf.mf.el.popVariable(g)}}return!1};s.prototype.render=function(a,b){var c=document.createElement("div");c.className="amx-listView";if("yes"==a.getAttribute("_placeholder")){var g=document.createElement("div");g.id=b+"_placeholder";g.className="amx-listView-placeholder amx-deferred-loading";var h=adf.mf.resource.getInfoString("AMXInfoBundle",
"MSG_LOADING");g.setAttribute("aria-label",h);c.appendChild(g);a.setState(adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED);return c}this._renderHeaderFacet(a,c);var k=document.createElement("div");c.appendChild(k);k.className="adfmf-listView-main";g=document.createElement("div");k.appendChild(g);g.setAttribute("role","list");g.id=b+"_innerList";g.className="adfmf-listView-innerList";adf.mf.api.amx.enableScrolling(g);var h=d(a.getId(),a),m=a.getAttribute("maxRows"),n=null,o=a.getAttribute("dividerAttribute");
null!=o&&""!=o&&(n="#{"+a.getAttribute("var")+"."+o+"}",a.setAttributeResolvedValue("_lastDivider",null),"off"!==a.getAttribute("sectionIndex")&&"firstLetter"===a.getAttribute("dividerMode")&&(a.setAttributeResolvedValue("_indexBarRegister",{}),o=document.createElement("div"),o.className="adfmf-listView-index",k.appendChild(o)),k=!adf.mf.api.amx.isValueTrue(a.getAttribute("editMode")),a.setAttributeResolvedValue("_useSticky",k));k=a.getAttribute("value");o=!1;if(void 0!==k){for(var o=adf.mf.api.amx.createIterator(k),
s={currentDividerElement:null},k=0;k<m&&o.hasNext();++k){var t=o.next();this._renderItem(a,h,o,g,t,k,n,s)}o=o.getTotalCount()>m||!o.isAllDataLoaded();s.currentDividerElement&&a.getAttribute("showDividerCount")&&this._displayDividerCount(g);adf.mf.api.amx.isValueTrue(a.getAttribute("editMode"))&&adf.mf.internal.amx.addCSSClassName(g,"amx-listView-editMode")}else{m=a.renderDescendants();k=0;for(n=m.length;k<n;++k)s=m[k],t=""+k,h==t&&e(s),s.setAttribute("data-listViewRk",t),g.appendChild(s)}this._addOrRemoveLoadMoreRowsDom(a,
b,g,o);this._createScrollHandler(a,g);this._appendFooter(a,c);return c};s.prototype._handleMaxRowsRefresh=function(a,b,c){this._storeClientState(a,b);var e=a.getAttribute("_lastIndexRendered");null==e&&(e=-1);var g=a.getAttribute("value"),g=adf.mf.api.amx.createIterator(g);0<e&&g.setCurrentIndex(e);var h=a.getAttribute("maxRows"),k=d(a.getId(),a),m=null,n=a.getAttribute("dividerAttribute");null!=n&&""!=n?(m="#{"+a.getAttribute("var")+"."+n+"}",a.setAttributeResolvedValue("_useSticky",!0)):a.setAttributeResolvedValue("_useSticky",
!1);for(var o=null,s=null,t=b.childNodes,v=t.length,n=v-1;0<=n;--n){var w=t[n];if(adf.mf.internal.amx.containsCSSClassName(w,"amx-listView-divider")){o=w;break}else if(adf.mf.internal.amx.containsCSSClassName(w,"adfmf-listView-group")){s=w;o=w.querySelector(".amx-listView-divider");break}}var T=null;s&&(t=s.childNodes,v=t.length);for(n=v-1;0<=n;--n)if(w=t[n],adf.mf.internal.amx.containsCSSClassName(w,"amx-listItem")&&!adf.mf.internal.amx.containsCSSClassName(w,"amx-listItem-moreRows")){T=w;break}o=
{currentDividerGroup:s,currentDividerElement:o,lastListItem:T};s=!1;for(n=e+1;n<h&&g.hasNext();++n)e=g.next(),this._renderItem(a,k,g,b,e,n,m,o),s=!0;!0===s&&u(c,a,!1);o.currentDividerElement&&a.getAttribute("showDividerCount")&&this._displayDividerCount(b);this._createScrollHandler(a,b);c=g.getTotalCount()>h||!g.isAllDataLoaded();this._addOrRemoveLoadMoreRowsDom(a,a.getId(),b,c);"viewport"==a.getAttribute("bufferStrategy")&&this._updateViewportBuffer(a,b)};s.prototype._createScrollHandler=function(a,
b){var c=!1,d=a.getAttribute("showMoreStrategy");if("autoScroll"==d||"forceScroll"==d)c=!0;var e=!1;"viewport"==a.getAttribute("bufferStrategy")&&(e=!0);adf.mf.api.amx.removeBubbleEventListener(b,"scroll");var g=a.getAttribute("_useSticky");if("iOS"==adf.mf.internal.amx.agent.type){d=!1;if(!adf.mf.environment.profile.dtMode&&("dev"==adf._bootstrapMode||"hosted"==adf._bootstrapMode)){var h=adf.mf.api.getQueryString(),k=adf.mf.api.getQueryStringParamValue(h,"amx_skin_folder_override"),h=adf.mf.api.getQueryStringParamValue(h,
"amx_skin_override");null!=k&&-1!=k.indexOf("android")?d=!0:null!=h&&-1!=h.indexOf("android")&&(d=!0)}d||(g=!1)}if(!(!0!==g&&!c&&!e)){var m=function(a){var b=a.data[0],d=a.data[1],h=b.getId(),a=a.target;if(a.id==h+"_innerList"){var k=a.offsetHeight;if(!(null==k||0==k)){k=adf.mf.internal.amx.containsCSSClassName(a,"amx-listView-editMode");if(!k&&!0===g)for(var m=a.childNodes,n=0;n<m.length;n++){var o=m[n],s=o.childNodes[0],t=o.offsetTop,u=o.offsetHeight,v=s.offsetHeight,z=a.scrollTop;t<=z&&z<=t+u-
v?adf.mf.internal.amx.containsCSSClassName(o,"amx-static")||adf.mf.internal.amx.addCSSClassName(o,"amx-static"):adf.mf.internal.amx.containsCSSClassName(o,"amx-static")&&adf.mf.internal.amx.removeCSSClassName(o,"amx-static");z>t+u-v?(adf.mf.internal.amx.containsCSSClassName(s,"amx-bottom")||adf.mf.internal.amx.addCSSClassName(s,"amx-bottom"),s.style.opacity=Math.max(1-(z-t-u+v)/v,0.5)):adf.mf.internal.amx.containsCSSClassName(s,"amx-bottom")&&(adf.mf.internal.amx.removeCSSClassName(s,"amx-bottom"),
s.style.opacity=1)}!k&&c&&(h=document.getElementById(h+"_loadMoreRows"),null!=h&&a.scrollHeight!=a.offsetHeight&&(adf.mf.internal.amx.containsCSSClassName(h,"amx-listItem-scrollStrategy")||(h.className+=" amx-listItem-scrollStrategy"),a.scrollTop>a.scrollHeight-a.offsetHeight-h.offsetHeight&&!adf.mf.internal.amx.containsCSSClassName(h,"amx-listItem-scrollStrategyLoading")&&(h.className+=" amx-listItem-scrollStrategyLoading",window.setTimeout(function(){b.getTypeHandler()._handleMoreRowsAction(b)},
1))));e&&d._updateViewportBuffer(b,a)}}};adf.mf.api.amx.addBubbleEventListener(b,"scroll",m,[a,this]);var n=this;window.setTimeout(function(){m({target:b,data:[a,n]})},1)}};s.prototype._updateViewportBuffer=function(a,b){var c=parseInt(a.getAttribute("bufferSize"),10);if(isNaN(c)||0>c)c=100;for(var d=b.scrollTop,e=b.childNodes,g=d-c,c=d+b.offsetHeight+c,d={outsideViewport:[],insideViewport:[]},h=0,k=e.length;h<k;++h){var m=e[h];if(!adf.mf.internal.amx.containsCSSClassName(m,"amx-listItem-moreRows"))if(adf.mf.internal.amx.containsCSSClassName(m,
"adfmf-listView-group"))for(var n=m.childNodes,o=0,s=n.length;o<s;++o){var t=n[o],u=m.offsetTop;!adf.mf.internal.amx.containsCSSClassName(t,"amx-listView-divider")&&!adf.mf.internal.amx.containsCSSClassName(t,"amx-listItem-undisclosed")&&(adf.mf.internal.amx.containsCSSClassName(m,"amx-static")&&(u=0),this._gatherViewportChildInfo(t,g,c,u,d))}else this._gatherViewportChildInfo(m,g,c,0,d)}this._adjustViewportChildren(d.outsideViewport,!1);this._adjustViewportChildren(d.insideViewport,!0)};s.prototype._gatherViewportChildInfo=
function(a,b,c,d,e){d=a.offsetTop+d;d+a.offsetHeight<b?e.outsideViewport.push(a):d>c?e.outsideViewport.push(a):e.insideViewport.push(a)};s.prototype._adjustViewportChildren=function(a,b){for(i=0,aboveCount=a.length;i<aboveCount;++i){var c=a[i];b?adf.mf.internal.amx.containsCSSClassName(c,"amx-listItem-outsideOfBuffer")&&(c.style.height="",adf.mf.internal.amx.removeCSSClassName(c,"amx-listItem-outsideOfBuffer")):adf.mf.internal.amx.containsCSSClassName(c,"amx-listItem-outsideOfBuffer")||(c.style.height=
c.offsetHeight+"px",adf.mf.internal.amx.addCSSClassName(c,"amx-listItem-outsideOfBuffer"))}};s.prototype.postDisplay=function(a,b){if("yes"!=b.getAttribute("_placeholder")){"nomore"==b.getAttribute("_placeholder")&&(b.setAttributeResolvedValue("_placeholder",null),b.getState()==adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED&&b.setState(adf.mf.api.amx.AmxNodeStates.RENDERED));var c=a.querySelector(".adfmf-listView-innerList");this._restoreScrollPosition(b,c);u(a,b);c={innerListElement:c,typeHandler:this,
amxNode:b};adf.mf.api.amx.addBubbleEventListener(window,"resize",this._handleResize,c);adf.mf.api.amx.addBubbleEventListener(a,"resize",this._handleResize,c)}};s.prototype._handleResize=function(a){var b=a.data.innerListElement,c=a.data.typeHandler,a=a.data.amxNode;null!=b&&"viewport"==a.getAttribute("bufferStrategy")&&c._updateViewportBuffer(a,b)};var t=function(a){var a=a.data,b=a.getId(),b=document.getElementById(b);u(b,a,!1)},u=function(a,b,c){var d=a.querySelector(".adfmf-listView-index"),e=
document.getElementById(b.getId()+"_innerList");if(null!==d){var g=b.getAttribute("_indexBarRegister");if(g){adf.mf.internal.amx.addCSSClassName(a,"adfmf-listView-has-index");var h=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_STRING").toUpperCase(),k=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_OTHERS").toUpperCase(),a=String.fromCharCode(9679);adf.mf.api.amx.emptyHtmlElement(d);var m=v(d,h.charAt(0),g[h.charAt(0)],"adfmf-listView-indexCharacter").offsetHeight;
if(!1!==c){adf.mf.api.amx.addBubbleEventListener(window,"resize",t,b);var n=-1;adf.mf.api.amx.addDragListener(d,{start:function(){adf.mf.internal.amx.addCSSClassName(e,"adfmf-listView-scrollable-disabled");n=-1},drag:function(a,b){a.preventDefault();a.stopPropagation();var c=(d.offsetHeight-m)/h.length,e=adf.mf.internal.amx.getElementTop(d),c=Math.round((b.pageY-e)/c);if(c<h.length){if(n!==c&&(n=c,g[h.charAt(c)]))g[h.charAt(c)]()}else if(-1!==n){n=-1;if(g[k])g[k]();g[k]()}},end:function(){adf.mf.internal.amx.removeCSSClassName(e,
"adfmf-listView-scrollable-disabled")}})}var b=1,c=0,o=d.offsetHeight;0===o&&(o=m);o=Math.floor(o/m);if(4>o)adf.mf.api.amx.removeDomNode(d);else{o<h.length+1&&(c=Math.floor(2*(h.length-2)/(o-3)),b+=c);for(o=null;b+1+c<h.length;b=b+1+c){if(0<c){for(var s=void 0,u=b-c;u<b;u++)if(void 0!==g[h.charAt(u)]){s=g[h.charAt(u)];break}v(d,a,s,"adfmf-listView-indexBullet")}v(d,h.charAt(b),g[h.charAt(b)],"adfmf-listView-indexCharacter");o=b}if(null!=o&&0<c&&o+1<h.length){s=void 0;for(u=o-c;u<o;u++)if(void 0!==
g[h.charAt(u)]){s=g[h.charAt(u)];break}v(d,a,s,"adfmf-listView-indexBullet")}b<h.length&&v(d,h.charAt(h.length-1),g[h.charAt(h.length-1)],"adfmf-listView-indexCharacter");v(d,k,g[k],"adfmf-listView-indexOther")}}else adf.mf.api.amx.removeDomNode(d)}},v=function(a,b,c,d){var e=document.createElement("div"),g="adfmf-listView-indexItem";c&&(g+=" adfmf-listView-indexItem-active",adf.mf.api.amx.addBubbleEventListener(e,"tap",function(a){a.preventDefault();a.stopPropagation();c()}));e.className=g+" "+d;
e.textContent=""+b;a.appendChild(e);return e};s.prototype.refresh=function(a,b){if("yes"!=a.getAttribute("_placeholder")){var c=a.getId(),d=document.getElementById(c),e=document.getElementById(c+"_innerList"),g=b.getCustomValue("isLoadMoreRowsChange");if(!g&&b.hasChanged("value"))this._refreshCollectionChanges(a,b),u(d,a,!1),this._createScrollHandler(a,e);else if(b.hasChanged("editMode")){if(!(null==a||void 0===a.getAttribute("value"))){adf.mf.internal.amx.addCSSClassName(e,"amx-listView-editMode");
if(c=m(e).querySelector(".adfmf-listView-index"))adf.mf.api.amx.removeDomNode(c),adf.mf.api.amx.removeBubbleEventListener(window,"resize",t,a);c=e.childNodes;for(d=0;d<c.length;++d)if(g=c[d],adf.mf.internal.amx.containsCSSClassName(g,"adfmf-listView-group")){for(var h=g.childNodes,n=0;n<h.length;++n){var o=h[n];g.removeChild(o);adf.mf.internal.amx.containsCSSClassName(o,"amx-listItem")&&!adf.mf.internal.amx.containsCSSClassName(o,"amx-listItem-moreRows")&&!adf.mf.internal.amx.containsCSSClassName(o,
"amx-listView-divider")&&e.appendChild(o);--n}adf.mf.api.amx.removeDomNode(g);--d}else adf.mf.internal.amx.containsCSSClassName(g,"amx-listItem")&&!adf.mf.internal.amx.containsCSSClassName(g,"amx-listItem-moreRows")?(h=document.createElement("div"),h.className="amx-listItem-handle",g.appendChild(h),k(g)):adf.mf.internal.amx.containsCSSClassName(g,"amx-listView-divider")&&(adf.mf.api.amx.removeDomNode(g),--d);this._createScrollHandler(a,e)}a.setAttributeResolvedValue("_useSticky",!1)}else if(g||b.hasChanged("maxRows"))this._handleMaxRowsRefresh(a,
e,d),a.getState()==adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED&&a.setState(adf.mf.api.amx.AmxNodeStates.RENDERED);else if(b.hasChanged("showMoreStrategy")||b.hasChanged("hasMoreKeysChanged"))d=!1,g=a.getAttribute("value"),null!=g&&(d=adf.mf.api.amx.createIterator(g),g=a.getAttribute("maxRows"),d=d.getTotalCount()>g||!d.isAllDataLoaded()),this._addOrRemoveLoadMoreRowsDom(a,c,e,d),b.hasChanged("showMoreStrategy")&&this._createScrollHandler(a,e)}};s.prototype.preDestroy=function(a,b){null==b.getAttribute("_placeholder")&&
this._storeClientState(b,document.getElementById(b.getId()+"_innerList"))};s.prototype.destroy=function(a,b){if(null==b.getAttribute("_placeholder")){var c=a.querySelector(".adfmf-listView-innerList");c&&adf.mf.api.amx.removeBubbleEventListener(c,"scroll");a.querySelector(".adfmf-listView-index")&&adf.mf.api.amx.removeBubbleEventListener(window,"resize",t,b)}};s.prototype._refreshCollectionChanges=function(a,b){var c=b.getCollectionChange("value").getUpdatedKeys(),d=a.getAttribute("value"),d=adf.mf.api.amx.createIterator(d);
document.getElementById(a.getId());for(var e=0,g=c.length;e<g;++e){var h=c[e];d.setCurrentRowKey(h)&&a.getRenderedChildren(null,h)[0].rerender()}};s.prototype._storeClientState=function(a,b){if(null!=b){var c=b.scrollLeft,d=b.scrollTop,e=a.getClientState();null==e&&(e={});if(null!=c||null!=d)e.scrollLeft=c,e.scrollTop=d;e.maxRows=a.getAttribute("maxRows");a.setClientState(e)}};s.prototype._restoreScrollPosition=function(a,b){var c=a.getClientState();if(null!=c){var d=c.scrollLeft;null!=d&&(b.scrollLeft=
d);c=c.scrollTop;null!=c&&(b.scrollTop=c)}};s.prototype._renderItem=function(a,b,c,d,e,g,h,k){a.setAttributeResolvedValue("_lastIndexRendered",g);b=a.getAttribute("var");adf.mf.el.pushVariable(b,e);c=c.getRowKey();null!=h&&null!=a.getAttribute("dividerAttribute")&&!0!==a.getAttribute("editMode")&&(g=this._getCurrentDivider(a,h),h=a.getAttribute("_lastDivider"),g!=h?(h=k.currentDividerGroup,k.currentDividerGroup=document.createElement("div"),adf.mf.internal.amx.addCSSClassName(k.currentDividerGroup,
"adfmf-listView-group"),this._appendToListView(d,k.currentDividerGroup,h),h=d,d=k.currentDividerGroup,k.lastListItem=null,k.currentDividerElement=this._insertDivider(a,g,d,k.lastListItem),k.lastListItem=k.currentDividerElement,(e=a.getAttribute("_indexBarRegister"))&&!e[g]&&(e[g]=w(h,d)),a.setAttributeResolvedValue("_indexBarRegister",e),a.setAttributeResolvedValue("_lastDivider",g)):k.currentDividerGroup&&(d=k.currentDividerGroup));h=a.getRenderedChildren(null,c);g=0;for(e=h.length;g<e;++g){var c=
h[g],m=c.getTag();if("listItem"==m.getName()&&m.getNamespace()==adf.mf.api.amx.AmxTag.NAMESPACE_AMX){g=c.render();if(null!=g){null==a.getAttribute("_oldValue")&&a.setAttributeResolvedValue("_oldValue",c.getStampKey());if(null!=a.getAttribute("dividerAttribute")&&!0!==a.getAttribute("editMode")&&(a=k.currentDividerElement,null!=a)){h=a.childNodes;a=!1;e=0;for(m=h.length;e<m;++e)if(adf.mf.internal.amx.containsCSSClassName(h[e],"amx-listView-undisclosedIcon")){a=!0;break}h=c.getClientState();null==h&&
(h={});a?(adf.mf.internal.amx.addCSSClassName(g,"amx-listItem-undisclosed"),h.isHidden=!0):(adf.mf.internal.amx.removeCSSClassName(g,"amx-listItem-undisclosed"),h.isHidden=!1);c.setClientState(h)}this._appendToListView(d,g,k.lastListItem);k.lastListItem=g}break}}adf.mf.el.popVariable(b)};var w=function(a,b){if(b&&a)return function(){a.scrollTop=b.offsetTop}};s.prototype._displayDividerCount=function(a){for(var a=a.childNodes,b=0,c=a.length;b<c;++b){var d=a[b];if(adf.mf.internal.amx.containsCSSClassName(d,
"adfmf-listView-group")){for(var e=d.childNodes,g=0,h=0;h<e.length;h++)adf.mf.internal.amx.containsCSSClassName(e[h],"amx-listItem")&&!adf.mf.internal.amx.containsCSSClassName(e[h],"amx-listItem-moreRows")&&!adf.mf.internal.amx.containsCSSClassName(e[h],"amx-listView-divider")&&g++;d=d.querySelectorAll(".amx-listView-divider");for(e=0;e<d.length;e++)if(h=d[e].querySelector(".amx-listView-dividerCounterText"))h.textContent=g}}};s.prototype._collapseDividerIfNecessary=function(a,b,c){if(a.getAttribute("collapsedDividers")&&
(a=a.getAttribute("collapsedDividers"),null!=a&&-1!=a.indexOf(c))){b=b.childNodes;c=0;for(a=b.length;c<a;++c){var d=b[c];adf.mf.internal.amx.containsCSSClassName(d,"amx-listView-disclosedIcon")&&(adf.mf.internal.amx.removeCSSClassName(d,"amx-listView-disclosedIcon"),adf.mf.internal.amx.addCSSClassName(d,"amx-listView-undisclosedIcon"))}}};s.prototype._renderHeaderFacet=function(a,b){var c=a.getRenderedChildren("header");if(c.length){var d=document.createElement("div");d.className="amx-listView-header";
b.appendChild(d);var e=document.createElement("div");e.className="amx-listView-facet-header";d.appendChild(e);for(var d=0,g=c.length;d<g;++d){var h=c[d].render();h&&e.appendChild(h)}}};s.prototype._appendToListView=function(a,b,c){c?o(a,c,b):a.appendChild(b)};s.prototype._appendFooter=function(a,b){var c=a.getRenderedChildren("footer");if(c.length){var d=document.createElement("div");d.className="amx-listView-footer";b.appendChild(d);var e=document.createElement("div");e.className="amx-listView-facet-footer";
d.appendChild(e);for(var d=0,g=c.length;d<g;++d){var h=c[d].render();h&&e.appendChild(h)}}};s.prototype._getCurrentDivider=function(a,b){var c=adf.mf.el.getLocalValue(b);if("firstLetter"===a.getAttribute("dividerMode")&&null!==c){var c=c.charAt(0),c=c.toUpperCase(),d=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_STRING").toUpperCase(),e=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_OTHERS").toUpperCase(),g=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_INDEX_ACCENT_MAP").toUpperCase();
if(-1<d.indexOf(c))return""+c;d=g.indexOf(c);if(0<d){for(;"|"!==g.charAt(d)&&"|"!==g.charAt(--d);)c=g.charAt(d);return c}return""+e}return""+c};s.prototype._insertDivider=function(a,b,c,d){var e=document.createElement("div");e.setAttribute("tabindex","0");if(adf.mf.api.amx.isValueTrue(a.getAttribute("collapsibleDividers"))){e.className="amx-listView-divider";var g=document.createElement("div");g.className="amx-listView-disclosedIcon";e.appendChild(g);g=document.createElement("div");g.setAttribute("role",
"heading");g.className="amx-listView-dividerText";g.textContent=b;e.appendChild(g);if(adf.mf.api.amx.isValueTrue(a.getAttribute("showDividerCount"))){g=document.createElement("div");g.className="amx-listView-dividerCounter";e.appendChild(g);var h=document.createElement("div");h.className="amx-listView-dividerCounterText";g.appendChild(h)}}else e.className="amx-listView-divider amx-listView-nonCollapsibleDivider",g=document.createElement("div"),g.setAttribute("role","heading"),g.className="amx-listView-nonCollapsibleDivider amx-listView-dividerText",
g.textContent=b,e.appendChild(g),adf.mf.api.amx.isValueTrue(a.getAttribute("showDividerCount"))&&(g=document.createElement("div"),g.className="amx-listView-dividerCounter",e.appendChild(g),h=document.createElement("div"),h.className="amx-listView-dividerCounterText",g.appendChild(h));adf.mf.internal.amx._setNonPrimitiveElementData(e,"items",[]);this._appendToListView(c,e,d);if(adf.mf.api.amx.isValueTrue(a.getAttribute("collapsibleDividers"))){this._collapseDividerIfNecessary(a,e,b);var k=this;adf.mf.api.amx.addDragListener(e,
{start:function(){},drag:function(){},end:function(){},threshold:5});adf.mf.api.amx.addBubbleEventListener(e,"tap",function(){if(adf.mf.api.amx.acceptEvent()){var b=this;setTimeout(function(){return function(){for(var c=b.nextSibling,d=!1,e=c.className;null!=c&&-1==e.indexOf("amx-listItem-moreRows")&&-1!=e.indexOf("amx-listItem")&&-1==e.indexOf("amx-listView-divider");){var e=adf.mf.internal.amx._getNonPrimitiveElementData(c,"amxNode"),g=e.getClientState();null==g&&(g={});adf.mf.internal.amx.containsCSSClassName(c,
"amx-listItem-undisclosed")?(adf.mf.internal.amx.removeCSSClassName(c,"amx-listItem-undisclosed"),g.isHidden=!1):(adf.mf.internal.amx.addCSSClassName(c,"amx-listItem-undisclosed"),d=g.isHidden=!0);e.setClientState(g);c=c.nextSibling;e=null!=c?c.className:""}e=a.getId();c=document.getElementById(e+"_innerList");!0===d&&c.scrollTop>b.parentNode.offsetTop&&(adf.mf.internal.amx.removeCSSClassName(b,"amx-bottom"),c.scrollTop=b.parentNode.offsetTop);c.scrollHeight<=c.offsetHeight&&(d=document.getElementById(e+
"_loadMoreRows"),null!=d&&adf.mf.internal.amx.removeCSSClassName(d,"amx-listItem-scrollStrategy"));d=[a,k];e=document.createEvent("HTMLEvents");e.initEvent("scroll",!0,!0);e.view=window;e.altKey=!1;e.ctrlKey=!1;e.shiftKey=!1;e.metaKey=!1;e.keyCode=0;e.charCode="a";null!=d&&(e.triggerExtra=d);c.dispatchEvent(e)}}());for(var c=b.childNodes,d=0,e=c.length;d<e;++d){var g=c[d];adf.mf.internal.amx.containsCSSClassName(g,"amx-listView-disclosedIcon")?(adf.mf.internal.amx.removeCSSClassName(g,"amx-listView-disclosedIcon"),
adf.mf.internal.amx.addCSSClassName(g,"amx-listView-undisclosedIcon")):adf.mf.internal.amx.containsCSSClassName(g,"amx-listView-undisclosedIcon")&&(adf.mf.internal.amx.removeCSSClassName(g,"amx-listView-undisclosedIcon"),adf.mf.internal.amx.addCSSClassName(g,"amx-listView-disclosedIcon"))}}})}return e};s.prototype._createAndAppendTheMoreRowsDom=function(a,b,c,d){var e=adf.mf.resource.getInfoString("AMXInfoBundle","amx_listView_MSG_LOAD_MORE_ROWS"),g=document.createElement("div");g.id=b+"_loadMoreRows";
g.setAttribute("role","button");g.setAttribute("tabindex","0");d&&c.scrollHeight<=c.offsetHeight&&(d=!1);d?(g.className="amx-listItem amx-listItem-moreRows amx-listItem-scrollStrategy",g.setAttribute("aria-label",e)):g.className="amx-listItem amx-listItem-moreRows";b=document.createElement("span");b.appendChild(document.createTextNode(e));b.className="amx-outputText";g.appendChild(b);c.appendChild(g);adf.mf.api.amx.addBubbleEventListener(g,"tap",this._handleMoreRowsTap,a)};s.prototype._addOrRemoveLoadMoreRowsDom=
function(a,b,c,d){var e=document.getElementById(b+"_loadMoreRows"),g=a.getAttribute("showMoreStrategy");"off"==g?d=!1:"forceLink"==g?d=!0:"forceScroll"==g&&(d=!0);g="autoScroll"==g||"forceScroll"==g;document.getElementById(b);d&&null==e?this._createAndAppendTheMoreRowsDom(a,b,c,g):!d&&null!=e?adf.mf.api.amx.removeDomNode(e):null!=e&&(adf.mf.api.amx.removeDomNode(e),this._createAndAppendTheMoreRowsDom(a,b,c,g))};s.prototype._handleMoreRowsTap=function(a){a=a.data;a.getTypeHandler()._handleMoreRowsAction(a)};
s.prototype._queueRangeChangeListener=function(a,b,c,d){if(null!=a.getAttributeExpression("rangeChangeListener")){var e=a.getId(),g=null;if(null!=b&&(g=b.getRowKey(),0<c)){var h=b.getRowKey();b.setCurrentIndex(c-1);g=b.getRowKey();null!=h&&b.setCurrentRowKey(h)}b=null;c=a.getAttributeExpression("value");null!=c&&(b=adf.mf.util.getContextFreeExpression(c));d=new adf.mf.api.amx.RangeChangeEvent(e,b,g,d);adf.mf.api.amx.processAmxEvent(a,"rangeChange",void 0,void 0,d)}};s.prototype._handleMoreRowsAction=
function(a){var b=a.getAttribute("fetchSize"),c=a.getAttribute("maxRows"),d=a.getAttribute("value");if(void 0===b||void 0===c||void 0===d)this._queueRangeChangeListener(a,null,0,0);else if(Infinity==c&&Infinity==b)this._queueRangeChangeListener(a,null,0,0);else{var e=c;adf.mf.api.amx.showLoadingIndicator();if(Infinity!=c&&0<b){a.setAttributeResolvedValue("_oldMaxRows",e);c+=b;a.setAttributeResolvedValue("maxRows",c);var g=document.getElementById(a.getId()+"_innerList");this._storeClientState(a,g);
var g=adf.mf.api.amx.createIterator(d),h=g.getAvailableCount(),k=g.getTotalCount();(k>h||!g.isAllDataLoaded())&&h<c?(this._queueRangeChangeListener(a,g,h,b),g.isTreeNodeIterator()?(a.setAttributeResolvedValue("_loadMoreObj",{currentRows:e,maxRows:c}),a.setState(adf.mf.api.amx.AmxNodeStates.PARTIALLY_RENDERED),adf.mf.api.amx.bulkLoadProviders(d,e,c,function(){try{if(null!=a.getAttribute("_loadMoreObj")){a.setAttributeResolvedValue("_loadMoreObj",null);var b=new adf.mf.api.amx.AmxNodeUpdateArguments;
b.setAffectedAttribute(a,"maxRows");adf.mf.api.amx.markNodeForUpdate(b)}}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.api.adf.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"_handleMoreRowsAction","MSG_ITERATOR_FIRST_NEXT_ERROR",a,b);adf.mf.api.amx.hideLoadingIndicator()})):adf.mf.api.amx.hideLoadingIndicator()):(k<=h&&h<c&&null!=a.getAttributeExpression("rangeChangeListener")?this._queueRangeChangeListener(a,g,h,b):(b=new adf.mf.api.amx.AmxNodeUpdateArguments,b.setAffectedAttribute(a,
"maxRows"),adf.mf.api.amx.markNodeForUpdate(b)),adf.mf.api.amx.hideLoadingIndicator())}}};s.prototype._isLoadMoreRowsDataChangeEvent=function(a,b){var c=a.getAttribute("_loadMoreObj");if(null!=c){var d=b.getCollectionChange("value");if(null!=d&&d.isItemized()&&0==d.getDeletedKeys().length&&0==d.getDirtiedKeys().length&&0==d.getUpdatedKeys().length){var d=d.getCreatedKeys(),e=d.length,g=c.maxRows,c=g-c.currentRows;if(0<=e&&e<=c&&a.getAttribute("maxRows")==g&&(g=a.getAttribute("_lastIndexRendered"),
c=a.getAttribute("value"),null!=c)){c=adf.mf.api.amx.createIterator(c);c.setCurrentIndex(g);for(g=0;g<e;++g){if(!c.hasNext())return!1;var h=d[g];c.next();if(h!=c.getRowKey())return!1}return!0}}}return!1};s=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"listItem");s.prototype.render=function(a,b){var c=document.createElement("div");c.setAttribute("tabindex","0");if(adf.mf.api.amx.isValueFalse(a.getAttribute("showLinkIcon")))c.setAttribute("role","listitem"),c.className="amx-listItem-noCaret";
else{c.setAttribute("role","button listitem");var g=document.createElement("div");g.className="amx-listItem-caret";c.appendChild(g)}for(var g=a.renderDescendants(),h=0,m=g.length;h<m;++h)c.appendChild(g[h]);adf.mf.api.amx.enableAmxEvent(a,c,"swipe");adf.mf.api.amx.enableAmxEvent(a,c,"tapHold");g=a.getParent();g=d(g.getId(),g);null!==g&&g==a.getStampKey()&&e(c);c.setAttribute("data-listViewRk",a.getStampKey());g=a.getClientState();null!=g&&!0==g.isHidden&&adf.mf.internal.amx.addCSSClassName(c,"amx-listItem-undisclosed");
g=a.getParent();void 0!==g.getAttribute("value")&&adf.mf.api.amx.isValueTrue(g.getAttribute("editMode"))&&(g=document.createElement("div"),g.className="amx-listItem-handle",c.appendChild(g),k(c));adf.mf.api.amx.addBubbleEventListener(c,"tap",this._handleTap,{elementId:b,itemAmxNode:a});return c};s.prototype._handleTap=function(a){a.stopPropagation();a.preventDefault();var b=document.getElementById(a.data.elementId),h=m(b),k=a.data.itemAmxNode,a=k.getParent(),n=d(a.getId(),a),o=b.getAttribute("data-listViewRk");
!adf.mf.internal.amx.containsCSSClassName(h,"amx-listView-editMode")&&!adf.mf.internal.amx.containsCSSClassName(b,"amx-listItem-moreRows")&&(h=h.querySelector(".amx-listItem-selected"),null!=h&&g(h),e(b),c(a.getId(),o,a),adf.mf.api.amx.isValueTrue(a.getAttribute("editMode"))||(adf.mf.api.amx.acceptEvent()&&(h=new adf.mf.api.amx.SelectionEvent(n,[o]),adf.mf.api.amx.processAmxEvent(a,"selection",void 0,void 0,h)),adf.mf.api.amx.validate(b,function(){if(adf.mf.api.amx.acceptEvent()){var a=new adf.mf.api.amx.ActionEvent;
adf.mf.api.amx.processAmxEvent(k,"action",void 0,void 0,a,function(){var a=k.getAttributeExpression("action",!0);null!=a&&adf.mf.api.amx.doNavigation(a)})}})))};s=adf.mf.api.amx.TypeHandler.register(adf.mf.api.amx.AmxTag.NAMESPACE_AMX,"iterator");s.prototype.createChildrenNodes=function(a){if(!a.isAttributeDefined("value"))return!1;var b;if(adf.mf.environment.profile.dtMode)b=[{},{},{}],a.setAttributeResolvedValue("value",b);else{b=a.getAttribute("value");if(void 0===b)return a.setState(adf.mf.api.amx.AmxNodeStates.INITIAL),
!0;if(null==b)return!0}var c=adf.mf.api.amx.createIterator(b);if(c.getTotalCount()>c.getAvailableCount())return adf.mf.api.amx.showLoadingIndicator(),adf.mf.api.amx.bulkLoadProviders(b,0,-1,function(){try{var b=new adf.mf.api.amx.AmxNodeUpdateArguments;b.setAffectedAttribute(a,"value");adf.mf.api.amx.markNodeForUpdate(b)}finally{adf.mf.api.amx.hideLoadingIndicator()}},function(a,b){adf.mf.log.logInfoResource("AMXInfoBundle",adf.mf.log.level.SEVERE,"createChildrenNodes","MSG_ITERATOR_FIRST_NEXT_ERROR",
a,b);adf.mf.api.amx.hideLoadingIndicator()}),a.setState(adf.mf.api.amx.AmxNodeStates.INITIAL),!0;for(;c.hasNext();)c.next(),a.createStampedChildren(c.getRowKey(),[null]);a.setState(adf.mf.api.amx.AmxNodeStates.ABLE_TO_RENDER);return!0};s.prototype.updateChildren=function(a,c){return c.hasChanged("value")?b(a,c,adf.mf.api.amx.AmxNodeChangeResult.RERENDER):adf.mf.api.amx.AmxNodeChangeResult.REFRESH};s.prototype.visitChildren=function(b,c,d){for(var e=b.getAttribute("value"),e=adf.mf.api.amx.createIterator(e),
g=b.getAttribute("var"),h=b.getAttributeExpression("value"),h=h.trim().replace(/^#{/,"").replace(/}$/,"");e.hasNext();){var k=e.next();adf.mf.el.pushVariable(g,k);try{if(a(b,e,g,h),b.visitStampedChildren(e.getRowKey(),[null],null,c,d))return!0}finally{adf.mf.el.popVariable(g),k=b,e.isTreeNodeIterator()||k.__popElReplacements()}}return!1};s.prototype.isFlattenable=function(){return!0}})();