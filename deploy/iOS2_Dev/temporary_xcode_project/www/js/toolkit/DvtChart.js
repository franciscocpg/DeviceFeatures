var DvtGraphSelectableArc=function(a,b,c,d,e,g,h,k,m){this.Init(a,b,c,d,e,g,h,k,m)};DvtObj.createSubclass(DvtGraphSelectableArc,DvtArc,"DvtGraphSelectableArc");DvtGraphSelectableArc.prototype.Init=function(a,b,c,d,e,g,h,k,m){DvtGraphSelectableArc.superclass.Init.call(this,a,b,c,d,e,g,h,k,m);this._bHover=this._bSelected=!1;this._savedStroke=this._selectionEffects=null;this._bSavedStroke=!1};DvtGraphSelectableArc.prototype.showHoverEffect=function(){this.SetSelectionMouseOver(!0)};
DvtGraphSelectableArc.prototype.hideHoverEffect=function(){this.SetSelectionMouseOver(!1)};DvtGraphSelectableArc.prototype.isHoverEffectShown=function(){return this._bHover};DvtGraphSelectableArc.prototype.SetSelectionMouseOver=function(a){this._bHover!=a&&(this._bHover=a,DvtSelectionEffectUtils.applyHoverState(this,this._dataColor))};DvtGraphSelectableArc.prototype.isSelected=function(){return this._bSelected};
DvtGraphSelectableArc.prototype.setSelected=function(a){this._bSelected!=a&&(this._bSelected=a,DvtSelectionEffectUtils.applySelectionState(this,this._dataColor,this._innerColor,this._outerColor))};DvtGraphSelectableArc.prototype.setDataColor=function(a,b,c){this._dataColor=a;this._innerColor=b;this._outerColor=c};DvtGraphSelectableArc.prototype.UpdateSelectionEffect=function(){};var DvtGraphSelectablePath=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtGraphSelectablePath,DvtPath,"DvtGraphSelectablePath");
DvtGraphSelectablePath.prototype.Init=function(a,b,c){DvtGraphSelectablePath.superclass.Init.call(this,a,b,c);this._bHover=this._bSelected=!1;this._savedStroke=this._selectionEffects=null;this._bSavedStroke=!1};DvtGraphSelectablePath.prototype.showHoverEffect=function(){this.SetSelectionMouseOver(!0)};DvtGraphSelectablePath.prototype.hideHoverEffect=function(){this.SetSelectionMouseOver(!1)};DvtGraphSelectablePath.prototype.isHoverEffectShown=function(){return this._bHover};
DvtGraphSelectablePath.prototype.SetSelectionMouseOver=function(a){this._bHover!=a&&(this._bHover=a,DvtSelectionEffectUtils.applyHoverState(this,this._dataColor))};DvtGraphSelectablePath.prototype.isSelected=function(){return this._bSelected};DvtGraphSelectablePath.prototype.setSelected=function(a){this._bSelected!=a&&(this._bSelected=a,DvtSelectionEffectUtils.applySelectionState(this,this._dataColor,this._innerColor,this._outerColor))};
DvtGraphSelectablePath.prototype.setDataColor=function(a,b,c){this._dataColor=a;this._innerColor=b;this._outerColor=c};DvtGraphSelectablePath.prototype.UpdateSelectionEffect=function(){};var DvtGraphSelectablePolygon=function(a,b,c,d){this.Init(a,b,c,d)};DvtObj.createSubclass(DvtGraphSelectablePolygon,DvtPolygon,"DvtGraphSelectablePolygon");
DvtGraphSelectablePolygon.prototype.Init=function(a,b,c){DvtGraphSelectablePolygon.superclass.Init.call(this,a,b,c);this._bHover=this._bSelected=!1;this._savedStroke=this._selectionEffects=null;this._bSavedStroke=!1};DvtGraphSelectablePolygon.prototype.showHoverEffect=function(){this.SetSelectionMouseOver(!0)};DvtGraphSelectablePolygon.prototype.hideHoverEffect=function(){this.SetSelectionMouseOver(!1)};DvtGraphSelectablePolygon.prototype.isHoverEffectShown=function(){return this._bHover};
DvtGraphSelectablePolygon.prototype.SetSelectionMouseOver=function(a){this._bHover!=a&&(this._bHover=a,DvtSelectionEffectUtils.applyHoverState(this,this._dataColor))};DvtGraphSelectablePolygon.prototype.isSelected=function(){return this._bSelected};DvtGraphSelectablePolygon.prototype.setSelected=function(a){this._bSelected!=a&&(this._bSelected=a,DvtSelectionEffectUtils.applySelectionState(this,this._dataColor,this._innerColor,this._outerColor))};
DvtGraphSelectablePolygon.prototype.setDataColor=function(a,b,c){this._dataColor=a;this._innerColor=b;this._outerColor=c};DvtGraphSelectablePolygon.prototype.UpdateSelectionEffect=function(){};var DvtChartBar=function(a,b,c,d,e,g,h,k){this.Init(a);this._bHoriz=b;this._bStacked=c;this._axisCoord=d;this._setBarCoords(e,g,h,k)};DvtObj.createSubclass(DvtChartBar,DvtPolygon,"DvtChartBar");DvtChartBar._OUTER_BORDER_WIDTH=2;DvtChartBar._INNER_BORDER_WIDTH=1.5;DvtChartBar._INDICATOR_OFFSET=8;
DvtChartBar.prototype.setStyleProperties=function(a,b,c,d,e){this._fill=a;this._stroke=b;this._hoverColor=DvtSelectionEffectUtils.getHoverBorderColor(c);this._innerColor=d;this._outerColor=e;this.setFill(a);b&&this.setStroke(b)};DvtChartBar.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0;this._showNestedBorders(this._hoverColor,this.isSelected()?this._innerColor:null)};
DvtChartBar.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1;this.isSelected()?this._showNestedBorders(this._outerColor,this._innerColor):this._showNestedBorders()};DvtChartBar.prototype.setSelected=function(a){this.IsSelected!=a&&(this.IsSelected=a,this.isSelected()?this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:this._outerColor,this._innerColor):this._showNestedBorders(this.isHoverEffectShown()?this._hoverColor:null))};
DvtChartBar.prototype.UpdateSelectionEffect=function(){};DvtChartBar.prototype.getAnimationParams=function(){return[this._baselineCoord,this._endCoord,this._x1,this._x2]};DvtChartBar.prototype.setAnimationParams=function(a,b){this._setBarCoords(a[0],a[1],a[2],a[3]);if(b){var c=this.getIndicatorPosition();b.setTranslate(c.x,c.y);b.getParent().addChild(b)}};
DvtChartBar.prototype.getDisplayAnimation=function(a){var b=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,this._x1,this._x2]);a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);return a};
DvtChartBar.prototype.getDeleteAnimation=function(a){var b=[this._baselineCoord,this._baselineCoord,this._x1,this._x2],a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0);return a};
DvtChartBar.prototype.getInsertAnimation=function(a){this.setAlpha(0);a=this.getDisplayAnimation(a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1);return a};
DvtChartBar.prototype.getIndicatorPosition=function(){var a=(this._x1+this._x2)/2,b,c=this._bStacked?(this._endCoord+this._baselineCoord)/2:this._endCoord>=this._baselineCoord?this._endCoord+DvtChartBar._INDICATOR_OFFSET:this._endCoord-DvtChartBar._INDICATOR_OFFSET;b=this._bHoriz?c:a;a=this._bHoriz?a:c;return new DvtPoint(b,a)};
DvtChartBar.prototype._setBarCoords=function(a,b,c,d){this._baselineCoord=a;this._endCoord=b;this._x1=c;this._x2=d;this.setPoints(this._createPointsArray());this._outerChild&&this._outerChild.setPoints(this._createPointsArray(DvtChartBar._OUTER_BORDER_WIDTH));this._innerChild&&this._innerChild.setPoints(this._createPointsArray(DvtChartBar._OUTER_BORDER_WIDTH+DvtChartBar._INNER_BORDER_WIDTH))};
DvtChartBar.prototype._createPointsArray=function(a){var b=this._baselineCoord,c=this._endCoord,d=this._x1,e=this._x2;if(0<a){if(Math.abs(d-e)<2*a||Math.abs(b-c)<2*a)return[];d+=a;e-=a;c<b?(b-=a,c+=a):(b+=a,c-=a)}return this._bHoriz?[c,d,c,e,b,e,b,d]:[d,c,e,c,e,b,d,b]};
DvtChartBar.prototype._initializeSelectionEffects=function(){if(!this._outerChild){var a=this._createPointsArray(DvtChartBar._OUTER_BORDER_WIDTH);this._outerChild=new DvtPolygon(this.getCtx(),a);this._outerChild.setInvisibleFill();this._outerChild.setMouseEnabled(!0);this.addChild(this._outerChild);a=this._createPointsArray(DvtChartBar._OUTER_BORDER_WIDTH+DvtChartBar._INNER_BORDER_WIDTH);this._innerChild=new DvtPolygon(this.getCtx(),a);this._innerChild.setInvisibleFill();this._innerChild.setMouseEnabled(!0);
this.addChild(this._innerChild)}};DvtChartBar.prototype._showNestedBorders=function(a,b){this._initializeSelectionEffects();b?(this.setSolidFill(a),this.setStroke(null),this._outerChild.setSolidFill(b),this._innerChild.setFill(this._fill)):(a?(this.setSolidFill(a),this.setStroke(null),this._outerChild.setFill(this._fill)):(this.setFill(this._fill),this.setStroke(this._stroke),this._outerChild.setInvisibleFill()),this._innerChild.setInvisibleFill())};
DvtChartBar.prototype.getBoundingBox=function(){var a=Math.min(this._x2,this._x1),b=Math.min(this._endCoord,this._baselineCoord),c=Math.abs(this._x2-this._x1),d=Math.abs(this._endCoord-this._baselineCoord);return this._bHoriz?new DvtRectangle(b,a,d,c):new DvtRectangle(a,b,c,d)};DvtChartBar.prototype.getDimensionsSelf=function(a){return this.ConvertCoordSpaceRect(this.getBoundingBox(),a)};var DvtChartLineMarker=function(a,b,c,d,e){this.Init(a,b,null,c,d,e,e)};
DvtObj.createSubclass(DvtChartLineMarker,DvtMarker,"DvtChartLineMarker");DvtChartLineMarker._SELECTED_FILL=new DvtSolidFill("#FFFFFF");DvtChartLineMarker._SELECTED_STROKE=new DvtSolidStroke("#5A5A5A",1,1.5);DvtChartLineMarker.prototype.setDataColor=function(a){this._dataColor=a;this._hoverStroke=new DvtSolidStroke(a,1,1.5)};DvtChartLineMarker.prototype.getDataColor=function(){return this._dataColor};DvtChartLineMarker.prototype.showHoverEffect=function(){this.IsShowingHoverEffect=!0;this.setStroke(this._hoverStroke)};
DvtChartLineMarker.prototype.hideHoverEffect=function(){this.IsShowingHoverEffect=!1;this.setStroke(this.isSelected()?DvtChartLineMarker._SELECTED_STROKE:null)};
DvtChartLineMarker.prototype.setSelected=function(a){this.IsSelected!=a&&(this.IsSelected=a,this.isSelected()?(this.setFill(DvtChartLineMarker._SELECTED_FILL),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:DvtChartLineMarker._SELECTED_STROKE)):(this.setInvisibleFill(),this.setStroke(this.isHoverEffectShown()?this._hoverStroke:null)))};DvtChartLineMarker.prototype.UpdateSelectionEffect=function(){};
var DvtChartPolarBar=function(a,b,c,d,e,g,h){this.Init(a);this._axisCoord=b;this._availSpace=h.clone();this._bbox=null;this._setBarCoords(c,d,e,g)};DvtObj.createSubclass(DvtChartPolarBar,DvtGraphSelectablePath,"DvtChartPolarBar");DvtChartPolarBar.prototype.setStyleProperties=function(a,b,c,d,e){this.setFill(a);this.setStroke(b);this.setDataColor(c,d,e)};DvtChartPolarBar.prototype.getAnimationParams=function(){return[this._baselineCoord,this._endCoord,this._x1,this._x2]};
DvtChartPolarBar.prototype.setAnimationParams=function(a){this._setBarCoords(a[0],a[1],a[2],a[3])};DvtChartPolarBar.prototype.getDisplayAnimation=function(a){var b=this.getAnimationParams();this.setAnimationParams([this._axisCoord,this._axisCoord,0,0]);a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);return a};
DvtChartPolarBar.prototype.getDeleteAnimation=function(a){var b=[this._baselineCoord,this._baselineCoord,this._x1,this._x2],a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,0);return a};
DvtChartPolarBar.prototype.getInsertAnimation=function(a){this.setAlpha(0);var b=this.getAnimationParams();this.setAnimationParams([this._baselineCoord,this._baselineCoord,this._x1,this._x2]);a=new DvtCustomAnimation(this.getCtx(),this,a);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.getAnimationParams,this.setAnimationParams,b);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this,this.getAlpha,this.setAlpha,1);return a};
DvtChartPolarBar.prototype._setBarCoords=function(a,b,c,d){var e=DvtPlotAreaRenderer.polarToCartesian(a,c,this._availSpace),g=DvtPlotAreaRenderer.polarToCartesian(a,d,this._availSpace),h=DvtPlotAreaRenderer.polarToCartesian(b,c,this._availSpace),k=DvtPlotAreaRenderer.polarToCartesian(b,d,this._availSpace);this.setCmds(DvtPathUtils.moveTo(e.x,e.y)+DvtPathUtils.arcTo(a,a,d-c,1,g.x,g.y)+DvtPathUtils.lineTo(k.x,k.y)+DvtPathUtils.arcTo(b,b,d-c,0,h.x,h.y)+DvtPathUtils.lineTo(e.x,e.y)+DvtPathUtils.closePath());
var m=Math.min(e.x,g.x,h.x,k.x),n=Math.max(e.x,g.x,h.x,k.x),o=Math.min(e.y,g.y,h.y,k.y),e=Math.max(e.y,g.y,h.y,k.y);this._bbox=new DvtRectangle(m,o,n-m,e-o);this._baselineCoord=a;this._endCoord=b;this._x1=c;this._x2=d};DvtChartPolarBar.prototype.getBoundingBox=function(){return this._bbox};var DvtFunnelSlice=function(a,b,c,d,e,g,h,k,m){this.Init(a,b,c,d,e,g,h,k,m)};DvtObj.createSubclass(DvtFunnelSlice,DvtPath,"DvtFunnelSlice");
DvtFunnelSlice.prototype.Init=function(a,b,c,d,e,g,h,k,m){DvtFunnelSlice.superclass.Init.call(this,a.getCtx());this._chart=a;this._seriesIndex=b;this._numDrawnSeries=c;this._funnelWidth=d;this._funnelHeight=e;this._startPercent=g;this._valuePercent=h;this._fillPercent=k;this._gap=m;b=this._getPath();this._dataColor=DvtChartStyleUtils.getColor(this._chart,this._seriesIndex,0);this._backgroundColor=a.getOptions().styleDefaults.backgroundColor;this._backgroundColor||(this._backgroundColor=DvtFunnelSlice._BACKGROUND_COLOR);
this.setCmds(b.slice);b.bar&&(this._bar=new DvtPath(this.getCtx(),b.bar),this.addChild(this._bar),this._bar.setMouseEnabled(!1));this._setColorProperties(b.sliceBounds);this._label=this._getSliceLabel(b.sliceBounds,b.barBounds);null!=this._label&&(this._label.setMouseEnabled(!1),this.addChild(this._label))};DvtFunnelSlice._FUNNEL_3D_WIDTH_RATIO=0.12;DvtFunnelSlice._FUNNEL_ANGLE_2D=DvtMath.degreesToRads(31);DvtFunnelSlice._FUNNEL_ANGLE_3D=DvtMath.degreesToRads(29);DvtFunnelSlice._FUNNEL_RATIO=6/22;
DvtFunnelSlice._BORDER_COLOR="#FFFFFF";DvtFunnelSlice._BACKGROUND_COLOR="#EDEDED";DvtFunnelSlice._MIN_CHARS_DATA_LABEL=3;DvtFunnelSlice._SELECTION_DISPLACEMENT=3;
DvtFunnelSlice.prototype._getPath=function(){var a="on"==this._chart.getOptions().styleDefaults.threeDEffect?!0:!1,b=DvtAgent.isRightToLeft(this.getCtx()),c=DvtChartDataUtils.getSeriesCount(this._chart),d=(this._numDrawnSeries+1)*this._gap;if(a){var a=(this._funnelWidth-c*this._gap)/Math.sin(DvtFunnelSlice._FUNNEL_ANGLE_2D),c=this._funnelHeight/Math.sin(DvtFunnelSlice._FUNNEL_ANGLE_3D),e=this._funnelWidth/this._funnelHeight*DvtFunnelSlice._FUNNEL_3D_WIDTH_RATIO,g=DvtFunnelSlice._FUNNEL_ANGLE_3D*(1-
this._startPercent),h=DvtFunnelSlice._FUNNEL_ANGLE_3D*(1-this._startPercent-this._valuePercent),k=(1+DvtFunnelSlice._FUNNEL_RATIO)/2*this._funnelHeight+c,m=(1-DvtFunnelSlice._FUNNEL_RATIO)/2*this._funnelHeight-c,n=1,o=0;b?(d=[a*Math.sin(g)+d,k-c*Math.cos(g),a*Math.sin(h)+d,k-c*Math.cos(h),a*Math.sin(h)+d,m+c*Math.cos(h),a*Math.sin(g)+d,m+c*Math.cos(g)],n=0,o=1):d=[this._funnelWidth-d-a*Math.sin(g),k-c*Math.cos(g),this._funnelWidth-d-a*Math.sin(h),k-c*Math.cos(h),this._funnelWidth-d-a*Math.sin(h),
m+c*Math.cos(h),this._funnelWidth-d-a*Math.sin(g),m+c*Math.cos(g)];g=DvtPathUtils.moveTo(d[0],d[1]);h=null;g+=DvtPathUtils.arcTo(e*(d[1]-d[7])/2,(d[1]-d[7])/2,Math.PI,o,d[6],d[7]);g+=DvtPathUtils.arcTo(e*(d[1]-d[7])/2,(d[1]-d[7])/2,Math.PI,o,d[0],d[1]);g+=DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_3D,n,d[2],d[3]);g+=DvtPathUtils.arcTo(e*(d[3]-d[5])/2,(d[3]-d[5])/2,Math.PI,o,d[4],d[5]);g+=DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_3D,n,d[6],d[7]);k=new DvtRectangle(Math.min(d[0],
d[2]),d[5],Math.abs(d[0]-d[2]),Math.abs(d[3]-d[5]));if(null!=this._fillPercent)var s=Math.max(Math.min(this._fillPercent,1),0),b=b?-s*Math.PI:s*Math.PI,h=DvtPathUtils.moveTo(d[0],d[1]),h=h+DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_3D,n,d[2],d[3]),h=h+DvtPathUtils.arcTo(e*(d[3]-d[5])/2,(d[3]-d[5])/2,b,o,d[2]+e*(d[3]-d[5])/2*Math.sin(b),(d[5]+d[3])/2+(d[3]-d[5])/2*Math.cos(b)),h=h+DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_3D,n,d[6]+e*(d[1]-d[7])/2*Math.sin(b),(d[7]+d[1])/2+(d[1]-
d[7])/2*Math.cos(b)),h=h+DvtPathUtils.arcTo(e*(d[1]-d[7])/2,(d[1]-d[7])/2,b,n,d[0],d[1]),s=new DvtRectangle(Math.min(d[0],d[2]),d[5]+Math.abs(d[3]-d[5])*(1-s),Math.abs(d[0]-d[2]),Math.abs(d[3]-d[5])*s)}else a=(this._funnelWidth-c*this._gap)/Math.sin(DvtFunnelSlice._FUNNEL_ANGLE_2D),c=this._funnelHeight/Math.sin(DvtFunnelSlice._FUNNEL_ANGLE_2D),g=DvtFunnelSlice._FUNNEL_ANGLE_2D*(1-this._startPercent),h=DvtFunnelSlice._FUNNEL_ANGLE_2D*(1-this._startPercent-this._valuePercent),k=(1+DvtFunnelSlice._FUNNEL_RATIO)/
2*this._funnelHeight+c,m=(1-DvtFunnelSlice._FUNNEL_RATIO)/2*this._funnelHeight-c,n=1,o=0,b?(d=[a*Math.sin(g)+d,k-c*Math.cos(g),a*Math.sin(h)+d,k-c*Math.cos(h),a*Math.sin(h)+d,m+c*Math.cos(h),a*Math.sin(g)+d,m+c*Math.cos(g)],n=0,o=1):d=[this._funnelWidth-d-a*Math.sin(g),k-c*Math.cos(g),this._funnelWidth-d-a*Math.sin(h),k-c*Math.cos(h),this._funnelWidth-d-a*Math.sin(h),m+c*Math.cos(h),this._funnelWidth-d-a*Math.sin(g),m+c*Math.cos(g)],g=DvtPathUtils.moveTo(d[0],d[1]),h=null,g+=DvtPathUtils.arcTo(a,
c,DvtFunnelSlice._FUNNEL_ANGLE_2D,n,d[2],d[3]),g+=DvtPathUtils.lineTo(d[4],d[5]),g+=DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_2D,n,d[6],d[7]),g+=DvtPathUtils.closePath(),k=new DvtRectangle(Math.min(d[0],d[2]),d[5],Math.abs(d[0]-d[2]),Math.abs(d[3]-d[5])),null!=this._fillPercent&&(s=Math.max(Math.min(this._fillPercent,1),0),h=DvtPathUtils.moveTo(d[0],d[1]),h+=DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_2D,n,d[2],d[3]),h+=DvtPathUtils.lineTo(d[4],d[3]+s*(d[5]-d[3])),h=0.95<this._fillPercent?
h+DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_2D,n,d[6],d[1]+s*(d[7]-d[1])):0.05>this._fillPercent?h+DvtPathUtils.arcTo(a,c,DvtFunnelSlice._FUNNEL_ANGLE_2D,o,d[6],d[1]+s*(d[7]-d[1])):h+DvtPathUtils.lineTo(d[6],d[1]+s*(d[7]-d[1])),h+=DvtPathUtils.closePath(),s=new DvtRectangle(Math.min(d[0],d[2]),d[5]+Math.abs(d[3]-d[5])*(1-s),Math.abs(d[0]-d[2]),Math.abs(d[3]-d[5])*s));return{slice:g,bar:h,sliceBounds:k,barBounds:h?s:k}};
DvtFunnelSlice.prototype._getSliceLabel=function(a,b){var c=DvtChartDataUtils.getSeriesLabel(this._chart,this._seriesIndex);if(c&&(c=new DvtOutputText(this.getCtx(),c,0,0),DvtTextUtils.fitText(c,a.h,a.w,this,DvtFunnelSlice._MIN_CHARS_DATA_LABEL))){var d=c.measureDimensions(),d=null!=DvtChartStyleUtils.getPattern(this._chart,this._seriesIndex,0)?"#0000000":b.containsPoint(a.x,a.y+(a.h-d.w)/2)?DvtColorUtils.getContrastingTextColor(this._dataColor):DvtColorUtils.getContrastingTextColor(this._backgroundColor),
d=[new DvtCSSStyle("color: "+d+";"),this._chart.getOptions().styleDefaults.sliceLabelStyle,new DvtCSSStyle(DvtChartDataUtils.getDataItem(this._chart,this._seriesIndex,0).labelStyle)];c.setCSSStyle(DvtCSSStyle.mergeStyles(d));c.setMatrix(this._getSliceLabelPosition(a));c.alignCenter();c.alignMiddle();return c}};
DvtFunnelSlice.prototype._getSliceLabelPosition=function(a){var b="on"==this._chart.getOptions().styleDefaults.threeDEffect?a.h*this._funnelWidth/this._funnelHeight*DvtFunnelSlice._FUNNEL_3D_WIDTH_RATIO/2:0,c=new DvtMatrix;DvtAgent.isRightToLeft(this.getCtx())?(c.rotate(Math.PI/2),c.translate(a.x+a.w/2-b,a.y+a.h/2)):(c.rotate(3*Math.PI/2),c.translate(a.x+a.w/2+b,a.y+a.h/2));return c};
DvtFunnelSlice.prototype.getAnimationParams=function(){return[this._startPercent,this._valuePercent,this._fillPercent,this.getAlpha()]};DvtFunnelSlice.prototype.setAnimationParams=function(a){this._startPercent=a[0];this._valuePercent=a[1];this._fillPercent=null!=this._fillPercent?a[2]:null;this.setAlpha(a[3]);a=this._getPath();this.setCmds(a.slice);a.bar&&this._bar&&this._bar.setCmds(a.bar);this._label&&this._label.setMatrix(this._getSliceLabelPosition(a.sliceBounds))};
DvtFunnelSlice.prototype._setColorProperties=function(a){var b=DvtChartSeriesEffectUtils.getFunnelSliceFill(this._chart,this._seriesIndex,this._dataColor,a),c=DvtChartStyleUtils.getBorderColor(this._chart,this._seriesIndex,0),a=DvtChartSeriesEffectUtils.getFunnelSliceFill(this._chart,this._seriesIndex,this._backgroundColor,a,!0);this._bar?(this.setFill(a),this._bar.setFill(b)):this.setFill(b);this.setSolidStroke(null!=c?c:DvtFunnelSlice._BORDER_COLOR);this.OriginalStroke=this.getStroke();if(this._chart.isSelectionSupported()){var b=
DvtSelectionEffectUtils.getHoverBorderColor(this._dataColor),c=DvtChartStyleUtils.getSelectedInnerColor(this._chart),a=DvtChartStyleUtils.getSelectedOuterColor(this._chart)?DvtChartStyleUtils.getSelectedOuterColor(this._chart):this._dataColor,d=null!=this._bar?this._bar:this;d.setHoverStroke(new DvtSolidStroke(b,1,2));d.setSelectedStroke(new DvtSolidStroke(c,1,1.5),new DvtSolidStroke(a,1,4.5));d.setSelectedHoverStroke(new DvtSolidStroke(c,1,1.5),new DvtSolidStroke(b,1,4.5));this.setCursor(DvtSelectionEffectUtils.getSelectingCursor())}};
DvtFunnelSlice.prototype.setSelected=function(a){if(null!=this._bar){if(this.IsSelected==a)return;this.IsSelected=a;this._bar.setSelected(a)}else DvtFunnelSlice.superclass.setSelected.call(this,a);var b=this.getDimensions(),c=null!=this._bar?this._bar:this,d=b.w;a?(c.setScaleX((d-DvtFunnelSlice._SELECTION_DISPLACEMENT)/d),c.setTranslateX(Math.ceil(DvtFunnelSlice._SELECTION_DISPLACEMENT/2)+DvtFunnelSlice._SELECTION_DISPLACEMENT/d*b.x)):(c.setScaleX(1),c.setTranslateX(0))};
DvtFunnelSlice.prototype.showHoverEffect=function(){null!=this._bar?this._bar.showHoverEffect():DvtFunnelSlice.superclass.showHoverEffect.call(this)};DvtFunnelSlice.prototype.hideHoverEffect=function(){null!=this._bar?this._bar.hideHoverEffect():DvtFunnelSlice.superclass.hideHoverEffect.call(this)};
DvtFunnelSlice.prototype.copyShape=function(){return new DvtFunnelSlice(this._chart,this._seriesIndex,this._numDrawnSeries,this._funnelWidth,this._funnelHeight,this._startPercent,this._valuePercent,this._fillPercent,this._gap)};var DvtPieChart=function(a,b,c,d){this.Init(a,b,c,d)};DvtPieChart._THREED_TILT=0.59;DvtPieChart._THREED_DEPTH=0.1;DvtPieChart._RADIUS=0.45;DvtPieChart._RADIUS_LABELS=0.38;DvtObj.createSubclass(DvtPieChart,DvtContainer,"DvtPieChart");
DvtPieChart.prototype.Init=function(a,b){DvtPieChart.superclass.Init.call(this,a.getCtx());this.chart=a;this._options=a.getOptions();this._frame=b.clone();a.pieChart=this;this._labelPosition=this._options.styleDefaults.sliceLabelPosition;"auto"==this._labelPosition&&(this._labelPosition="outside");this._center=new DvtPoint(b.x+Math.floor(b.w/2),b.y+Math.floor(b.h/2));var c="outside"==this._labelPosition?DvtPieChart._RADIUS_LABELS:DvtPieChart._RADIUS;this._radiusY=this._radiusX=Math.floor(Math.min(b.w,
b.h)*c);this._depth=0;this._anchorOffset=90;this.is3D()&&(this._depth=b.h*DvtPieChart._THREED_DEPTH,this._center.y-=Math.floor(this._depth/2),this._radiusY*=DvtPieChart._THREED_TILT);this._slices=this._createSlices();this._shapesContainer=new DvtContainer(this.getCtx());this._numSelectedObjsInFront=this._numFrontObjs=0};DvtPieChart.prototype.getOptions=function(){return this._options};
DvtPieChart.prototype.processEvent=function(a){var b=a.getType();b==DvtCategoryHideShowEvent.TYPE_HIDE||b==DvtCategoryHideShowEvent.TYPE_SHOW?DvtHideShowCategoryHandler.processEvent(a,this._slices):(b==DvtCategoryRolloverEvent.TYPE_OVER||b==DvtCategoryRolloverEvent.TYPE_OUT)&&DvtCategoryRolloverHandler.processEvent(a,this._slices)};DvtPieChart.prototype.highlight=function(a){DvtCategoryRolloverHandler.highlight(a,this._slices)};
DvtPieChart.prototype._createSlices=function(){for(var a=[],b,c=DvtPieChartUtils.getRenderedSeriesIndices(this.chart),d=DvtPieChartUtils.getOtherValue(this.chart),e=0;e<c.length;e++)b=c[e],DvtChartStyleUtils.isSeriesRendered(this.chart,b)&&(b=new DvtPieSlice(this,b),0>=b.getValue()||a.push(b));0<d&&a.push(new DvtPieSlice(this));DvtAgent.isRightToLeft(this.getCtx())&&a.reverse();return a};
DvtPieChart.prototype._setInitialSelection=function(){var a=this.chart.getSelectionHandler();if(a){for(var b=DvtChartDataUtils.getInitialSelection(this.chart),c=[],d=0;d<b.length;d++)for(var e=0;e<this._slices.length;e++){var g=this._slices[e].getId();g&&(b[d].id&&g.getId()==b[d].id||g.getSeries()==b[d].series&&g.getGroup()==b[d].group)&&c.push(g)}DvtPieChartUtils.isOtherSliceSelected(this.chart,b)&&(b=DvtPieChartUtils.getOtherSliceId(this.chart),c.push(b));a.processInitialSelections(c,this._slices)}};
DvtPieChart.prototype.render=function(){var a;this.contains(this._shapesContainer)||(this._shapesContainer||(this._shapesContainer=new DvtContainer(this.getCtx())),this.addChild(this._shapesContainer),!this.is3D()&&this.getSkin()==DvtCSSStyle.SKIN_SKYROS&&(a=DvtColorUtils.makeRGBA(78,87,101,0.45),a=new DvtShadow(a,4,7,7,54,2,3,!1,!1,!1)));DvtPieChart._layoutSlices(this._slices,this._anchorOffset);for(var b=0;b<this._slices.length;b++)this._slices[b].preRender();var c=DvtPieChart._orderSlicesForRendering(this._slices);
this._duringDisplayAnim||DvtPieLabelUtils.layoutLabelsAndFeelers(this);for(b=0;b<c.length;b++)c[b].render(this._duringDisplayAnim);DvtAgent.isPlatformWebkit()||a&&this._shapesContainer.addDrawEffect(a);this._setInitialSelection()};DvtPieChart.prototype.getTotalValue=function(){for(var a=0,b=0;b<this._slices.length;b++){var c=this._slices[b].getValue();0<=c&&(a+=c)}return a};
DvtPieChart._layoutSlices=function(a,b){var c,d,e,g=0,h=a?a.length:0;360<b&&(b-=360);0>b&&(b+=360);var k=e=0;0<h&&(k=a[0].getPieChart().getTotalValue());for(c=0;c<h;c++)d=a[c],value=d.getValue(),e=0==k?0:100*(Math.abs(value)/k),g=3.6*e,e=b-g,0>e&&(e+=360),d.setAngleStart(e),d.setAngleExtent(g),b=d.getAngleStart()};
DvtPieChart._orderSlicesForRendering=function(a){var b=[],c,d=a?a.length:0,e,g=-1,h,k;for(c=0;c<d;c++)if(e=a[c],h=e.getAngleStart(),e=e.getAngleExtent(),e=h+e,360<e&&(e-=360),0>e&&(e+=360),90==e||90>h&&90<e){g=c;k=e-90;break}h=[];for(c=g;c<d;c++)h.push(a[c]);for(c=0;c<g;c++)h.push(a[c]);g=a=0;k=180+k;for(c=0;c<d;c++)if(e=h[c]){if(a+e.getAngleExtent()>k){g=c;break}b.push(e);a+=e.getAngleExtent()}for(c=d-1;c>=g;c--)(e=h[c])&&b.push(e);return b};DvtPieChart.prototype.is3D=function(){return"on"==this._options.styleDefaults.threeDEffect};
DvtPieChart.prototype.__calcMaxExplodeDistance=function(){return this._radiusX*(0.5/DvtPieChart._RADIUS-1)};DvtPieChart.prototype.getAnimationDuration=function(){return DvtChartStyleUtils.getAnimationDuration(this.chart)};
DvtPieChart.prototype.doDisplayAnimation=function(){this._duringDisplayAnim=!0;for(var a=new DvtDataAnimationHandler(this.getCtx(),this),b=[],c=0;c<this._slices.length;c++)b=b.concat(this._slices[c].getLabelAndFeeler());b=new DvtAnimFadeIn(this._context,b,this.getAnimationDuration());a.add(b,0);b=DvtPieSlice.createFillerSlice(this,this.getTotalValue());this._slices.push(b);c=new DvtCustomAnimation(this.getCtx(),b,this.getAnimationDuration());c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,
b.GetAnimationParams,b.SetAnimationParams,[0,0,0]);c.setOnEnd(b._removeDeletedSlice,b);a.add(c,0);for(c=0;c<this._slices.length-1;c++)this._slices[c].animateInsert(a);b=new DvtCustomAnimation(this.getCtx(),this,this.getAnimationDuration());b.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams());a.add(b,0);this._setAnimationParams();a=a.getAnimation();a.setOnEnd(this._restoreLabelPosition,this);a.play()};
DvtPieChart.prototype._restoreLabelPosition=function(){this._duringDisplayAnim=!1};DvtPieChart.prototype.getCenter=function(){return this._center};DvtPieChart.prototype.__getFrame=function(){return this._frame};DvtPieChart.prototype.getRadiusX=function(){return this._radiusX};DvtPieChart.prototype.getRadiusY=function(){return this._radiusY};DvtPieChart.prototype.getDepth=function(){return this._depth};
DvtPieChart.prototype._getSliceDisplayable=function(a){return 0<=a&&a<this._slices.length&&(a=this._slices[a].getTopSurface())&&0<a.length?a[0]:null};DvtPieChart.prototype.__getShapesContainer=function(){return this._shapesContainer};DvtPieChart.prototype.__getSlices=function(){return this._slices};
DvtPieChart.prototype.animateUpdate=function(a,b){var c=new DvtDataAnimationHandler(this.getCtx(),this);c.constructAnimation(b.__getSlices(),this.__getSlices());var c=c.getAnimation(),d=new DvtCustomAnimation(this.getCtx(),this,this.getAnimationDuration());d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,this._getAnimationParams());c=new DvtParallelPlayable(this.getCtx(),c,d);c.setOnEnd(this._setAnimationParams,this);a.add(c,0);this._setAnimationParams()};
DvtPieChart.prototype.animateInsert=function(){};DvtPieChart.prototype.animateDelete=function(){};DvtPieChart.prototype._getAnimationParams=function(){return[1]};DvtPieChart.prototype._setAnimationParams=function(){this.removeChildren();this._shapesContainer&&this._shapesContainer.destroy();this._shapesContainer=null;this.render()};
DvtPieChart.prototype.bringToFrontOfSelection=function(a){var b=a.getPieChart()._shapesContainer;if(b){var c=b.getNumChildren();1<c-this._numFrontObjs&&(b.removeChild(a._topSurface[0]),b.addChildAt(a._topSurface[0],c-this._numFrontObjs-1))}};
DvtPieChart.prototype.pushToBackOfSelection=function(a){var b=this._slices.length,c=0;for(i=0;i<b;i++)this._slices[i].isSelected()&&c++;this._numSelectedObjsInFront=c;if(b=a.getPieChart()._shapesContainer)c=b.getNumChildren()-this._numFrontObjs-1-this._numSelectedObjsInFront,0<=c&&(b.removeChild(a._topSurface[0]),b.addChildAt(a._topSurface[0],c))};DvtPieChart.prototype.setNumFrontObjs=function(a){this._numFrontObjs=a};
DvtPieChart.prototype.getShapesForViewSwitcher=function(){var a={};if(this._slices)for(var b=0;b<this._slices.length;b++){var c=this._slices[b];if(c){var d=c.getId();d&&(d=d.getId())&&c._topSurface&&0<c._topSurface.length&&(a[d]=c._topSurface[0])}}return a};DvtPieChart.prototype.getLabelPosition=function(){return this._labelPosition};DvtPieChart.prototype.getSkin=function(){return this._options.skin};var DvtPieSlice=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtPieSlice,DvtObj,"DvtPieSlice");
DvtPieSlice.prototype.Init=function(a,b){this._pieChart=a;this._chart=a.chart;this._angleExtent=this._angleStart=0;this._crustSurface=this._rightSurface=this._leftSurface=this._topSurface=null;this._explodeOffsetY=this._explodeOffsetX=0;this._sliceLabelString=this._sliceLabelPosition=this._sliceLabel=null;this._hasFeeler=!1;this._outsideFeelerEnd=this._outsideFeelerMid=this._outsideFeelerStart=this._feelerHoriz=this._feelerRad=null;this._selecting=this._selected=!1;this._radiusX=this._pieChart.getRadiusX();
this._radiusY=this._pieChart.getRadiusY();var c=this._chart.getOptions();null!=b?(c=DvtChartDataUtils.getDataItem(this._chart,b,0),this._value=DvtChartDataUtils.getValue(this._chart,b,0),this._explode=DvtPieChartUtils.getSliceExplode(this._chart,b),this._fillColor=DvtChartStyleUtils.getColor(this._chart,b),this._fillPattern=DvtChartStyleUtils.getPattern(this._chart,b,0),this._strokeColor=DvtChartStyleUtils.getBorderColor(this._chart,b),this._customLabel=c.label,this._seriesLabel=DvtChartDataUtils.getSeries(this._chart,
b),this._tooltip=DvtChartTooltipUtils.getDatatip(null,this._chart,b,0),this._action=c.action,this._showPopupBehaviors=this._chart.getShowPopupBehaviors(c._id),this._id=DvtPieChartUtils.getSliceId(this._chart,b)):(this._value=DvtPieChartUtils.getOtherValue(this._chart),this._explode=0,this._fillColor=c.styleDefaults.otherColor,this._fillPattern=null,this._strokeColor=c.styleDefaults.borderColor,this._customLabel=null,this._seriesLabel=this._chart.getBundle().getTranslatedString("LABEL_OTHER",null),
this._tooltip=DvtChartTooltipUtils.getOtherSliceDatatip(this._chart,this._value,0),this._action=null,this._showPopupBehaviors=DvtPieChartUtils.getOtherSliceShowPopupBehaviors(this._chart),this._id=DvtPieChartUtils.getOtherSliceId(this._chart))};DvtPieSlice.prototype.getPieChart=function(){return this._pieChart};
DvtPieSlice.prototype.render=function(a){for(var b=DvtPieSlice._sortPieSurfaces(this._topSurface,this._leftSurface,this._rightSurface,this._crustSurface,this._angleStart,this._angleExtent),c=b.length,d=0;d<c;d++){var e=b[d];shapeCount=e.length;for(var g=0;g<shapeCount;g++)this._pieChart.__getShapesContainer().addChild(e[g]),e[g].render&&e[g].render()}this._sliceLabel&&(this._pieChart.addChild(this._sliceLabel),DvtPieRenderUtils.associate(this,[this._sliceLabel]),"outside"==this._pieChart.getLabelPosition()&&
(a?(this._pieChart.addChild(this._feelerRad),this._pieChart.addChild(this._feelerHoriz)):this._renderOutsideFeeler()));this._explodeSlice();if(this._action){a=this.getDisplayables();for(d=0;d<a.length;d++)a[d].setCursor(DvtSelectionEffectUtils.getSelectingCursor())}};
DvtPieSlice.prototype._feelerFromPts=function(a,b){var c=new DvtLine(this._pieChart.getCtx(),a.x,a.y,b.x,b.y),d=this._pieChart.getOptions().styleDefaults.pieFeelerColor,d=new DvtSolidStroke(d);c.setStroke(d);this._pieChart.addChild(c);return c};DvtPieSlice.prototype._renderOutsideFeeler=function(){if(this._hasFeeler){var a=this._feelerFromPts(this._outsideFeelerStart,this._outsideFeelerMid),b=this._feelerFromPts(this._outsideFeelerMid,this._outsideFeelerEnd);this._feelerRad=a;this._feelerHoriz=b}};
DvtPieSlice.prototype.preRender=function(){var a=this._bFillerSlice?"color":DvtChartStyleUtils.getSeriesEffect(this._chart),b=this.getFillColor(),c=this.getFillPattern(),d;if("pattern"==a||null!=c)c=new DvtPatternFill(c,b);else if("gradient"==a)var e=this._pieChart.getSkin(),c=e==DvtCSSStyle.SKIN_SKYROS?297:270,g=!this._pieChart.is3D()?"2D":"3D",h=DvtPieRenderUtils.getGradientColors(DvtColorUtils.getRGB(b),g,e),b=DvtPieRenderUtils.getGradientAlphas(DvtColorUtils.getAlpha(b),g),e=DvtPieRenderUtils.getGradientRatios(g,
e),g=[Math.floor(this._pieChart.getCenter().x-this._radiusX),Math.floor(this._pieChart.getCenter().y-this._radiusY),Math.ceil(2*this._radiusX),Math.ceil(2*this._radiusY)],c=new DvtLinearGradientFill(c,h,b,e,g);else c=new DvtSolidFill(b),d=new DvtSolidFill(DvtColorUtils.getDarker(b,0.6));this._topSurface=DvtPieRenderUtils.createTopSurface(this,c);if(this._pieChart.is3D()&&(0<this._pieChart.getDepth()||this._radiusX!=this.radiusY))a=(c="gradient"==a||"pattern"==a)?DvtPieRenderUtils.generateLateralGradientFill(this,
DvtPieRenderUtils.SIDE):d,d=c?DvtPieRenderUtils.generateLateralGradientFill(this,DvtPieRenderUtils.CRUST):d,this._leftSurface=DvtPieRenderUtils.createLateralSurface(this,DvtPieRenderUtils.SURFACE_LEFT,a),this._rightSurface=DvtPieRenderUtils.createLateralSurface(this,DvtPieRenderUtils.SURFACE_RIGHT,a),this._crustSurface=DvtPieRenderUtils.createLateralSurface(this,DvtPieRenderUtils.SURFACE_CRUST,d)};
DvtPieSlice._sortPieSurfaces=function(a,b,c,d,e,g){var h=[];b&&c&&d&&(270>=e&&270<e+g?(h.push(b),h.push(c),h.push(d)):270<e||90>=e+g?(h.push(b),h.push(d),h.push(c)):(h.push(c),h.push(d),h.push(b)));h.push(a);return h};DvtPieSlice.oppositeDirection=function(a,b,c){return 0<a-b!=0<a-c};
DvtPieSlice.prototype._explodeSlice=function(){if(0!=this._explode){var a=(360-(this._angleStart+this._angleExtent/2))*DvtMath.RADS_PER_DEGREE,b=this._pieChart.is3D()?DvtPieChart._THREED_TILT:1,c=this._explode*this._pieChart.__calcMaxExplodeDistance();this._explodeOffsetX=Math.cos(a)*c;this._explodeOffsetY=Math.sin(a)*b*c;DvtAgent.isPlatformWebkit()&&(this._explodeOffsetX=Math.round(this._explodeOffsetX),this._explodeOffsetY=Math.round(this._explodeOffsetY))}else this._explodeOffsetY=this._explodeOffsetX=
0;this._topSurface&&DvtPieSlice._translateShapes(this._topSurface,this._explodeOffsetX,this._explodeOffsetY);this._rightSurface&&DvtPieSlice._translateShapes(this._rightSurface,this._explodeOffsetX,this._explodeOffsetY);this._leftSurface&&DvtPieSlice._translateShapes(this._leftSurface,this._explodeOffsetX,this._explodeOffsetY);this._crustSurface&&DvtPieSlice._translateShapes(this._crustSurface,this._explodeOffsetX,this._explodeOffsetY);if(this._hasFeeler){var a=this._outsideFeelerStart.x,b=this._outsideFeelerStart.y,
c=a+this._explodeOffsetX,d=b+this._explodeOffsetY;this._feelerRad.setX1(c);this._feelerRad.setY1(d);var e=this._outsideFeelerMid.x,g=this._outsideFeelerMid.y;DvtPieSlice.oppositeDirection(e,a,c)?(this._feelerRad.setX2(c),this._feelerHoriz.setX1(c)):(this._feelerRad.setX2(e),this._feelerHoriz.setX1(e));DvtPieSlice.oppositeDirection(g,b,d)?(this._feelerRad.setY2(d),this._feelerHoriz.setY1(d)):(this._feelerRad.setY2(g),this._feelerHoriz.setY1(g))}this._sliceLabel&&!this._hasFeeler&&this._sliceLabel.setTranslate(this._explodeOffsetX,
this._explodeOffsetY)};DvtPieSlice._translateShapes=function(a,b,c){if(a)for(var d=a.length,e=0;e<d;e++)a[e].setTranslate(b,c)};DvtPieSlice.prototype.getAngleExtent=function(){return this._angleExtent};DvtPieSlice.prototype.setAngleExtent=function(a){this._angleExtent=a};DvtPieSlice.prototype.getAngleStart=function(){return this._angleStart};DvtPieSlice.prototype.setAngleStart=function(a){this._angleStart=a};DvtPieSlice.prototype.__getExplodeOffsetX=function(){return this._explodeOffsetX};
DvtPieSlice.prototype.__getExplodeOffsetY=function(){return this._explodeOffsetY};DvtPieSlice.prototype.setOutsideFeelerPoints=function(a,b,c){this._outsideFeelerStart=a;this._outsideFeelerMid=b;this._outsideFeelerEnd=c;this._hasFeeler=!0};DvtPieSlice.prototype.setNoOutsideFeeler=function(){this._outsideFeelerEnd=this._outsideFeelerMid=this._outsideFeelerStart=null;this._hasFeeler=!1};
DvtPieSlice.prototype.getLabelAndFeeler=function(){var a=[];this._sliceLabel&&a.push(this._sliceLabel);this._feelerRad&&a.push(this._feelerRad);this._feelerHoriz&&a.push(this._feelerHoriz);return a};DvtPieSlice.prototype.getSliceLabel=function(){return this._sliceLabel};DvtPieSlice.prototype.setSliceLabel=function(a){this._sliceLabel=a};DvtPieSlice.prototype.getSliceLabelString=function(){return this._sliceLabelString};DvtPieSlice.prototype.setSliceLabelString=function(a){this._sliceLabelString=a};
DvtPieSlice.prototype.getTopSurface=function(){return this._topSurface};DvtPieSlice.prototype.getValue=function(){return this._value};DvtPieSlice.prototype.getId=function(){return this._id};DvtPieSlice.containsRect=function(a,b){return b.contains(a.x,a.y)&&b.contains(a.x+a.w,a.y)&&b.contains(a.x+a.w,a.y+a.h)&&b.contains(a.x,a.y+a.h)};DvtPieSlice._shapeIsSelectable=function(a){return a instanceof DvtGraphSelectableArc||a instanceof DvtGraphSelectablePolygon||a instanceof DvtGraphSelectablePath};
DvtPieSlice.prototype.contains=function(a,b){for(var c=this._pieChart.getCenter(),d=(a-c.x)/this._radiusX,e=(b-c.y)/this._radiusY,c=-Math.atan2(e,d)*(180/Math.PI);c<this._angleStart;)c+=360;for(;360<=c-this._angleStart;)c-=360;d=1>=Math.pow(d,2)+Math.pow(e,2);c=c<=this._angleStart+this._angleExtent;return d&&c};DvtPieSlice.prototype.GetAnimationParams=function(){return[this._value,this._radiusX,this._radiusY,this._explode]};
DvtPieSlice.prototype.SetAnimationParams=function(a){this._value=a[0];this._radiusX=a[1];this._radiusY=a[2];this._explode=a[3]};DvtPieSlice.prototype.animateUpdate=function(a,b){var c=b.GetAnimationParams(),d=this.GetAnimationParams();if(!DvtArrayUtils.equals(c,d)){var e=new DvtCustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());e.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,d);a.add(e,0);this.SetAnimationParams(c)}};
DvtPieSlice.prototype.animateInsert=function(a){var b=new DvtCustomAnimation(this._pieChart.getCtx(),this,this.getPieChart().getAnimationDuration());b.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,this.GetAnimationParams());a.add(b,0);this.SetAnimationParams([0,0,0,0])};
DvtPieSlice.prototype.animateDelete=function(a,b){var c=b.__getSlices(),d=this.getPieChart().__getSlices(),e=DvtArrayUtils.getIndex(d,this)-1;if(0<=e){d=d[e].getId();for(e=0;e<c.length;e++)if(c[e].getId().equals(d)){c.splice(e+1,0,this);break}}else c.splice(0,0,this);this._pieChart=b;c=new DvtCustomAnimation(b.getCtx(),this,this.getPieChart().getAnimationDuration());c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this.GetAnimationParams,this.SetAnimationParams,[0,0,0,0]);c.setOnEnd(this._removeDeletedSlice,
this);a.add(c,0)};DvtPieSlice.prototype._removeDeletedSlice=function(){var a=this.getPieChart().__getSlices(),b=DvtArrayUtils.getIndex(a,this);0<=b&&a.splice(b,1)};
DvtPieSlice.prototype.getDisplayables=function(){var a=[];this._topSurface&&(a=a.concat(this._topSurface));this._leftSurface&&(a=a.concat(this._leftSurface));this._rightSurface&&(a=a.concat(this._rightSurface));this._crustSurface&&(a=a.concat(this._crustSurface));this._sliceLabel&&a.push(this._sliceLabel);this._feelerRad&&a.push(this._feelerRad);this._feelerHoriz&&a.push(this._feelerHoriz);return a};
DvtPieSlice.prototype.getPhysicalShape=function(a){a.setDataColor(this.getFillColor(),DvtChartStyleUtils.getSelectedInnerColor(this._chart),DvtChartStyleUtils.getSelectedOuterColor(this._chart));a.setCursor(DvtSelectionEffectUtils.getSelectingCursor());return a};DvtPieSlice.prototype.isSelectable=function(){return!0};DvtPieSlice.prototype.isSelected=function(){return this._selected};
DvtPieSlice.prototype.setSelected=function(a){(this._selected=a)?this._pieChart.bringToFrontOfSelection(this):this._selecting||this._pieChart.pushToBackOfSelection(this);var b=this.getDisplayables();for(i=0;i<b.length;i++)DvtPieSlice._shapeIsSelectable(b[i])&&this.getPhysicalShape(b[i]).setSelected(a)};
DvtPieSlice.prototype.showHoverEffect=function(){this._selecting=!0;this._pieChart.bringToFrontOfSelection(this);var a=this.getDisplayables();for(i=0;i<a.length;i++)DvtPieSlice._shapeIsSelectable(a[i])&&this.getPhysicalShape(a[i]).showHoverEffect()};DvtPieSlice.prototype.hideHoverEffect=function(){this._selecting=!1;this._selected||this._pieChart.pushToBackOfSelection(this);var a=this.getDisplayables();for(i=0;i<a.length;i++)DvtPieSlice._shapeIsSelectable(a[i])&&this.getPhysicalShape(a[i]).hideHoverEffect()};
DvtPieSlice.prototype.getDatatip=function(a){return a==this._sliceLabel&&this._sliceLabel&&this._sliceLabel.isTruncated()?this.getSliceLabelString():this.getTooltip()};DvtPieSlice.prototype.getDatatipColor=function(){return this.getFillColor()};DvtPieSlice.prototype.getCategories=function(){return[this.getId().getSeries()]};
DvtPieSlice.prototype.getNextNavigable=function(a){if(a.type==DvtMouseEvent.CLICK||a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey)return this;var b=this._pieChart.__getSlices(),c=b.indexOf(this),d=null;a.keyCode==DvtKeyboardEvent.RIGHT_ARROW?d=c<b.length-1?b[c+1]:b[0]:a.keyCode==DvtKeyboardEvent.LEFT_ARROW&&(d=0==c?b[b.length-1]:b[c-1]);return d};DvtPieSlice.prototype.getKeyboardBoundingBox=function(){var a=this.getDisplayables();return a[0]?a[0].getDimensions():new DvtRectangle(0,0,0,0)};
DvtPieSlice.prototype.showKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!0;this.showHoverEffect()};DvtPieSlice.prototype.hideKeyboardFocusEffect=function(){this._isShowingKeyboardFocusEffect=!1;this.hideHoverEffect()};DvtPieSlice.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};DvtPieSlice.prototype.getExplode=function(){return this._explode};DvtPieSlice.prototype.getCustomLabel=function(){return this._customLabel};
DvtPieSlice.prototype.getSeriesLabel=function(){return this._seriesLabel};DvtPieSlice.prototype.getFillColor=function(){return this._fillColor};DvtPieSlice.prototype.getFillPattern=function(){return this._fillPattern};DvtPieSlice.prototype.getStrokeColor=function(){return this._strokeColor};DvtPieSlice.prototype.getTooltip=function(){return this._tooltip};DvtPieSlice.prototype.getAction=function(){return this._action};DvtPieSlice.prototype.getShowPopupBehaviors=function(){return this._showPopupBehaviors};
DvtPieSlice.createFillerSlice=function(a,b){var c=new DvtPieSlice(a);c._value=b;c._bFillerSlice=!0;c._fillColor="rgba(255,255,255,0)";c._strokeColor="rgba(255,255,255,0)";c._tooltip=null;c._id=null;return c};var DvtAnimOnDisplay=function(){};DvtObj.createSubclass(DvtAnimOnDisplay,DvtObj,"DvtAnimOnDisplay");
DvtAnimOnDisplay.createAnimation=function(a,b,c){b=[];if(DvtChartTypeUtils.isBLAC(a))DvtAnimOnDisplay._animBarLineArea(a,c,b);else if(DvtChartTypeUtils.isScatterBubble(a)||DvtChartTypeUtils.isFunnel(a))DvtAnimOnDisplay._animBubbleScatterFunnel(a,c,b);else if(DvtChartTypeUtils.isPie(a)&&a.pieChart)return a.pieChart.doDisplayAnimation(),null;return 0<b.length?new DvtParallelPlayable(a.getCtx(),b):null};
DvtAnimOnDisplay._animBarLineArea=function(a,b,c){var d=a.getObjects(),e=d?d.length:0,g=DvtChartTypeUtils.isPolar(a);if(e)for(var h,k,m,n=0;n<e;n++)k=d[n],h=k.getDisplayables()[0],seriesType=k.getSeriesType(),m=null,h instanceof DvtChartBar||h instanceof DvtChartPolarBar?m=h.getDisplayAnimation(b):h instanceof DvtPolygonalShape?g?m=DvtAnimOnDisplay._getPolarLineAreaPlayable(a,h,b):"line"==seriesType?m=DvtAnimOnDisplay._getLinePlayable(a,h,b):"area"==seriesType&&(m=DvtAnimOnDisplay._getAreaPlayable(a,
h,b)):"on"==k.getSeriesItem().markerDisplayed&&(m=new DvtAnimFadeIn(a.getCtx(),h,b-0.8,0.8)),m&&c.push(m)};DvtAnimOnDisplay._animBubbleScatterFunnel=function(a,b,c){var d=a.getObjects(),e=d?d.length:0,g=a.getType();if(e)for(var h,k,m=0;m<e;m++)h=d[m],h=h.getDisplayables()[0],h instanceof DvtMarker?k="bubble"===g?DvtAnimOnDisplay._getBubblePlayable(a,h,b):DvtAnimOnDisplay._getScatterPlayable(a,h,b):h instanceof DvtFunnelSlice&&(k=DvtAnimOnDisplay._getFunnelPlayable(a,h,b)),k&&c.push(k)};
DvtAnimOnDisplay._getAreaPlayable=function(a,b,c){var d=b.getPoints(),e=d.slice(0),g=d.length,h=DvtChartTypeUtils.isHorizontal(a);if(4>=g)return null;for(var k=h?d[g-2]:d[g-1],g=g-4,h=h?0:1;h<g;h+=2)d[h]=k;b.setPoints(d);a=new DvtCustomAnimation(a.getCtx(),b,c);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getPoints,b.setPoints,e);return a};
DvtAnimOnDisplay._getFunnelPlayable=function(a,b,c){var d=b.getAnimationParams(),e=d.slice(0);d[0]=0;d[2]=0;b.setAnimationParams(d);a=new DvtCustomAnimation(a.getCtx(),b,c);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getAnimationParams,b.setAnimationParams,e);return a};
DvtAnimOnDisplay._getBubblePlayable=function(a,b,c){var a=a.getCtx(),d=new DvtPoint(b.getScaleX(),b.getScaleY());b.setScale(1,1);var d=new DvtAnimScaleBy(a,b,d,c),e=new DvtAnimFadeIn(a,b,c),g=b.getSize(),h=b.getMatrix().clone();h.translate(g/2,g/2);b.setMatrix(h);b=new DvtAnimMoveBy(a,b,new DvtPoint(-g/2,-g/2),c);return new DvtParallelPlayable(a,[d,e,b])};
DvtAnimOnDisplay._getLinePlayable=function(a,b,c){var d=b.getPoints(),e=d.slice(0);DvtAnimOnDisplay._getMeanPoints(d,DvtChartTypeUtils.isHorizontal(a));b.setPoints(d);a=new DvtCustomAnimation(a.getCtx(),b,c);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getPoints,b.setPoints,e);return a};
DvtAnimOnDisplay._getPolarLineAreaPlayable=function(a,b,c){var d=b.getPoints(),e=d.slice(0),g=a.__getPlotAreaSpace();for(j=0;j<d.length;j+=2)d[j]=g.w/2,d[j+1]=g.h/2;b.setPoints(d);a=new DvtCustomAnimation(a.getCtx(),b,c);a.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getPoints,b.setPoints,e);return a};DvtAnimOnDisplay._getScatterPlayable=function(a,b,c){return new DvtAnimPopIn(a.getCtx(),b,!0,c)};
DvtAnimOnDisplay._getMeanPoints=function(a,b){var c=0,d=Number.MAX_VALUE,e=Number.MIN_VALUE,g=a.length,h;for(h=b?0:1;h<g;h+=2){var k=a[h];k<d&&(d=k);k>e&&(e=k);c+=k}c=4<g?(c-d-e)/((g-4)/2):c/(g/2);for(h=b?0:1;h<g;h+=2)a[h]=c};var DvtAnimOnDC=function(){};DvtObj.createSubclass(DvtAnimOnDC,DvtObj,"DvtAnimOnDC");
DvtAnimOnDC.createAnimation=function(a,b,c,d,e){if(!DvtAnimOnDC._canAnimate(a,b))return null;var g=b.getCtx(),c=[],h=[];"pie"==b.getType()?(c.push(a.pieChart),h.push(b.pieChart)):DvtAnimOnDC._buildAnimLists(g,c,a,h,b,d);var k,a=new DvtDataAnimationHandler(g,e);a.constructAnimation(c,h);0<a.getNumPlayables()&&(k=a.getAnimation());return k};
DvtAnimOnDC._buildAnimLists=function(a,b,c,d,e,g){for(var h,a=c.peers,k=b,m,n,o,s=c.type,b=0;2>b;b++){for(h=0;h<a.length;h++)m=a[h],n=m.getDisplayables()[0],o=null,n instanceof DvtFunnelSlice?o=new DvtDCFunnelSlice(m,g):n instanceof DvtChartBar||n instanceof DvtChartPolarBar?o=new DvtDCChart2DBar(m,g):n instanceof DvtPolygonalShape?o=new DvtDCChartLineArea(m,g):n instanceof DvtMarker&&("scatter"===s||"bubble"===s||(1==b?"on"==m.getSeriesItem().markerDisplayed:"on"==DvtChartDataUtils.getSeriesItem(c,
m.getSeriesIndex()).markerDisplayed))&&(o=new DvtDCChartMarker(m,g)),o&&(k.push(o),o.setOldChart(c));k=d;a=e.getObjects()}};DvtAnimOnDC._canAnimate=function(a,b){var c=a.type,d=b.getType();return c!==d?!1:"pie"==a.type&&(!a||!b)?!1:!0};var DvtDCChartAbstract=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCChartAbstract,DvtObj,"DvtDCChartAbstract");DvtDCChartAbstract.prototype.animateUpdate=function(){};DvtDCChartAbstract.prototype.animateInsert=function(){};
DvtDCChartAbstract.prototype.animateDelete=function(){};DvtDCChartAbstract.prototype.getId=function(){return this._animId};DvtDCChartAbstract.prototype.Init=function(a,b){this._peer=a;this._duration=b;this._shape=a.getDisplayables()[0];this._animId=a.getSeries()+"/"+a.getGroup()};DvtDCChartAbstract.prototype.setOldChart=function(a){this._oldChart=a};var DvtDCChart2DBar=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCChart2DBar,DvtDCChartAbstract,"DvtDCChart2DBar");
DvtDCChart2DBar.prototype.Init=function(a,b){DvtDCChart2DBar.superclass.Init.call(this,a,b);this._indicator=null;this._bHoriz=DvtChartTypeUtils.isHorizontal(a.getChart())};DvtDCChart2DBar.prototype.animateInsert=function(a){var b=this._shape.getInsertAnimation(this._duration);a.add(b,0)};DvtDCChart2DBar.prototype.animateDelete=function(a,b){b.addChild(this._shape);var c=this._shape.getDeleteAnimation(this._duration);a.add(c,0)};
DvtDCChart2DBar.prototype.animateUpdate=function(a,b){var c=b._getAnimationParams(),d=this._getAnimationParams();if(!DvtArrayUtils.equals(c,d)){var e=this._oldChart,g=this._peer.getChart(),h=this._peer.getSeriesIndex(),k=b._peer.getSeriesIndex(),m=this._peer.getGroupIndex(),n=b._peer.getGroupIndex();"none"!==DvtChartStyleUtils.getAnimationIndicators(g)&&this._makeDirPointer(c,e,k,n,g,h,m);this._setAnimationParams(c);c=new DvtCustomAnimation(this._shape.getCtx(),this,this._duration);c.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,
this,this._getAnimationParams,this._setAnimationParams,d);this._indicator&&c.setOnEnd(this._onEndAnimation,this);a.add(c,0)}};DvtDCChart2DBar.prototype._getAnimationParams=function(){return this._shape.getAnimationParams()};DvtDCChart2DBar.prototype._setAnimationParams=function(a){this._shape.setAnimationParams(a,this._indicator)};
DvtDCChart2DBar.prototype._makeDirPointer=function(a,b,c,d,e,g,h){DvtChartTypeUtils.isPolar(b)||(a=DvtDCChartUtils.getDirection(b,c,d,e,g,h),a!==DvtDCChartUtils.DIR_NOCHANGE&&(fc=(a=a===DvtDCChartUtils.DIR_DOWN)?DvtChartStyleUtils.getAnimationDownColor(e):DvtChartStyleUtils.getAnimationUpColor(e),a=DvtDCChartUtils.drawDirectionPointer(this._shape.getCtx(),a,this._bHoriz,fc),e.getPlotArea().addChild(a),this._indicator=a))};
DvtDCChart2DBar.prototype._onEndAnimation=function(){this._indicator.getParent().removeChild(this._indicator);this._indicator=null};var DvtDCChartLineArea=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCChartLineArea,DvtDCChartAbstract,"DvtDCChartLineArea");
DvtDCChartLineArea.prototype.animateUpdate=function(a,b){var c=b._getAnimationParams(),d=this._getAnimationParams();this._finalState=null;if(!DvtArrayUtils.equals(c,d)){var e=this._oldChart,g=this._peer.getChart(),h=DvtChartDataUtils.getGroups(e),k=DvtChartDataUtils.getGroups(g),m=h.length,n=k.length,o=DvtDCChartUtils.compareGroups(h,k,!0),s=o[0],t=o[1],o=o[2],u=0<t.length||0<o.length,v=[],w=0,z=null,A=null;u&&(z=[],A=[]);this._arDirection=this._arPointers=null;"none"!==DvtChartStyleUtils.getAnimationIndicators(g)&&
0<s.length&&(this._arPointers=[],this._arDirection=[]);for(var s=b._getAnimationParams(),C=this._getAnimationParams(),D=s.length,B=C.length,E=this._peer.getSeriesIndex(),G=b._peer.getSeriesIndex(),F=0,K=0,J=0,I=0;F<m||K<n;)if(F<m&&K<n&&J<D&&I<B)if(h[F]===k[K]){v[w]=DvtDCChartUtils.UPDATE;var H=s[J++],M=s[J++];null!=this._arPointers&&this._makeDirPointer(H,M,e,G,F,g,E,K,w);F++;K++;w++;u&&(z.push(H),z.push(M),A.push(C[I++]),A.push(C[I++]))}else-1<DvtArrayUtils.getIndex(o,h[F])?(v[w]=DvtDCChartUtils.DELETE,
z.push(s[J++]),z.push(s[J++]),A.push(0),A.push(0),F++,null!=this._arPointers&&(this._arPointers[w]=null,this._arDirection[w]=null),w++):-1<DvtArrayUtils.getIndex(t,k[K])?(v[w]=DvtDCChartUtils.INSERT,z.push(0),z.push(0),A.push(C[I++]),A.push(C[I++]),K++,null!=this._arPointers&&(this._arPointers[w]=null,this._arDirection[w]=null),w++):(F++,K++);else{if(F<m&&J<D)for(;F<m&&J<D;)v[w]=DvtDCChartUtils.DELETE=1,z.push(s[J++]),z.push(s[J++]),A.push(0),A.push(0),F++,null!=this._arPointers&&(this._arPointers[w]=
null,this._arDirection[w]=null),w++;else for(;K<n&&I<B;)v[w]=DvtDCChartUtils.INSERT,z.push(0),z.push(0),A.push(C[I++]),A.push(C[I++]),K++,null!=this._arPointers&&(this._arPointers[w]=null,this._arDirection[w]=null),w++;break}if(u){w=n=t=n=m=k=0;c=v.length;for(e=0;e<c;e++)if(v[e]!=DvtDCChartUtils.UPDATE){t=v[e];h=1;for(u=e+1;u<c&&!(v[u]!=t);u++)h++;k=u===c;if(0===e)if(t===DvtDCChartUtils.INSERT){t=2*(e+h);k=z[t];m=z[t+1];for(u=0;u<h;u++)0<u&&e++,t=2*e,z[t++]=k,z[t]=m}else{t=2*(e+h);k=A[t];m=A[t+1];
for(u=0;u<h;u++)0<u&&e++,t=2*e,A[t++]=k,A[t]=m}else if(e===c-1||k)if(t===DvtDCChartUtils.INSERT)t=2*(e-1),k=z[t],m=z[t+1],t=2*e,z[t++]=k,z[t]=m;else{t=2*(e-1);k=A[t];m=A[t+1];for(u=0;u<h;u++)0<u&&e++,t=2*e,A[t++]=k,A[t]=m}else if(t===DvtDCChartUtils.INSERT){u=2*(e-1);k=z[u++];m=z[u];u=2*(e+h);n=z[u++];t=z[u];n=(n-k)/(h+1);w=(t-m)/(h+1);for(u=0;u<h;u++)0<u&&e++,t=2*e,k+=n,m+=w,z[t++]=k,z[t]=m}else{u=2*(e-1);k=A[u++];m=A[u];u=2*(e+h);n=A[u++];t=A[u];n=(n-k)/(h+1);w=(t-m)/(h+1);for(u=0;u<h;u++)0<u&&
e++,t=2*e,k+=n,m+=w,A[t++]=k,A[t]=m}}g.getType();"area"===this._peer.getSeriesType()&&(J=s.length-4,I=C.length-4,z.push(s[J]),z.push(s[++J]),z.push(s[++J]),z.push(s[++J]),A.push(C[I]),A.push(C[++I]),A.push(C[++I]),A.push(C[++I]));c=z;0<o.length&&(this._finalState=d);d=A}this._setAnimationParams(c);g=new DvtCustomAnimation(this._shape.getCtx(),this,this._duration);g.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,this,this._getAnimationParams,this._setAnimationParams,d);g.setOnEnd(this._onEndAnimation,
this);a.add(g,0)}};DvtDCChartLineArea.prototype._onEndAnimation=function(){this._finalState&&this._shape.setPoints(this._finalState);if(null!==this._arPointers){for(var a=this._arPointers,b=a.length,c=this._peer.getChart().getPlotArea(),d,e=0;e<b;e++)(d=a[e])&&c.removeChild(d);this._arDirections=this._arPointers=null}};DvtDCChartLineArea.prototype.animateInsert=function(a){var b=new DvtAnimFadeIn(this._shape.getCtx(),this._shape,this._duration);a.add(b,0)};
DvtDCChartLineArea.prototype.animateDelete=function(a,b){var c=this._shape.getCtx();if(this._shape instanceof DvtPolygon&&"area"==this._peer.getSeriesType()){var d=this._peer.getChart().__getAreaContainer();this._deletedAreas=this._shape.getParent().getParent();d.addChild(this._deletedAreas);c=new DvtAnimFadeOut(c,this._deletedAreas,this._duration);c.setOnEnd(this._removeDeletedAreas,this)}else b.addChild(this._shape),c=new DvtAnimFadeOut(c,this._shape,this._duration);a.add(c,0)};
DvtDCChartLineArea.prototype._removeDeletedAreas=function(){this._peer.getChart().__getAreaContainer().removeChild(this._deletedAreas)};DvtDCChartLineArea.prototype._getAnimationParams=function(){return this._shape.getPoints()};DvtDCChartLineArea.prototype.Init=function(a,b){DvtDCChartLineArea.superclass.Init.call(this,a,b);this._animId=a.getSeries()};
DvtDCChartLineArea.prototype._makeDirPointer=function(a,b,c,d,e,g,h,k,m){b=this._peer.getChart();DvtChartTypeUtils.isPolar(b)||(a=null,b=DvtChartTypeUtils.isHorizontal(b),d=DvtDCChartUtils.getDirection(c,d,e,g,h,k),c=d==DvtDCChartUtils.DIR_DOWN,d!==DvtDCChartUtils.DIR_NOCHANGE&&(d=c?DvtChartStyleUtils.getAnimationDownColor(g):DvtChartStyleUtils.getAnimationUpColor(g),a=DvtDCChartUtils.drawDirectionPointer(this._shape.getCtx(),c,b,d),g.getPlotArea().addChild(a)),this._arPointers[m]=a,this._arDirection[m]=
c)};DvtDCChartLineArea.prototype._setAnimationParams=function(a){this._shape.setPoints(a);if(null!==this._arPointers){var b,c;b=this._peer.getChart();for(var d=DvtChartTypeUtils.isHorizontal(b),e=DvtAgent.isRightToLeft(b.getCtx()),g=b.getPlotArea(),h=this._arPointers.length,k=0;k<h;k++)if(b=this._arPointers[k])g.removeChild(b),c=this._arDirection[k]?12:-12,b.setTranslateX(a[2*k]+(d?c:0)*(e?1:-1)),b.setTranslateY(a[2*k+1]+(d?0:c)),g.addChild(b)}};var DvtDCChartMarker=function(a,b){this.Init(a,b)};
DvtObj.createSubclass(DvtDCChartMarker,DvtDCChartAbstract,"DvtDCChartMarker");
DvtDCChartMarker.prototype.animateUpdate=function(a,b){var c=b._shape,d=this._shape,e=d.getMatrix(),g=new DvtMatrix;g.translate(-d.getX(),-d.getY());g.scale(c.getWidth()/d.getWidth(),c.getHeight()/d.getHeight());g.translate(c.getX(),c.getY());if(!e.equals(g)){var h=new DvtCustomAnimation(this._shape.getCtx(),this,this._duration);this._shape.setMatrix(g);h.getAnimator().addProp(DvtAnimator.TYPE_MATRIX,this._shape,this._shape.getMatrix,this._shape.setMatrix,e);if(this.isValueChange(b)&&"none"!==DvtChartStyleUtils.getAnimationIndicators(this._peer.getChart())){var e=
b._shape,k;"scatter"===b._peer.getChart().getType()?(g="#FFFF2B",k=0.7):(g="#D5D500",k=0.4);k=new DvtSolidFill(g,k);g=this._shape.getAlpha();this._shape.setAlpha(0);e.setFill(k);this._peer.getChart().getPlotArea().addChild(e);k=new DvtMatrix;k.translate(-c.getX(),-c.getY());k.scale(d.getWidth()/c.getWidth(),d.getHeight()/c.getHeight());k.translate(d.getX(),d.getY());h.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,this._shape,this._shape.getAlpha,this._shape.setAlpha,g);h.getAnimator().addProp(DvtAnimator.TYPE_MATRIX,
e,e.getMatrix,e.setMatrix,k);h.getAnimator().addProp(DvtAnimator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,0);this._overlay=e;h.setOnEnd(this._onEndAnimation,this)}a.add(h,0)}};DvtDCChartMarker.prototype.animateInsert=function(a){var b=new DvtAnimFadeIn(this._shape.getCtx(),this._shape,this._duration);a.add(b,0)};DvtDCChartMarker.prototype.animateDelete=function(a,b){b.addChild(this._shape);var c=new DvtAnimFadeOut(this._shape.getCtx(),this._shape,this._duration);a.add(c,0)};
DvtDCChartMarker.prototype.isValueChange=function(a){var b=!1;if(a)var b=a._peer.getSeriesIndex(),c=a._peer.getGroupIndex(),d=this._peer.getSeriesIndex(),e=this._peer.getGroupIndex(),a=a._oldChart.getOptions(),g=this._peer.getChart().getOptions(),h=a.series[b].items[c].y,k=a.series[b].items[c].z,m=g.series[d].items[e].y,n=g.series[d].items[e].z,b=g.series[d].items[e].x!==a.series[b].items[c].x||m!==h||n!==k;return b};
DvtDCChartMarker.prototype._onEndAnimation=function(){this._overlay&&(this._peer.getChart().getPlotArea().removeChild(this._overlay),this._overlay=null)};var DvtDCChartUtils={};DvtObj.createSubclass(DvtDCChartUtils,DvtObj,"DvtDCChartUtils");DvtDCChartUtils.DIR_UP=0;DvtDCChartUtils.DIR_DOWN=1;DvtDCChartUtils.DIR_NOCHANGE=2;DvtDCChartUtils.UPDATE=0;DvtDCChartUtils.DELETE=1;DvtDCChartUtils.INSERT=2;
DvtDCChartUtils.getDirection=function(a,b,c,d,e,g){a=DvtChartDataUtils.getValue(a,b,c);d=DvtChartDataUtils.getValue(d,e,g);return d>a?DvtDCChartUtils.DIR_UP:d<a?DvtDCChartUtils.DIR_DOWN:DvtDCChartUtils.DIR_NOCHANGE};
DvtDCChartUtils.compareGroups=function(a,b,c){var d=[],e=[],g=[],h=a.length,b=b.slice(0);if(a)for(var k=0;k<h;k++){for(var m=a[k],n=!1,o=0;o<b.length;o++)if(m===b[o]){b.splice(o,1);c&&(e=e.concat(b.splice(0,o)));n=!0;d.push(m);break}n||g.push(m)}for(a=0;a<b.length;a++)b[a]&&e.push(b[a]);return[d,e,g]};
DvtDCChartUtils.drawDirectionPointer=function(a,b,c,d){b=c?(DvtAgent.isRightToLeft(a)?!b:b)?"M3.5,-5L3.5,5L-3.5,0L3.5,-5":"M-3.5,-5L-3.5,5L3.5,0L-3.5,-5":b?"M-5,-3.5L5,-3.5L0,3.5L-5,-3.5Z":"M-5,3.5L5,3.5L0,-3.5L-5,3.5Z";a=new DvtPath(a,b);a.setSolidFill(d);return a};var DvtDCFunnelSlice=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDCFunnelSlice,DvtDCChartAbstract,"DvtDCFunnelSlice");
DvtDCFunnelSlice.prototype.animateUpdate=function(a,b){var c=this._shape,d=b._shape.getAnimationParams(),e=c.getAnimationParams();DvtArrayUtils.equals(d,e)||(c.setAnimationParams(d),d=new DvtCustomAnimation(c.getCtx(),this,this._duration),d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,c,c.getAnimationParams,c.setAnimationParams,e),this._indicator&&d.setOnEnd(this._onEndAnimation,this),a.add(d,0))};
DvtDCFunnelSlice.prototype.animateInsert=function(a){var b=this._shape,c=b.getAnimationParams(),d=c.slice(0);d[0]+=d[1]/2;d[1]=0;d[3]=0;b.setAnimationParams(d);d=new DvtCustomAnimation(b.getCtx(),this,this._duration);d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,b,b.getAnimationParams,b.setAnimationParams,c);a.add(d,0)};
DvtDCFunnelSlice.prototype.animateDelete=function(a,b){var c=this._shape;b.addChild(c);var d=c.getAnimationParams(),e=d.slice(0);e[0]+=d[1]/2;e[1]=0;e[3]=0;d=new DvtCustomAnimation(c.getCtx(),this,this._duration);d.getAnimator().addProp(DvtAnimator.TYPE_NUMBER_ARRAY,c,c.getAnimationParams,c.setAnimationParams,e);a.add(d,0)};var DvtChart=function(){};DvtObj.createSubclass(DvtChart,DvtBaseComponent,"DvtChart");DvtChart.newInstance=function(a,b,c){return new DvtChartImpl(a,b,c)};
DvtChart.getDefaults=function(a){return(new DvtChartDefaults).getDefaults(a)};DvtChart.prototype.Init=function(a,b,c){DvtChart.superclass.Init.call(this,a,b,c);this.Bundle=new DvtChartBundle;this.Defaults=new DvtChartDefaults;this.EventManager=new DvtChartEventManager(this);this.EventManager.addListeners(this);DvtAgent.isTouchDevice()||this.EventManager.setKeyboardHandler(this.CreateKeyboardHandler(this.EventManager));this.setId("chart1000"+Math.floor(1E9*Math.random()));this._animation=null};
DvtChart.prototype.SetOptions=function(a){a?(this.Options=this.Defaults.calcOptions(a),"horizontalBar"==this.Options.type&&(this.Options.type="bar",this.Options.orientation="horizontal"),DvtChartDataUtils.processDataObject(this),"dim"==DvtChartEventUtils.getHoverBehavior(this)?this.EventManager.setSeriesRolloverHandler(new DvtChartSeriesRolloverHandler(this,this.EventManager)):this.EventManager.setSeriesRolloverHandler(null),DvtAgent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",
this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults())};
DvtChart.prototype.render=function(a,b,c){var d=DvtChartStyleUtils.getAnimationOnDataChange(this),e=null;this.Options&&"none"!==d&&(e={type:this.getType(),options:this.Options,peers:this.getObjects().slice(0),getOptions:function(){return this.options},pieChart:this.pieChart});this.__cleanUp();this.SetOptions(a);!isNaN(b)&&!isNaN(c)&&(this.Width=b,this.Height=c);DvtAgent.isTouchDevice()&&this.EventManager.setTouchRegionBounds(new DvtRectangle(0,0,parseInt(b),parseInt(c)));b=new DvtContainer(this.getCtx());
this.addChild(b);DvtChartRenderer.render(this,b,new DvtRectangle(0,0,this.Width,this.Height));this._animation&&(this._animationStopped=!0,this._animation.stop());var g=DvtChartStyleUtils.getAnimationOnDisplay(this),c=DvtChartStyleUtils.getAnimationDuration(this),h=new DvtRectangle(0,0,this.Width,this.Height),k=!1;this._container?"none"!=d&&a&&((this._animation=DvtBlackBoxAnimationHandler.getCombinedAnimation(this.getCtx(),d,this._container,b,h,c))?k=!0:(a=this.__getPlotAreaSpace(),this._delContainer=
DvtPlotAreaRenderer.createClippedGroup(this,this._container,new DvtRectangle(0,0,a.w,a.h)),this._animation=DvtAnimOnDC.createAnimation(e,this,d,c,this._delContainer),0<this._delContainer.getNumChildren()&&(DvtChartTypeUtils.isFunnel(this)?this.getFunnelContainer().addChild(this._delContainer):this.getPlotArea().addChild(this._delContainer)))):"none"!==g&&(this._animation=DvtBlackBoxAnimationHandler.getInAnimation(this.getCtx(),g,b,h,c),this._animation||(this._animation=DvtAnimOnDisplay.createAnimation(this,
g,c)));this._animation&&(this._animation.play(),this._animation.setOnEnd(this._onAnimationEnd,this));k?this._oldContainer=this._container:this._container&&this.removeChild(this._container);this._container=b;this.__isDataCursorEnabled()?(this.DataCursor=DvtChartTypeUtils.isHorizontal(this)?new DvtDataCursor(this.getCtx(),!0):new DvtDataCursor(this.getCtx(),!1),d=this.Options.dataCursorBehavior,"auto"==d&&(d=DvtChartTypeUtils.isLine(this)||DvtChartTypeUtils.isArea(this)?"smooth":"snap"),"snap"==d?this.DataCursor.setBehavior(DvtDataCursor.BEHAVIOR_SNAP):
"smooth"==d&&this.DataCursor.setBehavior(DvtDataCursor.BEHAVIOR_SMOOTH),this.addChild(this.DataCursor),this.EventManager.setDataCursorHandler(new DvtChartDCEH(this))):this.EventManager.setDataCursorHandler(null)};DvtChart.prototype.__cleanUp=function(){this.DataCursor&&(this.removeChild(this.DataCursor),this.DataCursor=null);this.EventManager.hideHoverFeedback()};
DvtChart.prototype.__isDataCursorEnabled=function(){return DvtChartTypeUtils.isPie(this)||DvtChartTypeUtils.isFunnel(this)||DvtChartTypeUtils.isPolar(this)?!1:"on"===this.Options.dataCursor||"auto"===this.Options.dataCursor&&DvtAgent.isTouchDevice()&&(DvtChartTypeUtils.isLine(this)||DvtChartTypeUtils.isArea(this))?!0:!1};
DvtChart.prototype._onAnimationEnd=function(){this._oldContainer&&(this.removeChild(this._oldContainer),this._oldContainer=null);this._delContainer&&0<this._delContainer.getNumChildren()&&(DvtChartTypeUtils.isFunnel(this)?this.getFunnelContainer().removeChild(this._delContainer):this.getPlotArea().removeChild(this._delContainer));this._delContainer=null;this._animationStopped=!1;this._animation=null};DvtChart.prototype.CreateKeyboardHandler=function(a){return new DvtChartKeyboardHandler(a,this)};
var DvtChartConstants={};DvtObj.createSubclass(DvtChartConstants,DvtObj,"DvtChartConstants");DvtChartConstants.BACKGROUND="background";DvtChartConstants.DATA_ITEM="dataItem";DvtChartConstants.DATA_ITEM_OTHER="dataItemOther";DvtChartConstants.FOOTNOTE="footnote";DvtChartConstants.LEGEND="legend";DvtChartConstants.LEGEND_ITEM="legendItem";DvtChartConstants.LEGEND_TITLE="legendTitle";DvtChartConstants.PLOT_AREA="plotArea";DvtChartConstants.SERIES="series";DvtChartConstants.SUBTITLE="subtitle";
DvtChartConstants.TITLE="title";DvtChartConstants.X_AXIS_LABEL="xAxisLabel";DvtChartConstants.X_AXIS_TITLE="xAxisTitle";DvtChartConstants.Y_AXIS_LABEL="yAxisLabel";DvtChartConstants.Y_AXIS_TITLE="yAxisTitle";DvtChartConstants.Y2_AXIS_LABEL="y2AxisLabel";DvtChartConstants.Y2_AXIS_TITLE="y2AxisTitle";
var DvtChartSelectionEvent=function(a,b,c,d,e,g,h,k,m){DvtChartSelectionEvent.superclass.Init.call(this,a);this._xMin=b;this._xMax=c;this._startGroup=d;this._endGroup=e;this._yMin=g;this._yMax=h;this._y2Min=k;this._y2Max=m;this.removedSet=this.addedSet=null};DvtObj.createSubclass(DvtChartSelectionEvent,DvtSelectionEvent,"DvtChartSelectionEvent");DvtChartSelectionEvent.prototype.getXMin=function(){return this._xMin};DvtChartSelectionEvent.prototype.getXMax=function(){return this._xMax};
DvtChartSelectionEvent.prototype.getStartGroup=function(){return this._startGroup};DvtChartSelectionEvent.prototype.getEndGroup=function(){return this._endGroup};DvtChartSelectionEvent.prototype.getYMin=function(){return this._yMin};DvtChartSelectionEvent.prototype.getYMax=function(){return this._yMax};DvtChartSelectionEvent.prototype.getY2Min=function(){return this._y2Min};DvtChartSelectionEvent.prototype.getY2Max=function(){return this._y2Max};
var DvtChartViewportChangeEvent=function(a,b,c,d,e,g){DvtChartViewportChangeEvent.superclass.Init.call(this,DvtChartViewportChangeEvent.TYPE);this._xMin=a;this._xMax=b;this._startGroup=c;this._endGroup=d;this._yMin=e;this._yMax=g};DvtObj.createSubclass(DvtChartViewportChangeEvent,DvtBaseComponentEvent,"DvtChartViewportChangeEvent");DvtChartViewportChangeEvent.TYPE="viewportChange";DvtChartViewportChangeEvent.prototype.getXMin=function(){return this._xMin};
DvtChartViewportChangeEvent.prototype.getXMax=function(){return this._xMax};DvtChartViewportChangeEvent.prototype.getStartGroup=function(){return this._startGroup};DvtChartViewportChangeEvent.prototype.getEndGroup=function(){return this._endGroup};DvtChartViewportChangeEvent.prototype.getYMin=function(){return this._yMin};DvtChartViewportChangeEvent.prototype.getYMax=function(){return this._yMax};var DvtChartImpl=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtChartImpl,DvtChart,"DvtChartImpl");
DvtChartImpl.prototype.Init=function(a,b,c){DvtChartImpl.superclass.Init.call(this,a,b,c);this.pieChart=this.dragButtons=this.yScrollbar=this.xScrollbar=this.overview=this.y2Axis=this.yAxis=this.xAxis=this.legend=null;this._peers=[];this._seriesStyleArray=[];this._numSelectedObjsInFront=this._numFrontObjs=0};
DvtChartImpl.prototype.SetOptions=function(a){DvtChartImpl.superclass.SetOptions.call(this,a);a=this.Options.selection;this._selectionHandler="single"==a?new DvtSelectionHandler(DvtSelectionHandler.TYPE_SINGLE):"multiple"==a?new DvtSelectionHandler(DvtSelectionHandler.TYPE_MULTIPLE):null;this.EventManager.setSelectionHandler(this._selectionHandler);if(a=this.Options._spb){this._popupBehaviors={};for(var b in a)for(var c=a[b],d=0;d<c.length;d++){this._popupBehaviors[b]||(this._popupBehaviors[b]=[]);
var e=c[d];this._popupBehaviors[b].push(new DvtShowPopupBehavior(e.popupId,e.triggerType,e.alignId,e.align))}}};DvtChart.prototype.filter=function(a,b){DvtChartEventUtils.setVisibility(this,a,"out"==b?"hidden":"visible");this.render(this.Options)};DvtChart.prototype.highlight=function(a){DvtCategoryRolloverHandler.highlight(a,this.getObjects());this.legend&&this.legend.highlight(a);this.pieChart&&this.pieChart.highlight(a)};DvtChartImpl.prototype.getEventManager=function(){return this.EventManager};
DvtChartImpl.prototype.processEvent=function(a,b){var c=a.getType();c==DvtCategoryHideShowEvent.TYPE_HIDE||c==DvtCategoryHideShowEvent.TYPE_SHOW?this.filter(a.getCategory(),c==DvtCategoryHideShowEvent.TYPE_HIDE?"out":"in"):c==DvtCategoryRolloverEvent.TYPE_OVER||c==DvtCategoryRolloverEvent.TYPE_OUT?"dim"==DvtChartEventUtils.getHoverBehavior(this)&&(DvtCategoryRolloverHandler.processEvent(a,this.getObjects()),this._distributeToChildren(a,b)):c==DvtSelectionEvent.TYPE?a=this._processSelectionEvent(a):
c==DvtPanZoomEvent.TYPE?a=this._processPanZoomEvent(a):c==DvtMarqueeEvent.TYPE?a=this._processMarqueeEvent(a):c==DvtOverviewEvent.TYPE?a=this._processOverviewEvent(a,b):c==DvtShowPopupEvent.TYPE?a=this._processShowPopupEvent(a):a instanceof DvtComponentUIEvent&&(a=this._processComponentUIEvent(a,b));if(a instanceof DvtChartSelectionEvent){var d=this.getOptions(),c=d.selectedItems,e=DvtChartDataUtils.getCurrentSelection(this);d.selectedItems=e;var c=c?c:[],e=e?e:[],g,h={};for(g=0;g<c.length;g++)h[c[g].id]=
!0;d={};for(g=0;g<e.length;g++)d[e[g].id]=!0;var k={};for(g=0;g<e.length;g++){var m=e[g].id;h[m]||(k[m]=!0)}e={};for(g=0;g<c.length;g++)h=c[g].id,d[h]||(e[h]=!0);a.addedSet=k;a.removedSet=e}a&&this.__dispatchEvent(a)};DvtChartImpl.prototype._processSelectionEvent=function(a){a=DvtChartEventUtils.processIds(this,a.getSelection());if(this.overview){var b=this.overview.getBackgroundChart();b.getSelectionHandler().processInitialSelections(a,b.getObjects())}return new DvtChartSelectionEvent(a)};
DvtChartImpl.prototype._processPanZoomEvent=function(a){var b=a.getSubtype(),c=b==DvtPanZoomEvent.SUBTYPE_PAN_END||b==DvtPanZoomEvent.SUBTYPE_ZOOM||b==DvtPanZoomEvent.SUBTYPE_PINCH_END,b=b==DvtPanZoomEvent.SUBTYPE_PAN_START||b==DvtPanZoomEvent.SUBTYPE_PINCH_START;DvtAgent.isTouchDevice()&&b&&this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=this._plotArea);DvtChartEventUtils.isLiveScroll(this)?(a=DvtChartEventUtils.getAxisBoundsByDelta(this,
a.dxMin,a.dxMax,a.dyMin,a.dyMax),b||(this.setViewport(a,c),this.setScrollbarViewport(a))):(a=DvtChartEventUtils.getAxisBoundsByDelta(this,a.dxMinTotal,a.dxMaxTotal,a.dyMinTotal,a.dyMaxTotal),this.setScrollbarViewport(a),c&&this.setViewport(a,c));return c?(DvtChartRenderer._setEventHandlers(this),this._panZoomTarget!=this._plotArea&&(this._container.removeChild(this._panZoomTarget),this._panZoomTarget=null),DvtChartTypeUtils.isBLAC(this)?new DvtChartViewportChangeEvent(a.xMin,a.xMax,a.startGroup,a.endGroup,
null,null):new DvtChartViewportChangeEvent(a.xMin,a.xMax,null,null,a.yMin,a.yMax)):null};
DvtChartImpl.prototype._processMarqueeEvent=function(a){var b=a.getSubtype(),c=this.EventManager;DvtChartEventUtils.adjustBounds(a);if(c.getDragMode()==DvtChartEventManager.DRAG_MODE_SELECT){c=c.getSelectionHandler();if(b==DvtMarqueeEvent.SUBTYPE_START)this._initSelection=a.ctrlKey?c.getSelectedIds():[];else{var d=DvtChartEventUtils.getBoundedObjects(this,a);c.processInitialSelections(this._initSelection,this.getObjects());c.processGroupSelection(d,!0)}if(b==DvtMarqueeEvent.SUBTYPE_END)return b=c.getSelectedIds(),
this.overview&&(c=this.overview.getBackgroundChart(),c.getSelectionHandler().processInitialSelections(b,c.getObjects())),a=DvtChartEventUtils.getAxisBounds(this,a,!1),new DvtChartSelectionEvent(b,a.xMin,a.xMax,a.startGroup,a.endGroup,a.yMin,a.yMax,a.y2Min,a.y2Max)}else if(c.getDragMode()==DvtChartEventManager.DRAG_MODE_ZOOM){if(b!=DvtMarqueeEvent.SUBTYPE_END)return null;a=DvtChartEventUtils.getAxisBounds(this,a,!0);this.setViewport(a,!0);this.setScrollbarViewport(a);DvtChartRenderer._setEventHandlers(this);
return DvtChartTypeUtils.isBLAC(this)?new DvtChartViewportChangeEvent(a.xMin,a.xMax,a.startGroup,a.endGroup,null,null):new DvtChartViewportChangeEvent(a.xMin,a.xMax,null,null,a.yMin,a.yMax)}return null};
DvtChartImpl.prototype._processOverviewEvent=function(a,b){var c=a.getSubType();if(c!=DvtOverviewEvent.SUBTYPE_PRE_RANGECHANGE){var d=a.getNewStartTime(),e=a.getNewEndTime(),c=c==DvtOverviewEvent.SUBTYPE_SCROLL_TIME||c==DvtOverviewEvent.SUBTYPE_SCROLL_END||c==DvtOverviewEvent.SUBTYPE_RANGECHANGE;if(DvtChartEventUtils.isLiveScroll(this)||c)b==this.yScrollbar?this.setViewport({yMin:d,yMax:e},c):this.setViewport({xMin:d,xMax:e},c);if(c){if(b==this.yScrollbar)return new DvtChartViewportChangeEvent(null,
null,null,null,d,e,null,null);c=DvtChartEventUtils.getAxisStartEndGroup(this.xAxis,d,e);return new DvtChartViewportChangeEvent(d,e,c.startGroup,c.endGroup,null,null,null,null)}return null}};
DvtChartImpl.prototype._processShowPopupEvent=function(a){if("mouseHover"!=a.triggerType&&this.isSelectionSupported()&&0<this.getSelectionHandler().getSelectedCount()){var b=DvtChartEventUtils.processIds(this,this.getSelectionHandler().getSelectedIds()),a=new DvtShowPopupEvent(a.getShowPopupBehavior(),a.getLauncherBounds(),a.getLauncherId());a.addParam(DvtBaseComponentEvent.CLIENT_ROW_KEY,b)}return a};
DvtChartImpl.prototype._processComponentUIEvent=function(a,b){var c=a.params,d=c.type;if(b===this.legend)return d==DvtLegendConstants.LEGEND_ITEM?d=DvtChartConstants.LEGEND_ITEM:d==DvtLegendConstants.TITLE?d=DvtChartConstants.LEGEND_TITLE:d==DvtLegendConstants.BACKGROUND&&(d=DvtChartConstants.LEGEND),new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,null,c.id));if(b===this.xAxis)return d==DvtAxisConstants.TICK_LABEL?d=DvtChartConstants.X_AXIS_LABEL:d==DvtAxisConstants.TITLE&&
(d=DvtChartConstants.X_AXIS_TITLE),new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,c.id));if(b===this.yAxis)return d==DvtAxisConstants.TICK_LABEL?d=DvtChartConstants.Y_AXIS_LABEL:d==DvtAxisConstants.TITLE&&(d=DvtChartConstants.Y_AXIS_TITLE),new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,c.id));return b===this.y2Axis?(d==DvtAxisConstants.TICK_LABEL?d=DvtChartConstants.Y2_AXIS_LABEL:d==DvtAxisConstants.TITLE&&(d=DvtChartConstants.Y2_AXIS_TITLE),
new DvtComponentUIEvent(a.getType(),DvtChartEventManager.getUIEventParams(d,c.id))):a};DvtChartImpl.prototype._distributeToChildren=function(a,b){this.legend&&this.legend!=b&&this.legend.processEvent(a,b);this.pieChart&&this.pieChart!=b&&this.pieChart.processEvent(a,b)};DvtChartImpl.prototype.__cleanUp=function(){DvtChartImpl.superclass.__cleanUp.call(this);this._peers.length=0;this.yScrollbar=this.xScrollbar=null;this.hideDragButtons();this.dragButtons=null};
DvtChartImpl.prototype.__cleanUpAxisAndPlotArea=function(){this.EventManager.hideHoverFeedback();this._peers.length=0;this._container.removeChild(this.xAxis);this._container.removeChild(this.yAxis);this._container.removeChild(this.y2Axis);this._plotArea==this._panZoomTarget?this._plotArea.setVisible(!1):this._container.removeChild(this._plotArea)};DvtChartImpl.prototype.registerObject=function(a){this._peers.push(a)};DvtChartImpl.prototype.getObjects=function(){return this._peers};
DvtChartImpl.prototype.getObject=function(a,b){for(i=0;i<this._peers.length;i++)if(this._peers[i].getSeriesIndex()==a&&this._peers[i].getGroupIndex()==b)return this._peers[i];return null};DvtChartImpl.prototype.getOptions=function(){this.Options||(this.Options=this.GetDefaults());return this.Options};DvtChartImpl.prototype.getWidth=function(){return this.Width};DvtChartImpl.prototype.getHeight=function(){return this.Height};DvtChartImpl.prototype.getBundle=function(){return this.Bundle};
DvtChartImpl.prototype.getSeriesStyleArray=function(){return this._seriesStyleArray};DvtChartImpl.prototype.getPlotArea=function(){return this._plotArea};DvtChartImpl.prototype.setPlotArea=function(a){this._plotArea=a};DvtChartImpl.prototype.getFunnelContainer=function(){return this._funnelContainer};DvtChartImpl.prototype.setFunnelContainer=function(a){this._funnelContainer=a};DvtChartImpl.prototype.getType=function(){return this.getOptions().type};
DvtChartImpl.prototype.getGapRatio=function(){var a=this.getOptions();if(null!==a.layout.gapRatio&&!isNaN(a.layout.gapRatio))return a.layout.gapRatio;var a=Math.min(this.Width/400,1),b=Math.min(this.Height/300,1);return Math.min(a,b)};DvtChartImpl.prototype.getSelectionHandler=function(){return this._selectionHandler};DvtChartImpl.prototype.isSelectionSupported=function(){return this._selectionHandler?!0:!1};
DvtChartImpl.prototype.getShowPopupBehaviors=function(a){return this._popupBehaviors?this._popupBehaviors[a]:null};DvtChartImpl.prototype.bringToFrontOfSelection=function(a){var b=a.getParent();if(b){var c=b.getNumChildren();1<c-this._numFrontObjs&&(b.removeChild(a),b.addChildAt(a,c-this._numFrontObjs-1))}(!a.isSelected()||!a.isHoverEffectShown())&&this._numSelectedObjsInFront++};
DvtChartImpl.prototype.pushToBackOfSelection=function(a){0<this._numSelectedObjsInFront&&this._numSelectedObjsInFront--;var b=a.getParent();if(b){var c=b.getNumChildren()-this._numFrontObjs-1-this._numSelectedObjsInFront;0<=c&&(b.removeChild(a),b.addChildAt(a,c))}};DvtChartImpl.prototype.setNumFrontObjs=function(a){this._numFrontObjs=a};
DvtChartImpl.prototype.getShapesForViewSwitcher=function(a){var b={};if(this._currentMarkers&&this._peers)for(a=0;a<this._currentMarkers.length;a++){var c=this._currentMarkers[a];if(c)for(var d=0;d<c.length;d++){var e=c[d];if(e)for(var g=0;g<this._peers.length;g++){var h=this._peers[g],k=h.getDisplayables();if(k&&0<k.length&&k[0]==e&&(h=h.getId()))if(h=h.getId()){b[h]=e;break}}}}else this.pieChart&&(b=this.pieChart.getShapesForViewSwitcher(a));return b};
DvtChartImpl.prototype.setViewport=function(a,b){DvtChartTypeUtils.isScrollSupported(this)&&(null!=a.xMax&&(this.Options.xAxis.viewportMax=a.xMax),null!=a.xMin&&(this.Options.xAxis.viewportMin=a.xMin),DvtChartTypeUtils.isBLAC(this)?(this.Options.xAxis.viewportStartGroup=null,this.Options.xAxis.viewportEndGroup=null):(null!=a.yMax&&(this.Options.yAxis.viewportMax=a.yMax),null!=a.yMin&&(this.Options.yAxis.viewportMin=a.yMin)),this.Options._duringAnimation=!b,DvtChartRenderer.rerenderAxisAndPlotArea(this,
this._container))};DvtChartImpl.prototype.setScrollbarViewport=function(a){this.overview&&this.overview.setViewportRange(a.xMin,a.xMax);this.xScrollbar&&this.xScrollbar.setViewportRange(a.xMin,a.xMax);this.yScrollbar&&this.yScrollbar.setViewportRange(a.yMin,a.yMax)};DvtChartImpl.prototype.__setAxisSpace=function(a){this._axisSpace=a;this._radius=Math.min(0.9*a.h,0.8*a.w)/2};DvtChartImpl.prototype.__getAxisSpace=function(){return this._axisSpace};
DvtChartImpl.prototype.__setPlotAreaSpace=function(a){this._plotAreaSpace=a};DvtChartImpl.prototype.__getPlotAreaSpace=function(){return this._plotAreaSpace};DvtChartImpl.prototype.__setAreaContainer=function(a){this._areaContainer=a};DvtChartImpl.prototype.__getAreaContainer=function(){return this._areaContainer};DvtChartImpl.prototype.getRadius=function(){return this._radius};DvtChartImpl.prototype.showDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!0)};
DvtChartImpl.prototype.hideDragButtons=function(){this.dragButtons&&this.dragButtons.setVisible(!1)};var DvtChartAxis=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtChartAxis,DvtAxis,"DvtChartAxis");DvtChartAxis.prototype.getOptions=function(){return this.Info.Options};DvtChartAxis.prototype.axisToPlotArea=function(a,b){if("tangential"==this.getOptions().position)return a;if(null==a)return null;var c=a-this.getLeftOverflow();return!1===b?c:Math.round(c)};
DvtChartAxis.prototype.plotAreaToAxis=function(a,b){if("tangential"==this.getOptions().position)return a;if(null==a)return null;var c=a+this.getLeftOverflow();return!1===b?c:Math.round(c)};DvtChartAxis.prototype.getValueAt=function(a){return this.Info?this.Info.getValueAt(this.plotAreaToAxis(a)):null};DvtChartAxis.prototype.getCoordAt=function(a,b){return this.Info?this.axisToPlotArea(this.Info.getCoordAt(a),b):null};
DvtChartAxis.prototype.getBoundedValueAt=function(a){return this.Info?this.Info.getBoundedValueAt(this.plotAreaToAxis(a)):null};DvtChartAxis.prototype.getBoundedCoordAt=function(a,b){return this.Info?this.axisToPlotArea(this.Info.getBoundedCoordAt(a),b):null};DvtChartAxis.prototype.getUnboundedValueAt=function(a){return this.Info?this.Info.getUnboundedValueAt(this.plotAreaToAxis(a)):null};
DvtChartAxis.prototype.getUnboundedCoordAt=function(a,b){return this.Info?this.axisToPlotArea(this.Info.getUnboundedCoordAt(a),b):null};DvtChartAxis.prototype.getGroupLabelAt=function(a){return this.isGroupAxis()?this.Info?this.Info.getLabelAt(a):null:null};DvtChartAxis.prototype.getBaselineCoord=function(){return this.Info?this.axisToPlotArea(this.Info.getBaselineCoord()):null};DvtChartAxis.prototype.getPosition=function(){return this.__getOptions().position};
DvtChartAxis.prototype.isGroupAxis=function(){return this.Info instanceof DvtGroupAxisInfo};DvtChartAxis.prototype.isTimeAxis=function(){return this.Info instanceof DvtTimeAxisInfo};DvtChartAxis.prototype.isDataAxis=function(){return this.Info instanceof DvtDataAxisInfo};DvtChartAxis.prototype.getGroupWidth=function(){return this.isGroupAxis()?Math.abs(this.getUnboundedCoordAt(1)-this.getUnboundedCoordAt(0)):this.isTimeAxis()?this.Info.getGroupWidth():0};
DvtChartAxis.prototype.getAxisLine=function(a){return this.Info?this.Info.getAxisLine(a):null};DvtChartAxis.prototype.getMajorGridLines=function(a){return this.Info?this.Info.getMajorGridLines(a):[]};DvtChartAxis.prototype.getMinorGridLines=function(a){return this.Info?this.Info.getMinorGridLines(a):[]};DvtChartAxis.prototype.getMajorTickCount=function(){return this.Info?this.Info.getMajorTickCount():null};DvtChartAxis.prototype.setMajorTickCount=function(a){this.Info&&this.Info.setMajorTickCount(a)};
DvtChartAxis.prototype.getMinorTickCount=function(){return this.Info?this.Info.getMinorTickCount():null};DvtChartAxis.prototype.setMinorTickCount=function(a){this.Info&&this.Info.setMinorTickCount(a)};DvtChartAxis.prototype.getMajorIncrement=function(){return this.Info?this.Info.getMajorIncrement():null};DvtChartAxis.prototype.getMinorIncrement=function(){return this.Info?this.Info.getMinorIncrement():null};DvtChartAxis.prototype.getGlobalMin=function(){return this.Info?this.Info.getGlobalMin():null};
DvtChartAxis.prototype.getGlobalMax=function(){return this.Info?this.Info.getGlobalMax():null};DvtChartAxis.prototype.getViewportMin=function(){return this.Info?this.Info.getViewportMin():null};DvtChartAxis.prototype.getViewportMax=function(){return this.Info?this.Info.getViewportMax():null};DvtChartAxis.prototype.getDataMin=function(){return this.Info?this.Info.getDataMin():null};DvtChartAxis.prototype.getDataMax=function(){return this.Info?this.Info.getDataMax():null};
DvtChartAxis.prototype.getMinimumExtent=function(){return this.Info?this.Info.getMinimumExtent():null};DvtChartAxis.prototype.isFullViewport=function(){return this.getViewportMin()==this.getGlobalMin()&&this.getViewportMax()==this.getGlobalMax()};DvtChartAxis.prototype.getLeftOverflow=function(){return DvtAgent.isRightToLeft(this.getCtx())?this.Info?this.Info.getEndOverflow():null:this.Info?this.Info.getStartOverflow():null};
DvtChartAxis.prototype.getRightOverflow=function(){return DvtAgent.isRightToLeft(this.getCtx())?this.Info?this.Info.getStartOverflow():null:this.Info?this.Info.getEndOverflow():null};var DvtChartBundle=function(){};DvtObj.createSubclass(DvtChartBundle,DvtBundle,"DvtChartBundle");
DvtChartBundle._defaults={EMPTY_TEXT:"No data to display",DEFAULT_GROUP_NAME:"Group {0}",LABEL_SERIES:"Series: {0}",LABEL_GROUP:"Group: {0}",LABEL_VALUE:"Value: {0}",LABEL_TARGET_VALUE:"Target: {0}",LABEL_X:"X: {0}",LABEL_Y:"Y: {0}",LABEL_Z:"Z: {0}",LABEL_LOW:"Low: {0}",LABEL_HIGH:"High: {0}",LABEL_OTHER:"Other",PAN:"Pan",MARQUEE_SELECT:"Marquee select",MARQUEE_ZOOM:"Marquee zoom"};DvtChartBundle.prototype.GetDefaultStringForKey=function(a){return DvtChartBundle._defaults[a]};
DvtChartBundle.prototype.GetBundlePrefix=function(){return"DvtChartBundle"};var DvtChartEventManager=function(a){DvtChartEventManager.superclass.Init.call(this,a.getCtx(),a.processEvent,a);this._chart=a;this._dragMode=null;this._dragButtonsVisible=DvtAgent.isTouchDevice();this._stageAbsolutePosition=this._marqueeSelectHandler=this._marqueeZoomHandler=this._panZoomHandler=this._dataCursorHandler=this._seriesRolloverHandler=this.selectButton=this.zoomButton=null};
DvtObj.createSubclass(DvtChartEventManager,DvtEventManager,"DvtChartEventManager");DvtChartEventManager.DRAG_MODE_PAN="pan";DvtChartEventManager.DRAG_MODE_ZOOM="zoom";DvtChartEventManager.DRAG_MODE_SELECT="select";DvtChartEventManager.DRAG_MODE_TOOLTIP="tooltip";DvtChartEventManager.getUIEventParams=function(a,b,c,d){return{type:a,id:b,series:c,group:d}};
DvtChartEventManager.prototype.addListeners=function(a){DvtSvgDocumentUtils.addDragListeners(this._chart,this._onDragStart,this._onDragMove,this._onDragEnd,this);DvtChartEventManager.superclass.addListeners.call(this,a);DvtAgent.isTouchDevice()||(DvtAgent.isPlatformGecko()?a.addEvtListener("wheel",this.OnMouseWheel,!1,this):a.addEvtListener(DvtMouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this))};
DvtChartEventManager.prototype.removeListeners=function(a){DvtChartEventManager.superclass.removeListeners.call(this,a);DvtAgent.isTouchDevice()||(DvtAgent.isPlatformGecko()?a.removeEvtListener("DOMMouseScroll",this.OnMouseWheel,!1,this):a.removeEvtListener(DvtMouseEvent.MOUSEWHEEL,this.OnMouseWheel,!1,this))};
DvtChartEventManager.prototype.FireUIEvent=function(a,b){if(b instanceof DvtSimpleObjPeer&&null!=b.getParams())b.getParams();else if(b instanceof DvtPieSlice){var c=b.getId();c.getSeries()==DvtPieChartUtils.OTHER_SLICE_SERIES_ID?DvtChartEventManager.getUIEventParams(DvtChartConstants.DATA_ITEM_OTHER):DvtChartEventManager.getUIEventParams(DvtChartConstants.DATA_ITEM,c.getId(),c.getSeries(),c.getGroup())}else b instanceof DvtChartObjPeer&&(0<=b.getSeriesIndex()&&0<=b.getGroupIndex()?c=DvtChartConstants.DATA_ITEM:
0<=b.getSeriesIndex()&&(c=DvtChartConstants.SERIES),DvtChartEventManager.getUIEventParams(c,b.getDataItemId(),b.getSeries(),b.getGroup()))};DvtChartEventManager.prototype.getLogicalObject=function(a){return this.GetLogicalObject(a,!0)};DvtChartEventManager.prototype._getRelativePosition=function(a,b){this._stageAbsolutePosition||(this._stageAbsolutePosition=this._context.getStageAbsolutePosition());return new DvtPoint(a-this._stageAbsolutePosition.x,b-this._stageAbsolutePosition.y)};
DvtChartEventManager.prototype._getDragHandler=function(){return this._dragMode==DvtChartEventManager.DRAG_MODE_PAN?this._panZoomHandler:this._dragMode==DvtChartEventManager.DRAG_MODE_ZOOM?this._marqueeZoomHandler:this._dragMode==DvtChartEventManager.DRAG_MODE_SELECT?this._marqueeSelectHandler:null};DvtChartEventManager.prototype._onDragStart=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragStart(a):this._onMouseDragStart(a)};
DvtChartEventManager.prototype._onDragMove=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragMove(a):this._onMouseDragMove(a)};DvtChartEventManager.prototype._onDragEnd=function(a){return DvtAgent.isTouchDevice()?this._onTouchDragEnd(a):this._onMouseDragEnd(a)};
DvtChartEventManager.prototype._onMouseDragStart=function(a){var b=this._getRelativePosition(a.pageX,a.pageY),c=this._getDragHandler(),d,e=this.GetLogicalObject(this.GetCurrentTargetForEvent(a));if((!e||!e.isSelectable||!e.isSelectable())&&0==a.button&&c)(d=c.processDragStart(b,a.ctrlKey))&&this._callback.call(this._callbackObj,d),this._chart.setCursor(c.getCursor(b)),this.setDragButtonsVisible(!1);return d?(this._dataCursorHandler&&this._dataCursorHandler.processEnd(),!0):!1};
DvtChartEventManager.prototype._onMouseDragMove=function(a){var b=this._getRelativePosition(a.pageX,a.pageY),c=this._getDragHandler(),d;if(c&&(d=c.processDragMove(b,a.ctrlKey)))this._callback.call(this._callbackObj,d),this.setDragButtonsVisible(!1);d&&a.stopPropagation()};
DvtChartEventManager.prototype._onMouseDragEnd=function(a){var b=this._getRelativePosition(a.pageX,a.pageY),c=this._getDragHandler();if(c){if(a=c.processDragEnd(b,a.ctrlKey))this._callback.call(this._callbackObj,a),this.autoToggleZoomButton();this._chart.setCursor(c.getCursor(b));(c=this._chart.__getAxisSpace())&&this.setDragButtonsVisible(c.containsPoint(b.x,b.y))}this._stageAbsolutePosition=null};
DvtChartEventManager.prototype.OnMouseMove=function(a){DvtChartEventManager.superclass.OnMouseMove.call(this,a);this._dataCursorHandler&&(this.GetCurrentTargetForEvent(a)instanceof DvtButton?this._dataCursorHandler.processEnd():this._dataCursorHandler.processMove(a.pageX,a.pageY,a.target));var b=this._getDragHandler(),a=this._getRelativePosition(a.pageX,a.pageY);b&&this._chart.setCursor(b.getCursor(a))};
DvtChartEventManager.prototype.OnMouseOver=function(a){DvtChartEventManager.superclass.OnMouseOver.call(this,a);(a=this.GetLogicalObject(a.target))&&this._seriesRolloverHandler&&this._seriesRolloverHandler.processMouseOver(a)};
DvtChartEventManager.prototype.OnMouseOut=function(a){DvtChartEventManager.superclass.OnMouseOut.call(this,a);var b=this._getRelativePosition(a.pageX,a.pageY),c=this._chart.__getAxisSpace();c&&this.setDragButtonsVisible(c.containsPoint(b.x,b.y));this._dataCursorHandler&&this._dataCursorHandler.processOut(b);this._stageAbsolutePosition=null;(a=this.GetLogicalObject(a.target))&&this._seriesRolloverHandler&&this._seriesRolloverHandler.processMouseOut(a)};
DvtChartEventManager.prototype.OnMouseWheel=function(a){if(DvtChartEventUtils.isZoomable(this._chart)){var b=null!=a.wheelDelta?a.wheelDelta:0,c=this._getRelativePosition(a.pageX,a.pageY);if(this._panZoomHandler&&(b=this._panZoomHandler.processMouseWheel(c,b)))a.preventDefault(),a.stopPropagation(),this._callback.call(this._callbackObj,b),this._dataCursorHandler&&this._dataCursorHandler.processMove(a.pageX,a.pageY,a.target)}};
DvtChartEventManager.prototype.OnClickInternal=function(a){var b=this.GetLogicalObject(a.target),a=this._getRelativePosition(a.pageX,a.pageY);this.SeriesFocusHandler&&this.SeriesFocusHandler.processSeriesFocus(a,b);b&&b.getAction&&b.getAction()&&this.FireEvent(new DvtActionEvent(DvtActionEvent.SUBTYPE_ACTION,b.getAction(),b.getId()))};
DvtChartEventManager.prototype.HandleTouchHoverStartInternal=function(a){var b=a.touch,c=this._context.pageToStageCoords(b.pageX,b.pageY),a=this.GetLogicalObject(a.target);this.TouchManager.setTooltipEnabled(b.identifier,this.IsTooltipShowable(a,c));return!1};
DvtChartEventManager.prototype.HandleTouchHoverMoveInternal=function(a){var b=a.touch,c=this._context.pageToStageCoords(b.pageX,b.pageY),a=this.GetLogicalObject(a.target);this.TouchManager.setTooltipEnabled(b.identifier,this.IsTooltipShowable(a,c));return!1};DvtChartEventManager.prototype.HandleTouchHoverEndInternal=function(a){this._seriesRolloverHandler&&this._seriesRolloverHandler.processMouseOut(this.GetLogicalObject(a.target))};
DvtChartEventManager.prototype.HandleTouchHoverOverInternal=function(a){this._seriesRolloverHandler&&this._seriesRolloverHandler.processMouseOver(this.GetLogicalObject(a.target))};DvtChartEventManager.prototype.HandleTouchHoverOutInternal=function(a){this._seriesRolloverHandler&&this._seriesRolloverHandler.processMouseOut(this.GetLogicalObject(a.target))};
DvtChartEventManager.prototype.HandleTouchClickInternal=function(a){DvtChartEventManager.superclass.HandleTouchClickInternal.call(this,a);(a=this.GetLogicalObject(a.target))&&a.getAction&&a.getAction()&&this.FireEvent(new DvtActionEvent(DvtActionEvent.SUBTYPE_ACTION,a.getAction(),a.getId()))};
DvtChartEventManager.prototype._onTouchDragStart=function(a){var b=a.touches,c,d,e;1==b.length?(e=this._getDragHandler())?(b=this._getRelativePosition(b[0].pageX,b[0].pageY),c=e.processDragStart(b,!0)):this._dataCursorHandler&&(this._dataCursorHandler.processMove(b[0].pageX,b[0].pageY,a.target,this.GetLogicalObject(a.target)),d=!0):2==b.length&&this._panZoomHandler&&DvtChartEventUtils.isZoomable(this._chart)&&(this.endDrag(),e=this._getRelativePosition(b[0].pageX,b[0].pageY),b=this._getRelativePosition(b[1].pageX,
b[1].pageY),c=this._panZoomHandler.processPinchStart(e,b));c&&(this._callback.call(this._callbackObj,c),this.getCtx().getTooltipManager().hideTooltip());return c||d?(a.preventDefault(),a.stopPropagation(),this.setDragButtonsVisible(!1),!0):!1};
DvtChartEventManager.prototype._onTouchDragMove=function(a){var b=a.touches,c,d;if(1==b.length){var e=this._getDragHandler();e?(b=this._getRelativePosition(b[0].pageX,b[0].pageY),c=e.processDragMove(b,!0)):this._dataCursorHandler&&(this._dataCursorHandler.processMove(b[0].pageX,b[0].pageY,a.target,this.GetLogicalObject(a.target)),d=!0)}else 2==b.length&&this._panZoomHandler&&DvtChartEventUtils.isZoomable(this._chart)&&(e=this._getRelativePosition(b[0].pageX,b[0].pageY),b=this._getRelativePosition(b[1].pageX,
b[1].pageY),c=this._panZoomHandler.processPinchMove(e,b));(c||d)&&a.preventDefault();c&&(this._callback.call(this._callbackObj,c),this.getCtx().getTooltipManager().hideTooltip())};
DvtChartEventManager.prototype._onTouchDragEnd=function(a){var b=this.endDrag(),c;this._panZoomHandler&&DvtChartEventUtils.isZoomable(this._chart)&&(c=this._panZoomHandler.processPinchEnd())&&this._callback.call(this._callbackObj,c);if(b||c)a.preventDefault(),this.getCtx().getTooltipManager().hideTooltip();this._stageAbsolutePosition=null;this.setDragButtonsVisible(!0)};
DvtChartEventManager.prototype.endDrag=function(){var a=this._getDragHandler(),b;a&&(b=a.processDragEnd(null,!0))&&this._callback.call(this._callbackObj,b);this._dataCursorHandler&&this._dataCursorHandler.processEnd();b&&this._callback.call(this._callbackObj,b);return b};DvtChartEventManager.prototype.IsTooltipShowableInternal=function(a){return this._dataCursorHandler?a instanceof DvtChartObjPeer?!1:!this._dataCursorHandler.isDataCursorShown():!0};
DvtChartEventManager.prototype.hideHoverFeedback=function(){this.hideTooltip();this._dataCursorHandler&&this._dataCursorHandler.processEnd()};DvtChartEventManager.prototype.hideTooltip=function(){(!this._dataCursorHandler||!this._dataCursorHandler.isDataCursorShown())&&DvtChartEventManager.superclass.hideTooltip.call(this)};DvtChartEventManager.prototype.getTooltipsEnabled=function(){return this._dataCursorHandler&&this._dataCursorHandler.isDataCursorShown()?!1:DvtChartEventManager.superclass.getTooltipsEnabled.call(this)};
DvtChartEventManager.prototype.setSeriesRolloverHandler=function(a){this._seriesRolloverHandler=a};DvtChartEventManager.prototype.setDataCursorHandler=function(a){this._dataCursorHandler=a};DvtChartEventManager.prototype.setPanZoomHandler=function(a){this._panZoomHandler=a};DvtChartEventManager.prototype.setMarqueeZoomHandler=function(a){this._marqueeZoomHandler=a};DvtChartEventManager.prototype.setMarqueeSelectHandler=function(a){this._marqueeSelectHandler=a};
DvtChartEventManager.prototype.cancelMarquee=function(a){this._dragMode==DvtChartEventManager.DRAG_MODE_ZOOM?this._marqueeZoomHandler.cancelMarquee()&&a.preventDefault():this._dragMode==DvtChartEventManager.DRAG_MODE_SELECT&&this._marqueeSelectHandler&&this._marqueeSelectHandler.cancelMarquee()&&this._chart.render()};DvtChartEventManager.prototype.getDragMode=function(){return this._dragMode};
DvtChartEventManager.prototype.setDragMode=function(a){this._dragMode=null==a?this._getDefaultDragMode():a;this._chart.xAxis.isFullViewport()&&(!this._chart.yAxis||this._chart.yAxis.isFullViewport())&&this.autoToggleZoomButton()};
DvtChartEventManager.prototype._getDefaultDragMode=function(){return DvtAgent.isTouchDevice()?DvtChartEventManager.DRAG_MODE_TOOLTIP:DvtChartEventUtils.isScrollable(this._chart)?DvtChartEventManager.DRAG_MODE_PAN:"multiple"==this._chart.getOptions().selection?DvtChartEventManager.DRAG_MODE_SELECT:null};DvtChartEventManager.prototype.onZoomButtonClick=function(){this.zoomButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(DvtChartEventManager.DRAG_MODE_ZOOM)):this.setDragMode(null)};
DvtChartEventManager.prototype.onPanButtonClick=function(){this.panButton.isToggled()?(this.selectButton&&this.selectButton.setToggled(!1),this.setDragMode(DvtChartEventManager.DRAG_MODE_PAN)):this.setDragMode(null)};DvtChartEventManager.prototype.onSelectButtonClick=function(){this.selectButton.isToggled()?(this.zoomButton&&this.zoomButton.setToggled(!1),this.panButton&&this.panButton.setToggled(!1),this.setDragMode(DvtChartEventManager.DRAG_MODE_SELECT)):this.setDragMode(null)};
DvtChartEventManager.prototype.setDragButtonsVisible=function(a){a&&!this._dragButtonsVisible?(this._chart.showDragButtons(),this._dragButtonsVisible=!0):!a&&this._dragButtonsVisible&&(this._chart.hideDragButtons(),this._dragButtonsVisible=!1)};DvtChartEventManager.prototype.areDragButtonsVisible=function(){return this._dragButtonsVisible};
DvtChartEventManager.prototype.autoToggleZoomButton=function(){!DvtAgent.isTouchDevice()&&this.zoomButton&&(this._chart.xAxis.isFullViewport()&&this._chart.yAxis.isFullViewport()?this._dragMode==DvtChartEventManager.DRAG_MODE_PAN&&(this.zoomButton.setToggled(!0),this.onZoomButtonClick(null)):this._dragMode==DvtChartEventManager.DRAG_MODE_ZOOM&&(this.zoomButton.setToggled(!1),this.onZoomButtonClick(null)))};var DvtChartKeyboardHandler=function(a,b){this.Init(a,b)};
DvtObj.createSubclass(DvtChartKeyboardHandler,DvtKeyboardHandler,"DvtChartKeyboardHandler");DvtChartKeyboardHandler.prototype.Init=function(a,b){DvtChartKeyboardHandler.superclass.Init.call(this,a);this._chart=b};DvtChartKeyboardHandler.prototype.isSelectionEvent=function(a){return this.isNavigationEvent(a)&&!a.ctrlKey};DvtChartKeyboardHandler.prototype.isMultiSelectEvent=function(a){return a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey};
DvtChartKeyboardHandler.prototype.processKeyDown=function(a){var b=a.keyCode;if(b==DvtKeyboardEvent.TAB){var b=this._eventManager.getFocus(),c=null;a.preventDefault();b?c=b:(a=DvtChartTypeUtils.isPie(this._chart)?this._chart.pieChart.__getSlices():this._chart.getObjects(),c=DvtChartKeyboardHandler.superclass.getDefaultNavigable.call(this,a));c&&this._eventManager.setFocus(c);return c}b==DvtKeyboardEvent.ESCAPE&&this._eventManager.cancelMarquee(a);return DvtChartKeyboardHandler.superclass.processKeyDown.call(this,
a)};var DvtSeriesRolloverHandler=function(a){this.Init(a)};DvtObj.createSubclass(DvtSeriesRolloverHandler,DvtObj,"DvtSeriesRolloverHandler");DvtSeriesRolloverHandler.prototype.Init=function(){};DvtSeriesRolloverHandler.prototype.processMouseOver=function(a){this.ProcessEvent(a,!0)};DvtSeriesRolloverHandler.prototype.processMouseOut=function(a){this.ProcessEvent(a,!1)};DvtSeriesRolloverHandler.prototype.ProcessEvent=function(){};var DvtChartSeriesRolloverHandler=function(a,b){this.Init(a,b)};
DvtObj.createSubclass(DvtChartSeriesRolloverHandler,DvtSeriesRolloverHandler,"DvtChartSeriesRolloverHandler");DvtChartSeriesRolloverHandler.prototype.Init=function(a,b){DvtChartSeriesRolloverHandler.superclass.Init.call(this);this._chart=a;this.EventHandler=b};
DvtChartSeriesRolloverHandler.prototype.ProcessEvent=function(a,b){this._rolloverHandled=!1;if(a){var c=this.getRolloverContainer(),d=b?DvtCategoryRolloverEvent.TYPE_OVER:DvtCategoryRolloverEvent.TYPE_OUT,e=a.getCategories?a.getCategories():null;e&&0<e.length&&(this.EventHandler.FireEvent(new DvtCategoryRolloverEvent(d,e),c),this._rolloverHandled=!0)}};DvtChartSeriesRolloverHandler.prototype.isRolloverHandled=function(){return this._rolloverHandled};
DvtChartSeriesRolloverHandler.prototype.getRolloverContainer=function(){return this._chart};var DvtChartOverview=function(a,b,c,d,e){this.Init(a,b,c);this._chart=e;this._id=d+"_overview"};DvtObj.createSubclass(DvtChartOverview,DvtOverview,"DvtChartOverview");
DvtChartOverview.prototype._renderChart=function(a,b,c){this._chartContainer=new DvtContainer(this.getCtx());this.addChild(this._chartContainer);optionsOverride={zoomAndScroll:"off",legend:{rendered:"off"},xAxis:{viewportMin:null,viewportMax:null,viewportStartGroup:null,viewportEndGroup:null,axisLine:{rendered:"off"},title:null},yAxis:{axisLine:{rendered:"off"},tickLabel:{rendered:"off"},majorTick:{rendered:"off"},minorTick:{rendered:"off"},title:null},y2Axis:{axisLine:{rendered:"off"},tickLabel:{rendered:"off"},
majorTick:{rendered:"off"},minorTick:{rendered:"off"},title:null},title:{text:null},subtitle:{text:null},footnote:{text:null},titleSeparator:{rendered:"off"},layout:{outerGapWidth:0,outerGapHeight:0,tickLabelGapWidth:0},_isOverview:!0};a=DvtJSONUtils.merge(optionsOverride,a);"disabled"==a.timeAxisType&&(a.xAxis.tickLabel.rendered="off");this._chart||(this._chart=DvtChart.newInstance(this.getCtx()),this._chart.setId(this._id));this._chartContainer.addChild(this._chart);this._chart.render(a,b,c);a=
new DvtRect(this.getCtx(),0,0,b,c);a.setInvisibleFill();this._chartContainer.addChild(a);return this._chart.__getPlotAreaSpace().h};DvtChartOverview.prototype.createBackground=function(){};
DvtChartOverview.prototype.render=function(a,b,c){a.style={overviewBackgroundColor:"rgba(0,0,0,0)",windowBackgroundColor:"rgba(0,0,0,0)",windowBorderTopColor:"#333333",windowBorderRightColor:"#333333",windowBorderBottomColor:"#333333",windowBorderLeftColor:"#333333",leftFilterPanelColor:"rgba(5,65,135,0.1)",rightFilterPanelColor:"rgba(5,65,135,0.1)",handleBackgroundImage:a.chart._resources.overviewGrippy,handleWidth:3,handleHeight:15,handleFillColor:"rgba(0,0,0,0)"};a.animationOnClick="off";c=this._renderChart(a.chart,
b,c);DvtChartOverview.superclass.render.call(this,a,b,c)};DvtChartOverview.prototype.getBackgroundChart=function(){return this._chart};DvtChartOverview.prototype.isLeftAndRightFilterRendered=function(){return!0};var DvtChartObjPeer=function(a,b,c,d,e){this.Init(a,b,c,d,e)};DvtObj.createSubclass(DvtChartObjPeer,DvtObj,"DvtChartObjPeer");
DvtChartObjPeer.prototype.Init=function(a,b,c,d,e){this._chart=a;this._displayables=b;this._group=this._series=null;this._dataPos=e;this._seriesIndex=isNaN(c)?-1:c;0<=this._seriesIndex&&(this._series=DvtChartDataUtils.getSeries(a,this._seriesIndex));this._groupIndex=isNaN(d)?-1:d;0<=this._groupIndex&&(this._group=DvtChartDataUtils.getGroup(a,this._groupIndex));if(e=DvtChartDataUtils.getSeriesItem(a,c))this._action=e.action,this._stampId=e._id;this._categories=null!=this._series?[this._series]:[];
if(a=DvtChartDataUtils.getDataItem(a,c,d))a.categories&&(this._categories=this._categories.concat(a.categories)),this._dataItemId=a.id,this._action=a.action,this._stampId=a._id;if(this._action)for(a=0;a<this._displayables.length;a++)this._displayables[a].setCursor(DvtSelectionEffectUtils.getSelectingCursor());if(!DvtAgent.deferAriaCreation()){a=this.getDatatip(null);for(c=0;c<b.length;c++)b[c].setAriaRole("img"),b[c].setAriaProperty("label",a)}this._isSelected=!1};
DvtChartObjPeer.associate=function(a,b,c,d,e){a&&(c=new DvtChartObjPeer(b,[a],c,d,e),b.registerObject(c),b.getEventManager().associate(a,c))};DvtChartObjPeer.prototype.getId=function(){return null!=this._series&&null!=this._group?new DvtChartDataItem(this._dataItemId,this._series,this._group):null!=this._series?this._series:null};DvtChartObjPeer.prototype.getDataItemId=function(){return this._dataItemId};DvtChartObjPeer.prototype.getSeries=function(){return this._series};
DvtChartObjPeer.prototype.getSeriesIndex=function(){return this._seriesIndex};DvtChartObjPeer.prototype.getGroup=function(){return this._group};DvtChartObjPeer.prototype.getGroupIndex=function(){return this._groupIndex};DvtChartObjPeer.prototype.getAction=function(){return this._action};DvtChartObjPeer.prototype.getChart=function(){return this._chart};DvtChartObjPeer.prototype.getSeriesType=function(){return DvtChartStyleUtils.getSeriesType(this._chart,this._seriesIndex)};
DvtChartObjPeer.prototype.getSeriesItem=function(){return DvtChartDataUtils.getSeriesItem(this._chart,this._seriesIndex)};DvtChartObjPeer.prototype.getDatatip=function(a){return DvtChartTooltipUtils.getDatatip(a,this._chart,this._seriesIndex,this._groupIndex)};DvtChartObjPeer.prototype.getDatatipColor=function(){return DvtChartTooltipUtils.getDatatipColor(this._chart,this._seriesIndex,this._groupIndex)};
DvtChartObjPeer.prototype.isSelectable=function(){return this.getChart().isSelectionSupported()&&null!=this._series&&null!=this._group};DvtChartObjPeer.prototype.isSelected=function(){return this._isSelected};DvtChartObjPeer.prototype.setSelected=function(a){this._isSelected=a;for(var b=0;b<this._displayables.length;b++)this._displayables[b].setSelected&&this._displayables[b].setSelected(a)};
DvtChartObjPeer.prototype.showHoverEffect=function(){for(var a=0;a<this._displayables.length;a++)this._displayables[a].showHoverEffect&&this._displayables[a].showHoverEffect()};DvtChartObjPeer.prototype.hideHoverEffect=function(){for(var a=0;a<this._displayables.length;a++)this._displayables[a].hideHoverEffect&&this._displayables[a].hideHoverEffect()};DvtChartObjPeer.prototype.getShowPopupBehaviors=function(){return this._chart.getShowPopupBehaviors(this._stampId)};
DvtChartObjPeer.prototype.getDisplayables=function(){return this._displayables};DvtChartObjPeer.prototype.getAriaLabel=function(){return this.getDatatip(null)};DvtChartObjPeer.prototype.getCategories=function(){return this._categories};DvtChartObjPeer.prototype.getDataPosition=function(){return this._dataPos};
DvtChartObjPeer.prototype.getNextNavigable=function(a){if(a.type==DvtMouseEvent.CLICK||a.keyCode==DvtKeyboardEvent.SPACE&&a.ctrlKey)return this;for(var b=this._chart,c=b.getObjects(),d=[],e=0;e<c.length;e++)c[e].isNavigable()&&d.push(c[e]);if(DvtChartTypeUtils.isScatterBubble(b))a=DvtKeyboardHandler.getNextAdjacentNavigable(this,a,d);else if(DvtChartTypeUtils.isArea(b)||DvtChartTypeUtils.isLine(b)||DvtChartTypeUtils.isStacked(b))a=this._findNextNavigable(a);else{if(DvtChartTypeUtils.isFunnel(b)&&
(a.keyCode==DvtKeyboardEvent.UP_ARROW||a.keyCode==DvtKeyboardEvent.DOWN_ARROW))a.clone(),a.keyCode-=1;a=DvtKeyboardHandler.getNextNavigable(this,a,d)}return a};DvtChartObjPeer.prototype.getKeyboardBoundingBox=function(){return this._displayables[0]?this._displayables[0].getDimensions():new DvtRectangle(0,0,0,0)};DvtChartObjPeer.prototype.showKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!0,this.showHoverEffect())};
DvtChartObjPeer.prototype.hideKeyboardFocusEffect=function(){this.isNavigable()&&(this._isShowingKeyboardFocusEffect=!1,this.hideHoverEffect())};DvtChartObjPeer.prototype.isShowingKeyboardFocusEffect=function(){return this._isShowingKeyboardFocusEffect};DvtChartObjPeer.prototype.isNavigable=function(){return-1!=this.getGroupIndex()&&-1!=this.getSeriesIndex()};
DvtChartObjPeer.prototype._findNextNavigable=function(a){var b=a.keyCode,a=this._chart,c=a.getCtx(),d=this.getSeriesIndex(),e=this.getGroupIndex(),g=DvtChartDataUtils.getSeriesCount(a),h=DvtChartDataUtils.getGroupCount(a),k=this._findNextUpSeries(a,d,e),m=this._findNextDownSeries(a,d,e),c=DvtAgent.isRightToLeft(c);if(DvtChartTypeUtils.isStacked(a)&&b==DvtKeyboardEvent.DOWN_ARROW&&0<d)b=d-1;else if(DvtChartTypeUtils.isStacked(a)&&b==DvtKeyboardEvent.UP_ARROW&&d<g-1)b=d+1;else if(!DvtChartTypeUtils.isStacked(a)&&
b==DvtKeyboardEvent.UP_ARROW&&null!=k)b=k;else if(!DvtChartTypeUtils.isStacked(a)&&b==DvtKeyboardEvent.DOWN_ARROW&&null!=m)b=m;else if(b==DvtKeyboardEvent.RIGHT_ARROW&&e<h-1&&!c)b=d,e+=1;else if(b==DvtKeyboardEvent.LEFT_ARROW&&0<e&&!c)b=d,e-=1;else if(b==DvtKeyboardEvent.RIGHT_ARROW&&0<e&&c)b=d,e-=1;else if(b==DvtKeyboardEvent.LEFT_ARROW&&e<h-1&&c)b=d,e+=1;else return this;return a.getObject(b,e)};
DvtChartObjPeer.prototype._findNextUpSeries=function(a,b,c){for(var d=DvtChartDataUtils.getSeriesCount(a),e=DvtChartDataUtils.getValue(a,b,c),g=null,h=null,k=0;k<d;k++){var m=DvtChartDataUtils.getValue(a,k,c);if(m>e||m==e&&k>b)if(null!==g&&m<g||null==g)g=m,h=k}return h};
DvtChartObjPeer.prototype._findNextDownSeries=function(a,b,c){for(var d=DvtChartDataUtils.getSeriesCount(a),e=DvtChartDataUtils.getValue(a,b,c),g=null,h=null,d=d-1;0<=d;d--){var k=DvtChartDataUtils.getValue(a,d,c);if(k<e||k==e&&d<b)if(null!==g&&k>g||null==g)g=k,h=d}return h};var DvtChartDataItem=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtChartDataItem,DvtObj,"DvtChartDataItem");DvtChartDataItem.prototype.Init=function(a,b,c){this._id=a;this._series=b;this._group=c};
DvtChartDataItem.prototype.getId=function(){return this._id};DvtChartDataItem.prototype.getSeries=function(){return this._series};DvtChartDataItem.prototype.getGroup=function(){return this._group};DvtChartDataItem.prototype.equals=function(a){return a instanceof DvtChartDataItem?this._group===a.getGroup()&&this._series===a.getSeries():!1};var DvtChartDefaults=function(){this.Init({skyros:DvtChartDefaults.VERSION_1,alta:DvtChartDefaults.SKIN_ALTA})};
DvtObj.createSubclass(DvtChartDefaults,DvtBaseComponentDefaults,"DvtChartDefaults");
DvtChartDefaults.SKIN_ALTA={skin:DvtCSSStyle.SKIN_ALTA,title:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px; color: #252525;")},subtitle:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #252525;")},footnote:{style:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 11px;")},styleDefaults:{seriesEffect:"color",colors:DvtCSSStyle.COLORS_ALTA,sliceLabelStyle:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"),
dataLabelStyle:new DvtCSSStyle("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;")}};
DvtChartDefaults.VERSION_1={skin:DvtCSSStyle.SKIN_SKYROS,emptyText:null,type:"bar",stack:"off",orientation:"vertical",polarGridShape:"circle",selection:"none",hideAndShowBehavior:"none",zoomAndScroll:"off",hoverBehavior:"none",sorting:"off",otherThreshold:0,animationOnDataChange:"none",animationOnDisplay:"none",timeAxisType:"disabled",__sparkBarSpacing:"subpixel",__spark:!1,dataCursor:"auto",dataCursorBehavior:"auto",title:{style:new DvtCSSStyle("font-size: 12px; color: #003d5b; font-weight: bold"),
hAlign:"start"},subtitle:{style:new DvtCSSStyle("font-size: 12px; color: #003d5b;")},footnote:{style:new DvtCSSStyle("font-size: 10px; color: #333333;"),hAlign:"start"},titleSeparator:{upperColor:"#74779A",lowerColor:"#FFFFFF",rendered:"off"},xAxis:{baselineScaling:"zero",tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"off"},axisLine:{rendered:"on"},layout:{gapRatio:1}},yAxis:{baselineScaling:"zero",tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"off"},
axisLine:{rendered:"on"},layout:{gapRatio:1}},y2Axis:{baselineScaling:"zero",tickLabel:{rendered:"on"},majorTick:{rendered:"auto"},minorTick:{rendered:"off"},axisLine:{rendered:"on"},layout:{gapRatio:1},alignTickMarks:"on"},plotArea:{backgroundColor:null},legend:{position:"auto",rendered:"on",layout:{gapRatio:1}},overview:{rendered:"off"},styleDefaults:{colors:DvtCSSStyle.COLORS_SKYROS,patterns:"smallDiagonalRight,smallChecker,smallDiagonalLeft,smallTriangle,smallCrosshatch,smallDiamond,largeDiagonalRight,largeChecker,largeDiagonalLeft,largeTriangle,largeCrosshatch,largeDiamond".split(","),
shapes:"square,circle,diamond,plus,triangleDown,triangleUp".split(","),seriesEffect:"gradient",threeDEffect:"off",groupTooltipType:"auto",seriesTooltipType:"auto",valueTooltipType:"auto",animationDuration:1E3,animationIndicators:"all",animationUpColor:"#0099FF",animationDownColor:"#FF3300",lineWidth:3,lineStyle:"solid",markerDisplayed:"off",markerColor:null,markerShape:"auto",markerSize:8,marqueeColor:"rgba(255,255,255,0.5)",marqueeBorderColor:"rgba(0,0,0,0.2)",pieFeelerColor:"#BAC5D6",selectedInnerColor:"#ffffff",
selectedOuterColor:"#5a5a5a",sliceLabelPosition:"auto",sliceLabelStyle:new DvtCSSStyle("font-size: 11px;"),sliceLabelType:"percent",otherColor:"#4b4b4b",dataLabelStyle:new DvtCSSStyle("font-size: 11px;"),dataLabelPosition:"auto",x1Format:{},y1Format:{},y2Format:{},zFormat:{},_defaultSliceLabelColor:"#333333",_scrollbarHeight:3,_scrollbarTrackColor:"#F0F0F0",_scrollbarHandleColor:"#9E9E9E"},layout:{gapRatio:null,outerGapWidth:10,outerGapHeight:8,titleSubtitleGapWidth:14,titleSubtitleGapHeight:4,titleSeparatorGap:6,
titlePlotAreaGap:10,footnoteGap:7,verticalAxisTopGap:6,legendMaxSize:0.3,legendGap:10,axisMaxSize:0.33,tickLabelGapHeight:5,tickLabelGapWidth:7},_resources:{}};DvtChartDefaults.getGapSize=function(a,b){return Math.ceil(b*a.getGapRatio())};DvtChartDefaults.isSkyrosSkin=function(a){return a.getOptions().skin==DvtCSSStyle.SKIN_SKYROS};var DvtChartAxisUtils={};DvtObj.createSubclass(DvtChartAxisUtils,DvtObj,"DvtChartAxisUtils");DvtChartAxisUtils._BAR_AXIS_OFFSET=0.5;
DvtChartAxisUtils.getXAxisPosition=function(a){return DvtChartTypeUtils.isPolar(a)?"tangential":DvtChartTypeUtils.isHorizontal(a)?DvtAgent.isRightToLeft(a.getCtx())?"right":"left":"bottom"};DvtChartAxisUtils.getYAxisPosition=function(a){return DvtChartTypeUtils.isPolar(a)?"radial":DvtChartTypeUtils.isHorizontal(a)?"bottom":DvtAgent.isRightToLeft(a.getCtx())?"right":"left"};
DvtChartAxisUtils.getY2AxisPosition=function(a){return DvtChartTypeUtils.isHorizontal(a)?"top":DvtAgent.isRightToLeft(a.getCtx())?"left":"right"};DvtChartAxisUtils.hasTimeAxis=function(a){return DvtChartTypeUtils.isBLAC(a)?"disabled"!=a.getOptions().timeAxisType:!1};DvtChartAxisUtils.hasGroupAxis=function(a){return DvtChartTypeUtils.isBLAC(a)?"disabled"==a.getOptions().timeAxisType:!1};
DvtChartAxisUtils.getBarAxisOffset=function(a){var b=DvtChartTypeUtils.isLine(a)||DvtChartTypeUtils.isArea(a);return DvtChartTypeUtils.hasBarSeries(a)||b&&1==DvtChartDataUtils.getGroupCount(a)?DvtChartAxisUtils._BAR_AXIS_OFFSET:0};DvtChartAxisUtils.areYAxisLabelsRendered=function(a){a=a.getOptions().yAxis;return"off"==a.rendered||a.tickLabel&&a.tickLabel.rendered&&"on"!=a.tickLabel.rendered?!1:!0};
DvtChartAxisUtils.isGridPolygonal=function(a){return!DvtChartTypeUtils.isBLAC(a)||DvtChartTypeUtils.hasBarSeries(a)?!1:"polygon"==a.getOptions().polarGridShape};var DvtChartDataUtils={};DvtObj.createSubclass(DvtChartDataUtils,DvtObj,"DvtChartDataUtils");DvtChartDataUtils._TYPE_LABEL="label";
DvtChartDataUtils.hasData=function(a){var b=a.getOptions();if(!b||!b.series||1>b.series.length)return!1;for(var b=DvtChartDataUtils.getSeriesCount(a),c=0;c<b;c++){var d=DvtChartDataUtils.getSeriesItem(a,c);if(d&&d.items&&1<=d.items.length)return!0}return!1};DvtChartDataUtils.hasSeriesData=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b).items;if(c)for(var d=0;d<c.length;d++)if(null!=c[d])return!0;return!1};
DvtChartDataUtils.processDataObject=function(a){if(DvtChartDataUtils.hasData(a)){for(var b=0,c=a.getSeriesStyleArray(),d=DvtChartDataUtils.getSeriesCount(a),e=0;e<d;e++){var g=DvtChartDataUtils.getSeries(a,e);null!=g&&0>DvtArrayUtils.getIndex(c,g)&&c.push(g);if((g=DvtChartDataUtils.getSeriesItem(a,e))&&g.items&&g.items.length>b)b=g.items.length;DvtChartTypeUtils.isFunnel(a)&&(g.displayInLegend="off")}c=a.getOptions();c.groups||(c.groups=[]);for(d=a.getBundle();c.groups.length<b;)e=d.getTranslatedString("DEFAULT_GROUP_NAME",
c.groups.length+1),c.groups.push(e);DvtChartTypeUtils.isFunnel(a)&&(c.styleDefaults.groupTooltipType="none")}};DvtChartDataUtils.getSeriesCount=function(a){return a.getOptions().series.length};DvtChartDataUtils.getSeries=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c?c.id?c.id:c.name||""==c.name?c.name:""+b:null};DvtChartDataUtils.getSeriesLabel=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&(c.name||""==c.name)?c.name:null};
DvtChartDataUtils.getSeriesIndex=function(a,b){for(var c=DvtChartDataUtils.getSeriesCount(a),d=0;d<c;d++)if(DvtChartDataUtils.getSeries(a,d)==b)return d;return-1};DvtChartDataUtils.getSeriesStyleIndex=function(a,b){if(b){var c=a.getSeriesStyleArray();return DvtArrayUtils.getIndex(c,b)}return DvtChartDataUtils.getSeriesIndex(a,b)};DvtChartDataUtils.getSeriesItem=function(a,b){if(isNaN(b)||null==b)return null;var c=a.getOptions();if(c.series&&c.series.length>b)return c.series[b]};
DvtChartDataUtils.getDataItem=function(a,b,c){if(isNaN(c)||null==c)return null;if((a=DvtChartDataUtils.getSeriesItem(a,b))&&a.items&&0<=c&&a.items.length>c)return a.items[c]};DvtChartDataUtils.getGroupCount=function(a){return a.getOptions().groups.length};DvtChartDataUtils.getGroup=function(a,b){var c=a.getOptions().groups;return 0<=b&&b<c.length&&(c=c[b])?c.id?c.id:c.name||""==c.name?c.name:c:null};DvtChartDataUtils.getGroupIndex=function(a,b){return DvtChartDataUtils.getGroups(a).indexOf(b)};
DvtChartDataUtils.getGroupLabel=function(a,b){var c=a.getOptions().groups;return 0<=b&&b<c.length&&(c=c[b])?c.name?c.name:c:null};DvtChartDataUtils.getGroups=function(a){for(var b=a.getOptions().groups.length,c=[],d=0;d<b;d++)c.push(DvtChartDataUtils.getGroup(a,d));return c};DvtChartDataUtils.getValue=function(a,b,c){a=DvtChartDataUtils.getDataItem(a,b,c);if(null!=a)if(isNaN(a)){if(null!=a.value)return a.value;if(null!=a.y)return a.y}else return a;return null};
DvtChartDataUtils.getCumulativeValue=function(a,b,c,d){if(DvtChartTypeUtils.isStacked(a)){for(var e=DvtChartTypeUtils.isCombo(a),g=DvtChartStyleUtils.getSeriesType(a,b),h=DvtChartDataUtils.isAssignedToY2(a,b),k=0,m=0;m<=b;m++)if((d||DvtChartStyleUtils.isSeriesRendered(a,m))&&!(e&&g!=DvtChartStyleUtils.getSeriesType(a,m))&&h==DvtChartDataUtils.isAssignedToY2(a,m))var n=DvtChartDataUtils.getValue(a,m,c),k=k+(null==n||isNaN(n)?0:n);return k}return DvtChartDataUtils.getValue(a,b,c)};
DvtChartDataUtils.getXValue=function(a,b,c){if(DvtChartAxisUtils.hasGroupAxis(a))return c;b=DvtChartDataUtils.getDataItem(a,b,c);if(null==b)return null;b=b.x;return isNaN(b)?DvtChartDataUtils.getGroupLabel(a,c):b};DvtChartDataUtils.getTargetValue=function(a,b){var c=DvtChartDataUtils.getDataItem(a,b,0);return!isNaN(c)||null==c?null:c.targetValue};
DvtChartDataUtils.isXInViewport=function(a,b,c){b=DvtChartDataUtils.getXValue(a,b,c);if(isNaN(b))return!1;a=DvtChartDataUtils._getXAxisViewportMinMax(a);return null!=a.min&&b<a.min||null!=a.max&&b>a.max?!1:!0};DvtChartDataUtils._computeYAlongLine=function(a,b,c,d,e){return b+(d-b)*(e-a)/(c-a)};
DvtChartDataUtils.getViewportEdgeYValues=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b).items;if(!c)return{min:null,max:null};for(var d="withoutRescale"==DvtChartEventUtils.getHideAndShowBehavior(a),e=DvtChartDataUtils._getXAxisViewportMinMax(a),g=e.min,e=e.max,h,k,m,n,o,s,t=0;t<c.length;t++)if(d||DvtChartStyleUtils.isDataItemRendered(a,b,t))h=DvtChartDataUtils.getXValue(a,b,t),k=DvtChartDataUtils.getCumulativeValue(a,b,t,d),null!=m&&(null!=g&&g>m&&g<h&&(o=DvtChartDataUtils._computeYAlongLine(m,
n,h,k,g)),null!=e&&e>m&&e<h&&(s=DvtChartDataUtils._computeYAlongLine(m,n,h,k,e))),m=h,n=k;return{min:o,max:s}};
DvtChartDataUtils._getXAxisViewportMinMax=function(a){var b=a.getOptions().xAxis,c=DvtChartAxisUtils.hasGroupAxis(a),d=null,d=null!=b.viewportMin?b.viewportMin:null!=b.viewportStartGroup?c?DvtChartDataUtils.getGroupIndex(a,b.viewportStartGroup):b.viewportStartGroup:b.min,e=null,e=null!=b.viewportMax?b.viewportMax:null!=b.viewportEndGroup?c?DvtChartDataUtils.getGroupIndex(a,b.viewportEndGroup):b.viewportEndGroup:b.max;return{min:d,max:e}};
DvtChartDataUtils.getMinMaxValue=function(a,b,c){var d="y2"==b;d&&(b="y");var e="y"==b;if(!e||!DvtChartTypeUtils.isBLAC(a))c=!1;for(var g="withoutRescale"==DvtChartEventUtils.getHideAndShowBehavior(a),h="bubble"==a.getType(),k=-Infinity,m=Infinity,n=a.getOptions(),o=DvtChartDataUtils.getSeriesCount(a),s=0;s<o;s++){var t=DvtChartDataUtils.getSeriesItem(a,s);if(g||DvtChartStyleUtils.isSeriesRendered(a,s)){var u=DvtChartDataUtils.isAssignedToY2(a,s);if(!(e&&d!=u)&&(t=t.items)){for(u=0;u<t.length;u++)if(g||
DvtChartStyleUtils.isDataItemRendered(a,s,u)){"object"!=typeof t[u]&&(t[u]={y:t[u]});var v=t[u],w;e?w=DvtChartDataUtils.getCumulativeValue(a,s,u,g):null!=v&&(n.timeAxisType&&"enabled"==n.timeAxisType&&null==v.x&&(w=DvtChartDataUtils.getGroupLabel(a,u),isNaN(w)||(v.x=w)),w=v[b]);if((!c||DvtChartDataUtils.isXInViewport(a,s,u))&&!isNaN(w)){var z=0;h&&v.markerSize&&(e?z=v._yAxisRadius:"x"==b&&(z=v._xAxisRadius));k=Math.max(k,w+z);m=Math.min(m,w-z)}}t=null;"x"==b?t=DvtChartRefObjUtils.getXAxisObjects(a):
"y"==b?t=DvtChartRefObjUtils.getYAxisObjects(a):"y2"==b&&(t=DvtChartRefObjUtils.getY2AxisObjects(a));if(null!=t)for(u=0;u<t.length;u++)if(v=t[u].items,null!=v)for(z=0;z<v.length;z++)if(null!=v[z]){var A=v[z].min,C=v[z].max,D=isNaN(v[z])?v[z].value:v[z];null!=A&&(m=Math.min(m,A),k=Math.max(k,A));null!=C&&(m=Math.min(m,C),k=Math.max(k,C));null!=D&&(m=Math.min(m,D),k=Math.max(k,D))}c&&(t=DvtChartDataUtils.getViewportEdgeYValues(a,s),null!=t.min&&(m=Math.min(m,t.min),k=Math.max(k,t.min)),null!=t.max&&
(m=Math.min(m,t.max),k=Math.max(k,t.max)))}}}return{min:m,max:k}};DvtChartDataUtils.isAssignedToY2=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&"on"==c.assignedToY2&&DvtChartTypeUtils.isDualY(a)?!0:!1};DvtChartDataUtils.hasMixedFrequency=function(a){return"mixedFrequency"==a.getOptions().timeAxisType};
DvtChartDataUtils.getInitialSelection=function(a){var b=a.getOptions().selectedItems;b||(b=[]);for(var a=a.getObjects(),c=0;c<b.length;c++){var d=b[c].id;if(d&&(!b[c].series||!b[c].group))for(var e=0;e<a.length;e++){var g=a[e];if(d==g.getDataItemId()){b[c].series=g.getSeries();b[c].group=g.getGroup();break}}}return b};
DvtChartDataUtils.getCurrentSelection=function(a){var b=[];if(a=a.getSelectionHandler())for(var a=a.getSelectedIds(),c=0;c<a.length;c++){var d=a[c];b.push({series:d.getSeries(),group:d.getGroup(),id:d.getId()})}return b};DvtChartDataUtils.isDataSelected=function(a,b,c){var d=a.getSelectionHandler(),b=DvtChartDataUtils.getSeries(a,b),a=DvtChartDataUtils.getGroup(a,c);if(d&&null!=b&&null!=a){d=d.getSelectedIds();for(c=0;c<d.length;c++){var e=d[c];if(e.getSeries()==b&&e.getGroup()==a)return!0}}return!1};
DvtChartDataUtils.getDataLabel=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c);if(d.label){c=parseFloat(d.label);if(isNaN(c))return d.label;var d=a.getOptions(),e,g;if(a=DvtChartDataUtils.isAssignedToY2(a,b)&&a.y2Axis?a.y2Axis:a.yAxis)e=a.getGlobalMin(),g=a.getGlobalMax(),majorIncrement=a.getMajorIncrement();return c=DvtChartTooltipUtils._formatValue(d.valueFormats,DvtChartDataUtils._TYPE_LABEL,c,e,g,majorIncrement)}return null};var DvtChartEventUtils={};
DvtObj.createSubclass(DvtChartEventUtils,DvtObj,"DvtChartEventUtils");DvtChartEventUtils.getHideAndShowBehavior=function(a){return a.getOptions().hideAndShowBehavior};DvtChartEventUtils.getHoverBehavior=function(a){return a.getOptions().hoverBehavior};
DvtChartEventUtils.setVisibility=function(a,b,c){var d=DvtChartDataUtils.getSeriesItem(a,DvtChartDataUtils.getSeriesIndex(a,b));if(b==DvtPieChartUtils.OTHER_SLICE_SERIES_ID&&DvtPieChartUtils.getOtherSliceVisibility(a)!==c)DvtPieChartUtils.setOtherSliceVisibility(a,c);else if(d&&d.visibility!==c)d.visibility=c;else{if(!DvtChartTypeUtils.isScatterBubble(a))return!1;d=DvtChartStyleUtils.getHiddenCategories(a);if("hidden"==c)d.push(b);else{var e=DvtArrayUtils.getIndex(d,b);d.splice(e,1)}if((a=a.getOptions())&&
a.legend&&a.legend.sections)for(d=0;d<a.legend.sections.length;d++)if((e=a.legend.sections[d])&&e.items)for(var g=0;g<e.items.length;g++)e.items[g].id==b&&(e.items[g].categoryVisibility=c)}return!0};DvtChartEventUtils.isScrollable=function(a){return"off"!=a.getOptions().zoomAndScroll};DvtChartEventUtils.isZoomable=function(a){a=a.getOptions().zoomAndScroll;return"live"==a||"delayed"==a};DvtChartEventUtils.isLiveScroll=function(a){a=a.getOptions().zoomAndScroll;return"live"==a||"liveScrollOnly"==a};
DvtChartEventUtils.isDelayedScroll=function(a){a=a.getOptions().zoomAndScroll;return"delayed"==a||"delayedScrollOnly"==a};DvtChartEventUtils.processIds=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];e.getSeries()==DvtPieChartUtils.OTHER_SLICE_SERIES_ID?(e=DvtPieChartUtils.getOtherSliceIds(a),c=c.concat(e)):c.push(e)}return c};DvtChartEventUtils.adjustBounds=function(a){null!=a.x&&(a.x-=1);null!=a.w&&(a.w+=2);null!=a.y&&(a.y-=1);null!=a.h&&(a.h+=2)};
DvtChartEventUtils.getBoundedObjects=function(a,b){for(var c=a.getObjects(),d=[],e=0;e<c.length;e++){var g=c[e],h=g.getDataPosition();if(h){var h=a.getPlotArea().localToStage(h),k=null==b.y||h.y>=b.y&&h.y<=b.y+b.h;(null==b.x||h.x>=b.x&&h.x<=b.x+b.w)&&k&&d.push(g)}}return d};
DvtChartEventUtils.getAxisBounds=function(a,b,c){var d=a.getPlotArea(),e=d.stageToLocal(new DvtPoint(b.x,b.y)),b=d.stageToLocal(new DvtPoint(b.x+b.w,b.y+b.h)),e=DvtChartEventUtils._convertToAxisCoord(a,e.x,b.x,e.y,b.y),b={},d={},g={},h={};a.xAxis&&(b=DvtChartEventUtils._getAxisMinMax(a.xAxis,e.xMin,e.xMax,c),h=DvtChartEventUtils.getAxisStartEndGroup(a.xAxis,b.min,b.max));a.yAxis&&(d=DvtChartEventUtils._getAxisMinMax(a.yAxis,e.yMin,e.yMax,c));a.y2Axis&&(g=DvtChartEventUtils._getAxisMinMax(a.y2Axis,
e.yMin,e.yMax,c));return{xMin:b.min,xMax:b.max,yMin:d.min,yMax:d.max,y2Min:g.min,y2Max:g.max,startGroup:h.startGroup,endGroup:h.endGroup}};DvtChartEventUtils._getAxisMinMax=function(a,b,c,d){b=a.getUnboundedValueAt(b);c=a.getUnboundedValueAt(c);return d?(d=a.getMinimumExtent(),c-b<d&&(b=(c+b)/2,c=b+d/2,b-=d/2),DvtChartEventUtils._limitToGlobal(a,b,c)):{min:b,max:c}};
DvtChartEventUtils.getAxisBoundsByDelta=function(a,b,c,d,e){var b=DvtChartEventUtils._convertToAxisCoord(a,b,c,d,e),c={},d={},e={},g={};a.xAxis&&(c=DvtChartEventUtils._getAxisMinMaxByDelta(a.xAxis,b.xMin,b.xMax),g=DvtChartEventUtils.getAxisStartEndGroup(a.xAxis,c.min,c.max));a.yAxis&&(d=DvtChartEventUtils._getAxisMinMaxByDelta(a.yAxis,b.yMin,b.yMax));a.y2Axis&&(e=DvtChartEventUtils._getAxisMinMaxByDelta(a.y2Axis,b.yMin,b.yMax));return{xMin:c.min,xMax:c.max,yMin:d.min,yMax:d.max,y2Min:e.min,y2Max:e.max,
startGroup:g.startGroup,endGroup:g.endGroup}};DvtChartEventUtils._getAxisMinMaxByDelta=function(a,b,c){var d=a.getViewportMin(),e=a.getViewportMax();if(c==b&&a.isFullViewport())return{min:d,max:e};var g=a.getUnboundedValueAt(b)-a.getUnboundedValueAt(0),h=a.getUnboundedValueAt(c)-a.getUnboundedValueAt(0),k=1;b!=c&&e+h-(d+g)<a.getMinimumExtent()&&(k=(e-d-a.getMinimumExtent())/(g-h));return DvtChartEventUtils._limitToGlobal(a,d+g*k,e+h*k)};
DvtChartEventUtils._convertToAxisCoord=function(a,b,c,d,e){var g={},h=DvtAgent.isRightToLeft(a.getCtx());DvtChartTypeUtils.isHorizontal(a)?(g.xMin=d,g.xMax=e,g.yMin=h?c:b,g.yMin=h?b:c):(g.xMin=h?c:b,g.xMax=h?b:c,g.yMin=e,g.yMax=d);return g};DvtChartEventUtils._limitToGlobal=function(a,b,c){var d=a.getGlobalMin(),a=a.getGlobalMax();c-b>=a-d?(b=d,c=a):b<d?(c+=d-b,b=d):c>a&&(b-=c-a,c=a);return{min:b,max:c}};
DvtChartEventUtils.getAxisStartEndGroup=function(a,b,c){return a.isGroupAxis()&&(b=Math.ceil(b),c=Math.floor(c),c>=b)?(b=a.getGroupLabelAt(b),a=a.getGroupLabelAt(c),{startGroup:b,endGroup:a}):{startGroup:null,endGroup:null}};
DvtChartEventUtils.setInitialSelection=function(a,b){var c=a.getSelectionHandler();if(c){for(var d=a.getObjects(),e=[],g=0;g<b.length;g++)for(var h=0;h<d.length;h++){var k=d[h];k.getSeries()===b[g].series&&k.getGroup()===b[g].group&&e.push(k.getId())}c.processInitialSelections(e,d)}};var DvtChartRefObjUtils={};DvtObj.createSubclass(DvtChartRefObjUtils,DvtObj,"DvtChartRefObjUtils");
DvtChartRefObjUtils.getObjects=function(a){var b=DvtChartRefObjUtils.getXAxisObjects(a),c=DvtChartRefObjUtils.getYAxisObjects(a),a=DvtChartRefObjUtils.getY2AxisObjects(a);return b.concat(c,a)};DvtChartRefObjUtils.getXAxisObjects=function(a){return(a=a.getOptions())&&a.xAxis&&a.xAxis.referenceObjects?a.xAxis.referenceObjects:[]};DvtChartRefObjUtils.getYAxisObjects=function(a){return(a=a.getOptions())&&a.yAxis&&a.yAxis.referenceObjects?a.yAxis.referenceObjects:[]};
DvtChartRefObjUtils.getY2AxisObjects=function(a){return(a=a.getOptions())&&a.y2Axis&&a.y2Axis.referenceObjects?a.y2Axis.referenceObjects:[]};DvtChartRefObjUtils.getType=function(a){return"area"==a.type?"area":"line"};DvtChartRefObjUtils.getLocation=function(a){return"front"==a.location?"front":"back"};DvtChartRefObjUtils.getColor=function(a){return a.color?a.color:"#333333"};DvtChartRefObjUtils.getLineWidth=function(a){return a.lineWidth?a.lineWidth:1};var DvtChartSeriesEffectUtils={};
DvtObj.createSubclass(DvtChartSeriesEffectUtils,DvtObj,"DvtChartSeriesEffectUtils");
DvtChartSeriesEffectUtils.getBarFill=function(a,b,c,d,e){var g=DvtChartStyleUtils.getColor(a,b,c),b=DvtChartStyleUtils.getPattern(a,b,c),c=DvtChartStyleUtils.getSeriesEffect(a);if(b)return new DvtPatternFill(b,g);return"gradient"==c&&3<e?(d=d?270:0,DvtChartSeriesEffectUtils._useAltaGradients(a)?(a=[DvtColorUtils.adjustHSL(g,0,-0.09,0.04),DvtColorUtils.adjustHSL(g,0,-0.04,-0.05)],g=[0,1]):(a=[DvtColorUtils.getPastel(g,0.15),DvtColorUtils.getPastel(g,0.45),DvtColorUtils.getPastel(g,0.25),g,DvtColorUtils.getPastel(g,
0.15),DvtColorUtils.getDarker(g,0.9)],g=[0,0.15,0.3,0.65,0.85,1]),new DvtLinearGradientFill(d,a,null,g)):new DvtSolidFill(g)};
DvtChartSeriesEffectUtils.getAreaFill=function(a,b){var c=DvtChartStyleUtils.getColor(a,b),d=DvtChartStyleUtils.getPattern(a,b),e=DvtChartStyleUtils.getSeriesEffect(a);if(d)return new DvtPatternFill(d,c);return"gradient"==e?(DvtChartSeriesEffectUtils._useAltaGradients(a)?(c=[DvtColorUtils.adjustHSL(c,0,-0.09,0.04),DvtColorUtils.adjustHSL(c,0,-0.04,-0.05)],d=[0,1]):(c=DvtChartTypeUtils.isSpark(a)?[DvtColorUtils.getDarker(c,0.5),c,DvtColorUtils.getPastel(c,0.5)]:[DvtColorUtils.getPastel(c,0.5),c,DvtColorUtils.getDarker(c,
0.7)],d=[0,0.5,1]),new DvtLinearGradientFill(270,c,null,d)):new DvtSolidFill(c)};
DvtChartSeriesEffectUtils.getMarkerFill=function(a,b,c){var d=DvtChartStyleUtils.getMarkerColor(a,b,c),e=DvtChartStyleUtils.getPattern(a,b,c);if("bubble"==a.getType()){var g=DvtChartStyleUtils.getSeriesEffect(a);if(e)return new DvtPatternFill(e,d);if("gradient"==g){if(DvtChartSeriesEffectUtils._useAltaGradients(a))return colors=[DvtColorUtils.adjustHSL(d,0,-0.09,0.04),DvtColorUtils.adjustHSL(d,0,-0.04,-0.05)],stops=[0,1],new DvtLinearGradientFill(270,colors,null,stops);if("human"==DvtChartStyleUtils.getMarkerShape(a,
b,c))return a=[DvtColorUtils.getPastel(d,0.2),DvtColorUtils.getPastel(d,0.1),d,DvtColorUtils.getDarker(d,0.8)],new DvtLinearGradientFill(315,a,null,[0,0.3,0.7,1]);a=[DvtColorUtils.getPastel(d,0.15),d,DvtColorUtils.getDarker(d,0.9),DvtColorUtils.getDarker(d,0.8)];return new DvtRadialGradientFill(a,null,[0,0.5,0.75,1])}}return new DvtSolidFill(d)};
DvtChartSeriesEffectUtils.getFunnelSliceFill=function(a,b,c,d,e){var b=DvtChartStyleUtils.getPattern(a,b,0),g=DvtChartStyleUtils.getSeriesEffect(a);if(b&&!e)return d=new DvtPatternFill(b,c),"vertical"==a.getOptions().orientation&&(DvtAgent.isRightToLeft(a.getCtx())?d.setMatrix(new DvtMatrix(0,-1,1,0)):d.setMatrix(new DvtMatrix(0,1,-1,0))),d;return"gradient"==g?("on"==a.getOptions().styleDefaults.threeDEffect?(a=[DvtColorUtils.adjustHSL(c,0,0,-0.1),DvtColorUtils.adjustHSL(c,0,0,0.12),c],c=[0,0.65,
1]):(a=[DvtColorUtils.adjustHSL(c,0,-0.09,0.04),DvtColorUtils.adjustHSL(c,0,-0.04,-0.05)],c=[0,1]),new DvtLinearGradientFill(90,a,null,c,[d.x,d.y,d.w,d.h])):new DvtSolidFill(c)};DvtChartSeriesEffectUtils._useAltaGradients=function(a){return!DvtChartDefaults.isSkyrosSkin(a)};var DvtChartStyleUtils={};DvtObj.createSubclass(DvtChartStyleUtils,DvtObj,"DvtChartStyleUtils");DvtChartStyleUtils._SERIES_TYPE_RAMP=["bar","line","area"];
DvtChartStyleUtils.getSeriesType=function(a,b){if(DvtChartTypeUtils.isBar(a))return"bar";if(DvtChartTypeUtils.isLine(a))return"line";if(DvtChartTypeUtils.isArea(a))return"area";if(DvtChartTypeUtils.isCombo(a)){var c=DvtChartDataUtils.getSeriesItem(a,b),c=c?c.type:null;return!c||"auto"==c?(c=DvtChartDataUtils.getSeries(a,b),c=DvtChartDataUtils.getSeriesStyleIndex(a,c)%DvtChartStyleUtils._SERIES_TYPE_RAMP.length,DvtChartStyleUtils._SERIES_TYPE_RAMP[c]):c}return"auto"};
DvtChartStyleUtils.getSeriesEffect=function(a){return a.getOptions().styleDefaults.seriesEffect};DvtChartStyleUtils.getColor=function(a,b,c){if((c=DvtChartDataUtils.getDataItem(a,b,c))&&c.color||(c=DvtChartDataUtils.getSeriesItem(a,b))&&c.color)return c.color;var c=a.getOptions(),d=c.styleDefaults.colors,b=DvtChartDataUtils.getSeries(a,b),a=DvtChartDataUtils.getSeriesStyleIndex(a,b)%d.length;return c.styleDefaults.colors[a]};
DvtChartStyleUtils.getPattern=function(a,b,c){if(DvtChartTypeUtils.isLine(a)||DvtChartTypeUtils.isScatter(a)||"line"==DvtChartStyleUtils.getSeriesType(a,b))return null;if((c=DvtChartDataUtils.getDataItem(a,b,c))&&c.pattern&&"auto"!=c.pattern||(c=DvtChartDataUtils.getSeriesItem(a,b))&&c.pattern&&"auto"!=c.pattern)return c.pattern;if("pattern"==DvtChartStyleUtils.getSeriesEffect(a)){var c=a.getOptions(),d=c.styleDefaults.patterns,b=DvtChartDataUtils.getSeries(a,b),a=DvtChartDataUtils.getSeriesStyleIndex(a,
b)%d.length;return c.styleDefaults.patterns[a]}return null};
DvtChartStyleUtils.getBorderColor=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c);if(d&&d.borderColor||(d=DvtChartDataUtils.getSeriesItem(a,b))&&d.borderColor)return d.borderColor;d=a.getOptions();if("undefined"!=typeof d.styleDefaults.borderColor)return d.styleDefaults.borderColor;if("bubble"==a.getType()&&a.getOptions().skin==DvtCSSStyle.SKIN_ALTA&&"gradient"!=DvtChartStyleUtils.getSeriesEffect(a))return a=this.getMarkerColor(a,b,c),DvtColorUtils.adjustHSL(a,0,0.15,-0.25);return null};
DvtChartStyleUtils.getMarkerColor=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c);if(d&&d.color)return d.color;return(d=DvtChartDataUtils.getSeriesItem(a,b))&&d.markerColor?d.markerColor:(d=a.getOptions().styleDefaults.markerColor)?d:DvtChartStyleUtils.getColor(a,b,c)};
DvtChartStyleUtils.getMarkerShape=function(a,b,c){var d=a.getOptions(),e=d.styleDefaults.markerShape,g=DvtChartDataUtils.getSeriesItem(a,b);g&&g.markerShape&&(e=g.markerShape);(c=DvtChartDataUtils.getDataItem(a,b,c))&&c.markerShape&&(e=c.markerShape);"auto"==e&&("bubble"==a.getType()?e="circle":(b=DvtChartDataUtils.getSeries(a,b),a=DvtChartDataUtils.getSeriesStyleIndex(a,b),d=d.styleDefaults.shapes,e=d[a%d.length]));return e};
DvtChartStyleUtils.getMarkerSize=function(a,b,c){c=DvtChartDataUtils.getDataItem(a,b,c);b=DvtChartDataUtils.getSeriesItem(a,b);a=a.getOptions();c=c&&c.markerSize?c.markerSize:b&&b.markerSize?b.markerSize:a.styleDefaults.markerSize;a._isOverview&&(c=Math.ceil(0.6*c));return c};
DvtChartStyleUtils.getMarkerDisplayed=function(a,b,c){var d=a.getType();if("scatter"==d||"bubble"==d)return"on";return(c=DvtChartDataUtils.getDataItem(a,b,c))&&("on"===c.markerDisplayed||"off"===c.markerDisplayed)?c.markerDisplayed:(b=DvtChartDataUtils.getSeriesItem(a,b))&&("on"===b.markerDisplayed||"off"===b.markerDisplayed)?b.markerDisplayed:a.getOptions().styleDefaults.markerDisplayed};
DvtChartStyleUtils.getLineWidth=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b),d=a.getOptions(),c=c&&c.lineWidth?c.lineWidth:d.styleDefaults.lineWidth;d._isOverview&&(c=Math.ceil(0.6*c));return c};DvtChartStyleUtils.getLineStyle=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&c.lineStyle?c.lineStyle:a.getOptions().styleDefaults.lineStyle};DvtChartStyleUtils.getBarSpacing=function(a){return a.getOptions().__sparkBarSpacing};
DvtChartStyleUtils.getBarWidth=function(a,b,c){var d=a.getOptions(),e=DvtChartTypeUtils.isPolar(a),b=DvtChartTypeUtils.isStacked(a)?DvtChartTypeUtils.hasY2BarData(a)?2:1:b,g=d.styleDefaults.barGapRatio;"string"==typeof g&&"%"==g.slice(-1)&&(g=Number(g.slice(0,-1))/100);null==g&&(g=e?1==b||DvtChartTypeUtils.isStacked(a)?0:0.25:1==b?0.625:0.25);c=c.getGroupWidth()*(1-g)/b;d=d.styleDefaults.maxBarWidth;null!=d&&!e&&(c=Math.min(c,d));"pixel"==DvtChartStyleUtils.getBarSpacing(a)&&(c=Math.max(Math.floor(c),
1));return c};DvtChartStyleUtils.getBarOffset=function(a,b,c){c=-(b*c/2);if(DvtChartTypeUtils.isStacked(a)||DvtChartDataUtils.hasMixedFrequency(a))c=DvtChartTypeUtils.hasY2BarData(a)?DvtAgent.isRightToLeft(a.getCtx())?0:-b:-b/2;return c};DvtChartStyleUtils.getY2BarOffset=function(a,b){return DvtChartTypeUtils.isStacked(a)?DvtAgent.isRightToLeft(a.getCtx())?-b:b:0};DvtChartStyleUtils.getVisibility=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&c.visibility?c.visibility:"visible"};
DvtChartStyleUtils.isSeriesRendered=function(a,b){return"hidden"==DvtChartStyleUtils.getVisibility(a,b)?!1:!0};DvtChartStyleUtils.isDataItemRendered=function(a,b,c){if("hidden"==DvtChartStyleUtils.getVisibility(a,b))return!1;var d=DvtChartStyleUtils.getHiddenCategories(a),a=DvtChartDataUtils.getDataItem(a,b,c);if(0<d.length&&a&&a.categories)for(b=0;b<a.categories.length;b++)if(0<=DvtArrayUtils.getIndex(d,a.categories[b]))return!1;return!0};DvtChartStyleUtils.getAnimationOnDisplay=function(a){return a.getOptions().animationOnDisplay};
DvtChartStyleUtils.getAnimationOnDataChange=function(a){return a.getOptions().animationOnDataChange};DvtChartStyleUtils.getAnimationDuration=function(a){return a.getOptions().styleDefaults.animationDuration/1E3};DvtChartStyleUtils.getAnimationIndicators=function(a){return a.getOptions().styleDefaults.animationIndicators};DvtChartStyleUtils.getAnimationUpColor=function(a){return a.getOptions().styleDefaults.animationUpColor};DvtChartStyleUtils.getAnimationDownColor=function(a){return a.getOptions().styleDefaults.animationDownColor};
DvtChartStyleUtils.getHiddenCategories=function(a){a=a.getOptions();a._hiddenCategories||(a._hiddenCategories=[]);return a._hiddenCategories};DvtChartStyleUtils.getSelectedInnerColor=function(a){return a.getOptions().styleDefaults.selectedInnerColor};DvtChartStyleUtils.getSelectedOuterColor=function(a){return a.getOptions().styleDefaults.selectedOuterColor};
DvtChartStyleUtils.getDataLabelStyle=function(a,b,c,d,e){var g=[];d&&("bar"==DvtChartStyleUtils.getSeriesType(a,b)||DvtChartTypeUtils.isBubble(a))&&("center"==e||"inBottom"==e||"inTop"==e||"inRight"==e||"inLeft"==e)?(d=null!=DvtChartStyleUtils.getPattern(a,b,c)?"#000000":DvtColorUtils.getContrastingTextColor(d),g.push(new DvtCSSStyle("color: "+d+";"))):g.push(new DvtCSSStyle("color: #333333;"));g.push(a.getOptions().styleDefaults.dataLabelStyle);g.push(new DvtCSSStyle(DvtChartDataUtils.getDataItem(a,
b,c).labelStyle));return DvtCSSStyle.mergeStyles(g)};
DvtChartStyleUtils.getDataLabelPosition=function(a,b,c){var d=DvtChartDataUtils.getDataItem(a,b,c).labelPosition;d||(d=a.getOptions().styleDefaults.dataLabelPosition);var e=DvtAgent.isRightToLeft(a.getCtx());if("bar"==DvtChartStyleUtils.getSeriesType(a,b)){if(DvtChartTypeUtils.isPolar(a))return"center";if("insideBarEdge"!=d&&"center"!=d){if(DvtChartTypeUtils.isStacked(a))return"center";"outsideBarEdge"!=d&&(d="insideBarEdge")}b=0>DvtChartDataUtils.getValue(a,b,c);return"outsideBarEdge"==d?DvtChartTypeUtils.isHorizontal(a)?
!b&&!e||b&&e?"right":"left":b?"below":"above":"insideBarEdge"==d?DvtChartTypeUtils.isHorizontal(a)?!b&&!e||b&&e?"inRight":"inLeft":b?"inBottom":"inTop":"center"}if("belowMarker"==d)return"below";if("aboveMarker"==d)return"above";if("afterMarker"!=d&&"beforeMarker"!=d&&"center"!=d){if(DvtChartTypeUtils.isBubble(a))return"center";d="afterMarker"}return!e&&"afterMarker"==d||e&&"beforeMarker"==d?"right":!e&&"beforeMarker"==d||e&&"afterMarker"==d?"left":"center"};
DvtChartStyleUtils.isOverviewRendered=function(a){var b=a.getOptions();return DvtChartTypeUtils.isOverviewSupported(a)&&"off"!=b.overview.rendered};DvtChartStyleUtils.getOverviewHeight=function(a){var b=a.getOptions(),c=b.overview.height;if(null!=c&&("string"==typeof c&&(c="%"==c.slice(-1)?a.getHeight()*Number(c.slice(0,-1))/100:"px"==c.slice(-2)?Number(c.slice(0,-2)):Number(c)),!isNaN(c)&&0<c))return c;b="disabled"==b.timeAxisType?0.2:0.25;return a.getHeight()*b};var DvtChartTextUtils={};
DvtObj.createSubclass(DvtChartTextUtils,DvtObj,"DvtChartTextUtils");DvtChartTextUtils.createText=function(a,b,c,d,e,g,h,k,m){c=new DvtOutputText(b.getCtx(),c,e,g);c.setCSSStyle(d);return DvtTextUtils.fitText(c,h,k,b)?(a.associate(c,new DvtSimpleObjPeer(c.getUntruncatedTextString(),null,null,m)),c):null};var DvtChartTooltipUtils={};DvtObj.createSubclass(DvtChartTooltipUtils,DvtObj,"DvtChartTooltipUtils");DvtChartTooltipUtils._TYPE_X="x";DvtChartTooltipUtils._TYPE_Y="y";
DvtChartTooltipUtils._TYPE_Y2="y2";DvtChartTooltipUtils._TYPE_Z="z";DvtChartTooltipUtils._TYPE_VALUE="value";DvtChartTooltipUtils._TYPE_TARGET_VALUE="targetValue";DvtChartTooltipUtils.hasDatatips=function(a){a=a.getOptions();return"none"==a.styleDefaults.seriesTooltipType&&"none"==a.styleDefaults.groupTooltipType&&"none"==a.styleDefaults.valueTooltipType?!1:!0};DvtChartTooltipUtils.getDatatipColor=function(a,b,c){return DvtChartStyleUtils.getColor(a,b,c)};
DvtChartTooltipUtils.getDatatip=function(a,b,c,d){if(0>c||0>d)return null;if((a=DvtChartDataUtils.getDataItem(b,c,d))&&a.shortDesc)return a.shortDesc;a=[];DvtChartTooltipUtils._addSeriesStrings(a,b,c,d);DvtChartTooltipUtils._addGroupStrings(a,b,c,d);DvtChartTooltipUtils._addValueStrings(a,b,c,d);return DvtChartTooltipUtils._convertLinesToString(a)};
DvtChartTooltipUtils.getOtherSliceDatatip=function(a,b,c){if(0>c)return null;var d=[],e=a.getOptions(),g=a.getBundle();if("none"!=e.styleDefaults.seriesTooltipType){var h=g.getTranslatedString("LABEL_OTHER",null);d.push(h)}DvtChartTooltipUtils._addGroupStrings(d,a,0,c);"none"!=e.styleDefaults.valueTooltipType&&(a=DvtChartTooltipUtils._formatValue(e.valueFormats,DvtChartTooltipUtils._TYPE_VALUE,b),g=g.getTranslatedString("LABEL_VALUE",a),d.push(g));return DvtChartTooltipUtils._convertLinesToString(d)};
DvtChartTooltipUtils.getRefObjTooltip=function(a,b){if(b.shortDesc)return b.shortDesc};DvtChartTooltipUtils._addSeriesStrings=function(a,b,c){if("none"!=b.getOptions().styleDefaults.seriesTooltipType){var d=b.getBundle();if(c=DvtChartDataUtils.getSeriesLabel(b,c))"funnel"==b.getType()?a.push(c):(b=d.getTranslatedString("LABEL_SERIES",c),a.push(b))}};
DvtChartTooltipUtils._addGroupStrings=function(a,b,c,d){var e=b.getOptions(),g=DvtChartDataUtils.getDataItem(b,c,d);if(!("none"==e.styleDefaults.groupTooltipType||DvtChartTypeUtils.isPie(b)))if(c=b.getBundle(),b=e.timeAxisType&&"disabled"!=e.timeAxisType?b.xAxis.__getInfo().formatLabel(g.x):DvtChartDataUtils.getGroupLabel(b,d))b=c.getTranslatedString("LABEL_GROUP",b),a.push(b)};
DvtChartTooltipUtils._addValueStrings=function(a,b,c,d){var e=b.getOptions();if("none"!=e.styleDefaults.valueTooltipType){var g=b.getBundle(),h=DvtChartDataUtils.getDataItem(b,c,d),e=e.valueFormats;if("scatter"==b.getType()||"bubble"==b.getType())d=h.x,c=h.y,d=DvtChartTooltipUtils._formatValue(e,DvtChartTooltipUtils._TYPE_X,d),c=DvtChartTooltipUtils._formatValue(e,DvtChartTooltipUtils._TYPE_Y,c),d=g.getTranslatedString("LABEL_X",d),c=g.getTranslatedString("LABEL_Y",c),a.push(d),a.push(c),"bubble"==
b.getType()&&(b=h.z,b=DvtChartTooltipUtils._formatValue(e,DvtChartTooltipUtils._TYPE_Z,b),g=g.getTranslatedString("LABEL_Z",b),a.push(g));else if("pie"==b.getType())h=DvtChartDataUtils.getValue(b,c,d),h=DvtChartTooltipUtils._formatValue(e,DvtChartTooltipUtils._TYPE_VALUE,h),h=g.getTranslatedString("LABEL_VALUE",h),a.push(h);else if("funnel"==b.getType()){if(h=DvtChartDataUtils.getValue(b,c,d),h=DvtChartTooltipUtils._formatValue(e,DvtChartTooltipUtils._TYPE_VALUE,h),h=g.getTranslatedString("LABEL_VALUE",
h),a.push(h),b=DvtChartDataUtils.getTargetValue(b,c))b=DvtChartTooltipUtils._formatValue(e,DvtChartTooltipUtils._TYPE_TARGET_VALUE,b),g=g.getTranslatedString("LABEL_TARGET_VALUE",b),a.push(g)}else h=DvtChartDataUtils.getValue(b,c,d),b=DvtChartDataUtils.isAssignedToY2(b,c)?DvtChartTooltipUtils._TYPE_Y2:DvtChartTooltipUtils._TYPE_Y,h=DvtChartTooltipUtils._formatValue(e,b,h),g=g.getTranslatedString("LABEL_VALUE",h),a.push(g)}};
DvtChartTooltipUtils._convertLinesToString=function(a){for(var b="",c=0;c<a.length;c++)0<b.length&&(b+="\n"),b+=a[c];return b};DvtChartTooltipUtils._formatValue=function(a,b,c,d,e,g){var h="auto",k="on",m;if(a)for(var n=0;n<a.length;n++)if(a[n].type==b){a[n].scaling&&(h=a[n].scaling);a[n].autoPrecision&&(k=a[n].autoPrecision);a[n].converter&&(m=a[n].converter);break}a=new DvtLinearScaleAxisValueFormatter(null!=d?d:c,null!=e?e:c,null!=g?g:0,h,k);return m&&(m.getAsString||m.format)?a.format(c,m):a.format(c)};
var DvtChartTypeUtils={};DvtObj.createSubclass(DvtChartTypeUtils,DvtObj,"DvtChartTypeUtils");DvtChartTypeUtils.isSpark=function(a){return a.getOptions().__spark};DvtChartTypeUtils.isCombo=function(a){return"combo"==a.getType()};DvtChartTypeUtils.isVertical=function(a){return!DvtChartTypeUtils.isHorizontal(a)&&!DvtChartTypeUtils.isPolar(a)};DvtChartTypeUtils.isHorizontal=function(a){return"horizontal"==a.getOptions().orientation&&!DvtChartTypeUtils.isPolar(a)&&(DvtChartTypeUtils.isBLAC(a)||DvtChartTypeUtils.isFunnel(a))};
DvtChartTypeUtils.isPolar=function(a){return"polar"==a.getOptions().coordinateSystem};DvtChartTypeUtils.isStacked=function(a){return"on"!=a.getOptions().stack||DvtChartDataUtils.hasMixedFrequency(a)?!1:DvtChartTypeUtils.isBLAC(a)};DvtChartTypeUtils.isBar=function(a){return"bar"==a.getType()};DvtChartTypeUtils.isLine=function(a){return"line"==a.getType()};DvtChartTypeUtils.isArea=function(a){return"area"==a.getType()};DvtChartTypeUtils.isScatter=function(a){return"scatter"==a.getType()};
DvtChartTypeUtils.isBubble=function(a){return"bubble"==a.getType()};DvtChartTypeUtils.isPie=function(a){return"pie"==a.getType()};DvtChartTypeUtils.isFunnel=function(a){return"funnel"==a.getType()};DvtChartTypeUtils.isDualY=function(a){return!DvtChartTypeUtils.hasAxes(a)||DvtChartTypeUtils.isScatterBubble(a)||DvtChartTypeUtils.isPolar(a)?!1:!0};DvtChartTypeUtils.isBLAC=function(a){a=a.getType();return"bar"==a||"line"==a||"area"==a||"combo"==a};
DvtChartTypeUtils.isScatterBubble=function(a){a=a.getType();return"scatter"==a||"bubble"==a};DvtChartTypeUtils.isTimeAxisSupported=function(a){return DvtChartTypeUtils.isBLAC(a)&&!DvtChartTypeUtils.isPolar(a)};DvtChartTypeUtils.isScrollSupported=function(a){return!DvtChartTypeUtils.isPie(a)&&!DvtChartTypeUtils.isFunnel(a)&&!DvtChartTypeUtils.isPolar(a)};DvtChartTypeUtils.isOverviewSupported=function(a){return DvtChartTypeUtils.isBLAC(a)&&DvtChartTypeUtils.isVertical(a)};
DvtChartTypeUtils.isHorizScrollbarSupported=function(a){return DvtChartTypeUtils.isPolar(a)?!1:DvtChartTypeUtils.isBLAC(a)&&DvtChartTypeUtils.isVertical(a)||DvtChartTypeUtils.isScatterBubble(a)};DvtChartTypeUtils.isVertScrollbarSupported=function(a){return DvtChartTypeUtils.isPolar(a)?!1:DvtChartTypeUtils.isBLAC(a)&&DvtChartTypeUtils.isHorizontal(a)||DvtChartTypeUtils.isScatterBubble(a)};DvtChartTypeUtils.hasAxes=function(a){return!("pie"==a.getType()||"funnel"==a.getType())};
DvtChartTypeUtils.hasY2DataOnly=function(a){if(!DvtChartTypeUtils.isDualY(a))return!1;a.getOptions();var b=DvtChartDataUtils.getSeriesCount(a);if(0==b)return!1;for(var c=0;c<b;c++)if(!DvtChartDataUtils.isAssignedToY2(a,c))return!1;return!0};DvtChartTypeUtils.hasY2Data=function(a,b){if(!DvtChartTypeUtils.isDualY(a))return!1;a.getOptions();for(var c=DvtChartDataUtils.getSeriesCount(a),d=0;d<c;d++)if(!(b&&DvtChartStyleUtils.getSeriesType(a,d)!=b)&&DvtChartDataUtils.isAssignedToY2(a,d))return!0;return!1};
DvtChartTypeUtils.hasY2BarData=function(a){return DvtChartTypeUtils.hasY2Data(a,"bar")};DvtChartTypeUtils.hasBarSeries=function(a){if(DvtChartTypeUtils.isBar(a))return!0;if(DvtChartTypeUtils.isCombo(a))for(var b=DvtChartDataUtils.getSeriesCount(a),c=0;c<b;c++)if(DvtChartStyleUtils.isSeriesRendered(a,c)&&"bar"==DvtChartStyleUtils.getSeriesType(a,c))return!0;return!1};var DvtChartMarkerUtils={};DvtObj.createSubclass(DvtChartMarkerUtils,DvtObj,"DvtChartMarkerUtils");DvtChartMarkerUtils._MIN_RADIUS=5;
DvtChartMarkerUtils._MAX_RADIUS_PERCENT=0.125;DvtChartMarkerUtils._DEFAULT_MARKER_SIZE_PERCENT=0.2;
DvtChartMarkerUtils.calcBubbleSizes=function(a,b,c){var d=DvtChartDataUtils.getMinMaxValue(a,"z"),e=d.min,g=d.max,h=a.getOptions(),d=DvtChartDataUtils.getMinMaxValue(a,"x"),k=h.xAxis.min?h.xAxis.min:Math.min(0,d.min),d=(h.xAxis.max?h.xAxis.max:Math.max(0,d.max))-k,k=DvtChartDataUtils.getMinMaxValue(a,"y"),m=h.yAxis.min?h.yAxis.min:Math.min(0,k.min),k=(h.yAxis.max?h.yAxis.max:Math.max(0,k.max))-m;DvtChartTypeUtils.isPolar(a)?(m=Infinity,h=a.getRadius()):(m=(1-h.layout.axisMaxSize)*b,h=(1-h.layout.axisMaxSize)*
c);for(var n=Math.PI*Math.pow(DvtChartMarkerUtils._MIN_RADIUS,2),b=DvtChartMarkerUtils._MAX_RADIUS_PERCENT*Math.min(b,c),b=Math.PI*Math.pow(b,2),b=DvtChartMarkerUtils._adjustBubbleSizeRangeForCount(a,n,b,e,g),n=b.minArea,b=b.maxArea,b=DvtChartMarkerUtils._adjustBubbleSizeRangeForDataRange(a,n,b,e,g),n=b.minArea,b=b.maxArea,g=g-e,b=b-n,c=DvtChartDataUtils.getSeriesCount(a),o=0;o<c;o++)for(var s=DvtChartDataUtils.getSeriesItem(a,o),t=s.items?s.items.length:0,u=0;u<t;u++){var v=s.items[u];v&&v.z&&(1===
c&&1===t?(v.markerSize=DvtChartMarkerUtils._DEFAULT_MARKER_SIZE_PERCENT*Math.min(m,h),d=0===d?100:d,k=0===k?100:k):v.markerSize=2*Math.sqrt((n+(v.z-e)/g*b)/Math.PI),v._xAxisRadius=0.5*(v.markerSize/m)*d,v._yAxisRadius=0.5*(v.markerSize/h)*k)}};DvtChartMarkerUtils.sortMarkers=function(a){a.sort(DvtChartMarkerUtils._compareSize)};DvtChartMarkerUtils._compareSize=function(a,b){var c=a.getSize(),d=b.getSize();return c>d?-1:c<d?1:0};
DvtChartMarkerUtils._adjustBubbleSizeRangeForCount=function(a,b,c,d,e){for(var g=0,h=0,k=DvtChartDataUtils.getSeriesCount(a),m=0;m<k;m++)for(var n=DvtChartDataUtils.getSeriesItem(a,m),o=n.items.length,s=0;s<o;s++){var t=n.items[m];t&&t.z&&(g++,h+=t.z)}a=(h/g-d)/(e-d);d=15+Math.floor(30*(1-a));e=30+Math.floor(150*(1-a));g>=e?c=b+0.15*(c-b):g>=d&&(c-=0.85/(e-d)*(g-d)*(c-b));d=5+Math.floor(15*(1-a));a=30+Math.floor(70*(1-a));g<d?b+=0.0050*(c-b):g<a&&(b+=(0.0050-0.0050/(a-d)*(g-d))*(c-b));return{minArea:b,
maxArea:c}};DvtChartMarkerUtils._adjustBubbleSizeRangeForDataRange=function(a,b,c,d,e){if(0!=e-d){var g=a=c/b;0<e&&0<d?g=e/d:0>d&&0>e&&(g=d/e);g<a&&(d=c/g-b,0<d&&(b+=d))}else b=c;return{minArea:b,maxArea:c}};var DvtPieChartUtils={};DvtObj.createSubclass(DvtPieChartUtils,DvtObj,"DvtPieChartUtils");DvtPieChartUtils.OTHER_SLICE_SERIES_ID="_dvtOther";
DvtPieChartUtils.getSliceId=function(a,b){var c=DvtChartDataUtils.getDataItem(a,b,0),c=c?c.id:null,d=DvtChartDataUtils.getSeries(a,b),e=DvtChartDataUtils.getGroup(a,0);return new DvtChartDataItem(c,d,e)};DvtPieChartUtils.getOtherSliceId=function(a){a=DvtChartDataUtils.getGroup(a,0);return new DvtChartDataItem(null,DvtPieChartUtils.OTHER_SLICE_SERIES_ID,a)};DvtPieChartUtils.getRenderedSeriesIndices=function(a){return DvtPieChartUtils._getSeriesIndicesArrays(a).rendered};
DvtPieChartUtils.hasOtherSeries=function(a){return 0<DvtPieChartUtils._getSeriesIndicesArrays(a).other.length};DvtPieChartUtils.getOtherValue=function(a){for(var b=DvtPieChartUtils._getSeriesIndicesArrays(a).other,c=0,d=0;d<b.length;d++){var e=b[d];DvtChartStyleUtils.isSeriesRendered(a,e)&&(e=DvtChartDataUtils.getValue(a,e,0),0<e&&(c+=e))}return c};
DvtPieChartUtils.getOtherSliceIds=function(a){for(var b=DvtPieChartUtils._getSeriesIndicesArrays(a).other,c=[],d=0;d<b.length;d++)c.push(DvtPieChartUtils.getSliceId(a,b[d]));return c};DvtPieChartUtils.getOtherSliceVisibility=function(a){for(var b=DvtPieChartUtils._getSeriesIndicesArrays(a).other,c=0;c<b.length;c++)if(DvtChartStyleUtils.isSeriesRendered(a,b[c]))return"visible";return"hidden"};
DvtPieChartUtils.setOtherSliceVisibility=function(a,b){for(var c=DvtPieChartUtils._getSeriesIndicesArrays(a).other,d=0;d<c.length;d++)DvtChartDataUtils.getSeriesItem(a,c[d]).visibility=b};DvtPieChartUtils.isOtherSliceSelected=function(a,b){for(var c=DvtPieChartUtils.getOtherSliceIds(a),d=0;d<c.length;d++){for(var e=c[d],g=!1,h=0;h<b.length;h++)if(b[h].id&&e.getId()===b[h].id||e.getSeries()===b[h].series&&e.getGroup()===b[h].group){g=!0;break}if(!g)return!1}return!0};
DvtPieChartUtils._getSeriesIndicesArrays=function(a){for(var b=[],c=[],d=DvtChartDataUtils.getSeriesCount(a),e=a.getOptions(),g=e.otherThreshold*DvtPieChartUtils.getTotalValue(a),h=0;h<d;h++){var k=DvtChartDataUtils.getValue(a,h,0);0<g&&k<g?c.push(h):b.push(h)}"on"==e.sorting&&b.sort(function(b,c){return DvtChartDataUtils.getValue(a,c,0)-DvtChartDataUtils.getValue(a,b,0)});return{rendered:b,other:c}};
DvtPieChartUtils.getTotalValue=function(a){for(var b=DvtChartDataUtils.getSeriesCount(a),c=0,d=0;d<b;d++){var e=DvtChartDataUtils.getValue(a,d,0);0<e&&(c+=e)}return c};DvtPieChartUtils.getSliceExplode=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b);return c&&c.pieSliceExplode?c.pieSliceExplode:0};
DvtPieChartUtils.getOtherSliceShowPopupBehaviors=function(a){var b=DvtPieChartUtils.getOtherSliceIds(a);if(b&&1<=b.length)return b=DvtChartDataUtils.getSeriesIndex(a,b[0].getSeries()),b=DvtChartDataUtils.getDataItem(a,b,0)._id,a.getShowPopupBehaviors(b)};var DvtPieRenderUtils=function(){};DvtObj.createSubclass(DvtPieRenderUtils,DvtObj,"DvtPieRenderUtils");DvtPieRenderUtils.TWOD="2D";DvtPieRenderUtils.THREED="3D";DvtPieRenderUtils.CRUST="CRUST";DvtPieRenderUtils.SIDE="SIDE";
DvtPieRenderUtils.BORDER="BORDER";DvtPieRenderUtils.SURFACE_CRUST=0;DvtPieRenderUtils.SURFACE_LEFT=1;DvtPieRenderUtils.SURFACE_RIGHT=2;DvtPieRenderUtils.SURFACE_TOP=3;DvtPieRenderUtils.reflectAngleOverYAxis=function(a,b,c,d,e){var g=DvtMath.degreesToRads(360-a),a=Math.cos(g),g=Math.sin(g);return{x:b+a*d,y:c+g*e}};
DvtPieRenderUtils.getGradientColors=function(a,b,c){if(c&&c!=DvtCSSStyle.SKIN_SKYROS){if(b==DvtPieRenderUtils.TWOD||b==DvtPieRenderUtils.THREED)return[DvtColorUtils.adjustHSL(a,0,-0.04,-0.05),DvtColorUtils.adjustHSL(a,0,-0.09,0.04)];if(b==DvtPieRenderUtils.CRUST)return[DvtColorUtils.adjustHSL(a,0,-0.04,-0.05),DvtColorUtils.adjustHSL(a,0,0,-0.14)];if(b==DvtPieRenderUtils.SIDE)return[DvtColorUtils.adjustHSL(a,0,-0.1,0.06),DvtColorUtils.adjustHSL(a,0,-0.04,-0.05)]}else{if(b==DvtPieRenderUtils.TWOD)return b=
[],b[0]=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,0.1)),b[1]=b[0],b[2]=DvtColorUtils.getRGB(DvtColorUtils.getDarker(a,0.9)),b;if(b==DvtPieRenderUtils.BORDER)return["#FFFFFF","#000000","#000000"];var c=DvtColorUtils.getRGB(DvtColorUtils.getDarker(a,0.88)),d=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,0.05)),e=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,0.15)),a=DvtColorUtils.getRGB(DvtColorUtils.getPastel(a,0.35));if(b==DvtPieRenderUtils.CRUST)return[c,e,a,c];if("SIDE"==b)return[c,a];if("3D"==
b)return[a,e,c,d,a]}};DvtPieRenderUtils.getGradientAlphas=function(a,b){var c=null==a||isNaN(a)||0==a?1:a;if(b==DvtPieRenderUtils.TWOD)return[c,c,c];if(b==DvtPieRenderUtils.BORDER)return[c/1.59375,c/5.3125,c/2.65625];if(b==DvtPieRenderUtils.THREED)return[c,c,c,c,c];if(b==DvtPieRenderUtils.CRUST)return[c,c,c,c];if(b==DvtPieRenderUtils.SIDE)return[c,c]};
DvtPieRenderUtils.getGradientRatios=function(a,b){if(b&&b!=DvtCSSStyle.SKIN_SKYROS)return[0,1];if(a==DvtPieRenderUtils.TWOD)return[0.2,0.5,1];if(a==DvtPieRenderUtils.BORDER)return[0,0.5,1];if(a==DvtPieRenderUtils.THREED)return[0,0.29,0.55,0.84,1];if(a==DvtPieRenderUtils.CRUST)return[0,0.43,0.91,1];if(a==DvtPieRenderUtils.SIDE)return[0,1]};
DvtPieRenderUtils.createTopSurface=function(a,b){var c=a.getPieChart(),d=c.getCtx(),e=c.getCenter(),g=DvtArc.PIE;360==a.getAngleExtent()&&(g=DvtArc.OPEN);d=new DvtGraphSelectableArc(d,e.x,e.y,a._radiusX,a._radiusY,a.getAngleStart(),a.getAngleExtent(),g);d.setDataColor(a.getFillColor(),DvtChartStyleUtils.getSelectedInnerColor(c.chart),DvtChartStyleUtils.getSelectedOuterColor(c.chart));d.setTranslate(a.__getExplodeOffsetX(),a.__getExplodeOffsetY());d.setFill(b);a.getStrokeColor()&&d.setSolidStroke(a.getStrokeColor());
d.setAriaRole("img");e=a.getTooltip();d.setAriaProperty("label",e);d=[d];if(!a.getStrokeColor()&&c.getSkin()==DvtCSSStyle.SKIN_SKYROS&&c.is3D()&&0<c.getDepth()&&"gradient"==DvtChartStyleUtils.getSeriesEffect(c.chart)&&(180<=a.getAngleStart()||180<=a.getAngleStart()+a.getAngleExtent()||360==a.getAngleExtent()))c=DvtPieRenderUtils._createGradientPieBorder(a,b),c.setTranslate(a.__getExplodeOffsetX(),a.__getExplodeOffsetY()),d.push(c);DvtPieRenderUtils.associate(a,d);return d};
DvtPieRenderUtils.associate=function(a,b){if(b)for(var c=0;c<b.length;c++)a.getPieChart().chart.getEventManager().associate(b[c],a)};
DvtPieRenderUtils._createGradientPieBorder=function(a,b){var c=DvtPieRenderUtils.BORDER,d=DvtPieRenderUtils.getGradientColors(null,c),e=DvtPieRenderUtils.getGradientAlphas(null,c),c=DvtPieRenderUtils.getGradientRatios(c),g=b.getBounds();grAngle=120;d=new DvtLinearGradientStroke(grAngle,d,e,c,g);d.setWidth(1);e=a.getAngleStart();c=a.getAngleExtent();g=180>e?180-e:0;e=0<g?180:e;c-=g;360<e+c&&(c=360-e);var g=a.getPieChart(),h=g.getCenter(),e=new DvtArc(g.getCtx(),h.x,h.y,g.getRadiusX(),g.getRadiusY(),
e,c,DvtArc.OPEN);e.setStroke(d);return e};
DvtPieRenderUtils.createLateralSurface=function(a,b,c){if(0==a.getAngleExtent())return[];var d=[];if(0<DvtColorUtils.getAlpha(a.getFillColor()))if(b==DvtPieRenderUtils.SURFACE_LEFT||b==DvtPieRenderUtils.SURFACE_RIGHT)d.push(DvtPieRenderUtils._generateLateralShape(a,b,null,c));else if(b==DvtPieRenderUtils.SURFACE_CRUST)for(var e=DvtPieRenderUtils._createCrustPathCommands(a),g=e.length,h=0;h<g;h++)d.push(DvtPieRenderUtils._generateLateralShape(a,b,e[h],c));DvtPieRenderUtils.associate(a,d);return d};
DvtPieRenderUtils.generateLateralGradientFill=function(a,b){var c=a.getPieChart(),d=c.getSkin(),e=b==DvtPieRenderUtils.CRUST?c.getDepth():0,g=d==DvtCSSStyle.SKIN_SKYROS?0:270,h=DvtPieRenderUtils.getGradientColors(DvtColorUtils.getRGB(a.getFillColor()),b,d),k=DvtPieRenderUtils.getGradientAlphas(DvtColorUtils.getAlpha(a.getFillColor()),b),m=DvtPieRenderUtils.getGradientRatios(b,d),n=null;d==DvtCSSStyle.SKIN_SKYROS&&(n=[Math.floor(c.getCenter().x-c.getRadiusX()),Math.floor(c.getCenter().y-c.getRadiusY())+
e,Math.ceil(2*c.getRadiusX()),Math.ceil(2*c.getRadiusY())]);return new DvtLinearGradientFill(g,h,k,m,n)};
DvtPieRenderUtils._generateLateralShape=function(a,b,c,d){var e=a.getPieChart(),g=e.getCtx();if(b==DvtPieRenderUtils.SURFACE_LEFT||b==DvtPieRenderUtils.SURFACE_RIGHT){for(var h=a.getAngleStart(),k=a.getAngleExtent(),c=e.getCenter().x,m=e.getCenter().y,n=a._radiusX,o=a._radiusY,s=e.getDepth(),b=b==DvtPieRenderUtils.SURFACE_LEFT?DvtPieRenderUtils.reflectAngleOverYAxis(h+k,c,m,n,o):DvtPieRenderUtils.reflectAngleOverYAxis(h,c,m,n,o),b=DvtPieRenderUtils._generateInnerPoints(c,m,b.x,b.y,s),c=[],m=0;m<b.length;m++)c.push(b[m].x,
b[m].y);g=new DvtGraphSelectablePolygon(g,c);g.setDataColor(a.getFillColor(),DvtChartStyleUtils.getSelectedInnerColor(e.chart),DvtChartStyleUtils.getSelectedOuterColor(e.chart));g.setTranslate(a.__getExplodeOffsetX(),a.__getExplodeOffsetY());g.setFill(d);a.getStrokeColor()&&g.setSolidStroke(a.getStrokeColor());return g}return c?(g=new DvtGraphSelectablePath(g,null),g.setDataColor(a.getFillColor(),DvtChartStyleUtils.getSelectedInnerColor(e.chart),DvtChartStyleUtils.getSelectedOuterColor(e.chart)),
g.setCmds(c),g.setTranslate(a.__getExplodeOffsetX(),a.__getExplodeOffsetY()),g.setFill(d),a.getStrokeColor()&&g.setSolidStroke(a.getStrokeColor()),g):null};
DvtPieRenderUtils._createCrustPathCommands=function(a){var b=a.getAngleStart(),c=a.getAngleExtent(),d=b+c,e=a.getPieChart(),g=e.getCenter().x,h=e.getCenter().y,k=a._radiusX,a=a._radiusY,e=e.getDepth(),m=[];180>b&&360<d?(m.push(DvtPieRenderUtils._makeOuterPath(g,h,k,a,e,b,180-b)),m.push(DvtPieRenderUtils._makeOuterPath(g,h,k,a,e,360,d-360)),m.push(DvtPieRenderUtils._makeOuterPath(g,h,k,a,e,180,180))):360<d?(m.push(DvtPieRenderUtils._makeOuterPath(g,h,k,a,e,b,360-b)),m.push(DvtPieRenderUtils._makeOuterPath(g,
h,k,a,e,360,d-360))):180>b&&180<d?(m.push(DvtPieRenderUtils._makeOuterPath(g,h,k,a,e,b,180-b)),m.push(DvtPieRenderUtils._makeOuterPath(g,h,k,a,e,180,d-180))):m.push(DvtPieRenderUtils._makeOuterPath(g,h,k,a,e,b,c));return m};
DvtPieRenderUtils._makeOuterPath=function(a,b,c,d,e,g,h){var h=DvtMath.degreesToRads(h),k=-(DvtMath.degreesToRads(g)+h),b=b-1,g=DvtPieRenderUtils.reflectAngleOverYAxis(g,a,b,c,d),a=a+Math.cos(k)*c,b=b+Math.sin(k)*d,k=DvtPathUtils.moveTo(g.x,g.y),k=k+DvtPathUtils.arcTo(c,d,h,0,a,b),k=k+DvtPathUtils.lineTo(a,b+e),k=k+DvtPathUtils.arcTo(c,d,h,1,g.x,g.y+e);return k+=DvtPathUtils.lineTo(g.x,g.y)};
DvtPieRenderUtils._generateInnerPoints=function(a,b,c,d,e){var g=[];g.push({x:a,y:b});g.push({x:c,y:d});g.push({x:c,y:d+e});g.push({x:a,y:b+e});return g};var DvtPieLabelInfo=function(){this._init()};DvtObj.createSubclass(DvtPieLabelInfo,DvtObj,"DvtPieLabelInfo");DvtPieLabelInfo.prototype._init=function(){this._slice=this._sliceLabel=null;this._initialNumLines=this._y=this._x=this._height=this._width=this._position=this._angle=-1;this._hasFeeler=!1;this._minY=this._maxY=-1};
DvtPieLabelInfo.prototype.getAngle=function(){return this._angle};DvtPieLabelInfo.prototype.setAngle=function(a){this._angle=a};DvtPieLabelInfo.prototype.getHeight=function(){return this._height};DvtPieLabelInfo.prototype.setHeight=function(a){this._height=a};DvtPieLabelInfo.prototype.getInitialNumLines=function(){return this._initialNumLines};DvtPieLabelInfo.prototype.setInitialNumLines=function(a){this._initialNumLines=a};DvtPieLabelInfo.prototype.getMaxY=function(){return this._maxY};
DvtPieLabelInfo.prototype.setMaxY=function(a){this._maxY=a};DvtPieLabelInfo.prototype.getMinY=function(){return this._minY};DvtPieLabelInfo.prototype.setMinY=function(a){this._minY=a};DvtPieLabelInfo.prototype.boundY=function(a){a=Math.max(a,this._minY);return a=Math.min(a,this._maxY)};DvtPieLabelInfo.prototype.hasFeeler=function(){return this._hasFeeler};DvtPieLabelInfo.prototype.setHasFeeler=function(a){this._hasFeeler=a};DvtPieLabelInfo.prototype.getPosition=function(){return this._position};
DvtPieLabelInfo.prototype.setPosition=function(a){this._position=a};DvtPieLabelInfo.prototype.getSlice=function(){return this._slice};DvtPieLabelInfo.prototype.setSlice=function(a){this._slice=a};DvtPieLabelInfo.prototype.getSliceLabel=function(){return this._sliceLabel};DvtPieLabelInfo.prototype.setSliceLabel=function(a){this._sliceLabel=a};DvtPieLabelInfo.prototype.getWidth=function(){return this._width};DvtPieLabelInfo.prototype.setWidth=function(a){this._width=a};
DvtPieLabelInfo.prototype.getX=function(){return this._x};DvtPieLabelInfo.prototype.setX=function(a){this._x=a};DvtPieLabelInfo.prototype.getY=function(){return this._y};DvtPieLabelInfo.prototype.setY=function(a){this._y=a};var DvtPieLabelUtils=function(){};DvtObj.createSubclass(DvtPieLabelUtils,DvtObj,"DvtPieLabelUtils");DvtPieLabelUtils._MAX_LINES_PER_LABEL=3;DvtPieLabelUtils._COLLISION_MARGIN=1;DvtPieLabelUtils._LEFT_SIDE_LABELS=1;DvtPieLabelUtils._RIGHT_SIDE_LABELS=2;
DvtPieLabelUtils._OUTSIDE_LABEL_DISTANCE=0.04;DvtPieLabelUtils._FEELER_RAD_MINSIZE=0.1;DvtPieLabelUtils._FEELER_HORIZ_MINSIZE=0.1;DvtPieLabelUtils._LABEL_TO_FEELER_OFFSET=0.5;DvtPieLabelUtils._LABEL_TO_FEELER_DISTANCE=3;DvtPieLabelUtils._NO_COLLISION=0;DvtPieLabelUtils._HALF_COLLISION=1;DvtPieLabelUtils._ALL_COLLISION=2;DvtPieLabelUtils.layoutLabelsAndFeelers=function(a){var b=a.getLabelPosition();"none"!=b&&("inside"==b?DvtPieLabelUtils._layoutInsideLabels(a):DvtPieLabelUtils._layoutOutsideLabelsAndFeelers(a))};
DvtPieLabelUtils._layoutInsideLabels=function(a){if(null!=a){var b=a.__getSlices(),c=b.length;if(0<c)for(i=0;i<c;i++){var d=b[i],e;e=d.getAngleStart()+d.getAngleExtent()/2;var g=a.getCenter(),h=0,k=0,m=DvtPieLabelUtils._createLabel(d,!0);1==c?(h=g.x,k=g.y):(e=DvtPieRenderUtils.reflectAngleOverYAxis(e,g.x,g.y,0.66*a.getRadiusX(),0.66*a.getRadiusY()),h=e.x,k=e.y);m.setX(h);m.setY(k);m.alignMiddle();m.alignCenter();e=DvtTextUtils.guessTextDimensions(m);for(var n=g=h,o=k-e.h/2,k=k+e.h/2;d.contains(g,
o)&&d.contains(g,k);)g--;for(;d.contains(n,o)&&d.contains(n,k);)n++;g+=3;n-=3;h=2*Math.min(h-g,n-h);h<e.w&&(m.setX((g+n)/2),h=n-g);k=d.getPieChart().getCtx().getStage();DvtTextUtils.fitText(m,h,e.h,k)&&(k.removeChild(m),d.setSliceLabel(m))}}};
DvtPieLabelUtils._layoutOutsideLabelsAndFeelers=function(a){if(null!=a){var b=[],c=[],c=DvtPieLabelUtils._generateInitialLayout(a),b=c[0],c=c[1],d=DvtPieLabelUtils._refineInitialLayout(a,b,DvtPieLabelUtils._LEFT_SIDE_LABELS),e=DvtPieLabelUtils._refineInitialLayout(a,c,DvtPieLabelUtils._RIGHT_SIDE_LABELS);d==DvtPieLabelUtils._HALF_COLLISION&&e!=DvtPieLabelUtils._NO_COLLISION&&DvtPieLabelUtils._columnLabels(a,b,!0,!0,!0);d!=DvtPieLabelUtils._NO_COLLISION&&e==DvtPieLabelUtils._HALF_COLLISION&&DvtPieLabelUtils._columnLabels(a,
c,!1,!0,!0);DvtPieLabelUtils._setLabelsAndFeelers(a,b,DvtPieLabelUtils._LEFT_SIDE_LABELS);DvtPieLabelUtils._setLabelsAndFeelers(a,c,DvtPieLabelUtils._RIGHT_SIDE_LABELS)}};
DvtPieLabelUtils._createLabel=function(a,b){var c=a.getPieChart();if("none"==c.getLabelPosition())return null;var d=c.getCtx(),d=b?new DvtOutputText(d):new DvtMultilineText(d),e=c.getOptions().styleDefaults,g=e.sliceLabelStyle;if(g){var h=g.toString();-1==h.indexOf("color")&&(e=e._defaultSliceLabelColor,"inside"==c.getLabelPosition()&&(c=a.getFillColor(),e=DvtColorUtils.getContrastingTextColor(c)),g=new DvtCSSStyle(h+("color: "+e+";")))}DvtPieLabelUtils._setFontPropsOnLabel(g,d);c=DvtPieLabelUtils._generateSliceLabelString(a);
d.setTextString(c);a.setSliceLabelString(c);return d};
DvtPieLabelUtils._generateSliceLabelString=function(a){var b=a.getPieChart();if("none"==b.getLabelPosition())return null;var c=a.getCustomLabel();if(null!=c)return c;var d="",e=c="",d="",e=a.getValue(),g=a._chart.getOptions().valueFormats,d=0,d=b.getTotalValue(),d=0==d?0:100*(Math.abs(e)/d);if(g)d=DvtChartTooltipUtils._formatValue(g,DvtChartDataUtils._TYPE_LABEL,a.getValue()/100);else{d=d.toString();if(5<d.length)d=d.slice(0,5);else for(0>d.indexOf(".",0)&&4>d.length&&(d+=".");5>d.length;)d+="0";
d+="%"}isNaN(e)||(c=g?DvtChartTooltipUtils._formatValue(g,DvtChartDataUtils._TYPE_LABEL,a.getValue()):e.toString());e=a.getSeriesLabel();a=b.getOptions().styleDefaults.sliceLabelType;return"percent"==a?d:"number"==a?c:"text"==a?e:"textAndPercent"==a?e+", "+d:null};DvtPieLabelUtils._setFontPropsOnLabel=function(a,b){null==b||null==a||b.setCSSStyle(a)};
DvtPieLabelUtils._refineInitialLayout=function(a,b,c){if(b&&0<b.length){var d=a.__getFrame().y,e=!1,g=!1,h=!1,k=0,m,n=!1,o=n;m=!1;for(var c=c==DvtPieLabelUtils._LEFT_SIDE_LABELS,s=0;s<b.length;s++)m=b[s],o=n,90<m.getPosition()&&(n=!0),k=m.getY()+m.getHeight(),(m=d-m.getY()>DvtPieLabelUtils._COLLISION_MARGIN)&&(n?n&&!o?g=!0:h=!0:e=!0),k>d&&(d=k);if(e&&h||g)return DvtPieLabelUtils._columnLabels(a,b,c,!0,!0),DvtPieLabelUtils._ALL_COLLISION;if(e)return DvtPieLabelUtils._columnLabels(a,b,c,!0,!1),DvtPieLabelUtils._HALF_COLLISION;
return h?(DvtPieLabelUtils._columnLabels(a,b,c,!1,!0),DvtPieLabelUtils._HALF_COLLISION):DvtPieLabelUtils._NO_COLLISION}};
DvtPieLabelUtils._setLabelsAndFeelers=function(a,b,c){if(!(null==b||0>=b.length)){for(var d,e,g,h=c==DvtPieLabelUtils._LEFT_SIDE_LABELS,k=Infinity,c=0;c<b.length;c++)g=b[c],d=g.getSlice(),g.hasFeeler()?(d=DvtPieLabelUtils._calculateFeeler(g,d,h),k=Math.min(k,d)):d.setNoOutsideFeeler();for(c=0;c<b.length;c++){g=b[c];d=g.getSlice();e=g.getSliceLabel();g.hasFeeler()&&(h?g.setX(g.getX()+k):g.setX(g.getX()-k),DvtPieLabelUtils._calculateFeeler(g,d,h),e.setMaxLines(1));e.setY(g.getY());e.setX(g.getX());
var m=a.__getFrame();g.getY()<m.y||g.getY()+g.getHeight()>m.y+m.h?(d.setSliceLabel(null),d.setNoOutsideFeeler()):(DvtPieLabelUtils._truncateSliceLabel(a,d,g,h),d.setSliceLabel(e))}}};
DvtPieLabelUtils._calculateFeeler=function(a,b,c){var d=b.getPieChart(),e=a.getX(),g=a.getY()+a.getHeight()*DvtPieLabelUtils._LABEL_TO_FEELER_OFFSET,h=DvtPieLabelUtils._FEELER_HORIZ_MINSIZE*d.getRadiusX(),k;c?(e+=DvtPieLabelUtils._LABEL_TO_FEELER_DISTANCE,k=e+h):(e-=DvtPieLabelUtils._LABEL_TO_FEELER_DISTANCE,k=e-h);if("outside"==d.getLabelPosition()){var m={x:0,y:0};k={x:k,y:g};e={x:e,y:g};m=a.getAngle();g=DvtPieLabelUtils._adjustForDepth(m,d.getDepth());m=DvtPieRenderUtils.reflectAngleOverYAxis(m,
d.getCenter().x,d.getCenter().y+g,d.getRadiusX(),d.getRadiusY());a=DvtMath.degreesToRads(a.getPosition());d=Math.abs(Math.atan2(k.x-m.x,m.y-k.y));g=(m.y-k.y)*Math.tan(a);if(a>Math.PI/2&&d>Math.PI/2&&d<a||a<Math.PI/2&&d<Math.PI/2&&d>a)k.x=c?m.x-g:m.x+g;b.setOutsideFeelerPoints(m,k,e);return Math.abs(e.x-k.x)-h}return 0};DvtPieLabelUtils._adjustForDepth=function(a,b){var c=0;189<a&&351>a&&(c=b);return c};
DvtPieLabelUtils._getMiddleLabel=function(a){for(var b=91,c=-1,d=0;d<a.length;d++)pa=a[d].getPosition(),Math.abs(pa-90)<b&&(b=Math.abs(pa-90),c=d);return c};DvtPieLabelUtils._setOptimalLabelPosition=function(a,b,c){b.setX(c);var c=a.getRadiusY()*(1+DvtPieLabelUtils._FEELER_RAD_MINSIZE),d=DvtMath.degreesToRads(b.getPosition()),c=c*Math.cos(d),d=DvtPieLabelUtils._adjustForDepth(b.getAngle(),a.getDepth()),a=a.getCenter().y-c-b.getHeight()*DvtPieLabelUtils._LABEL_TO_FEELER_OFFSET+d;b.setY(b.boundY(a))};
DvtPieLabelUtils._columnLabels=function(a,b,c,d,e){var g=a.__getFrame(),h=g.y,k=g.y+g.h,m,g=a.getCenter().x;m=a.getRadiusX()*(1+DvtPieLabelUtils._FEELER_RAD_MINSIZE+DvtPieLabelUtils._FEELER_HORIZ_MINSIZE);g=c?g-m:g+m;for(m=0;m<b.length;m++)b[m].setMinY(h),h+=b[m].getHeight();for(m=b.length-1;0<=m;m--)k-=b[m].getHeight(),b[m].setMaxY(k);if(b[0].getMinY()>=b[0].getMaxY())for(m=0;m<b.length;m++)d=b[m],d.setX(g),d.setY((d.getMinY()+d.getMaxY())/2),d.setHasFeeler(!0);else{h=DvtPieLabelUtils._getMiddleLabel(b);
m=b[h];k=90>=m.getPosition();d&&!e&&m.getMinY()+m.getHeight()>a.getCenter().y&&(e=!0);e&&!d&&m.getMaxY()<a.getCenter().y&&(d=!0);if(d&&k||e&&!k)DvtPieLabelUtils._setOptimalLabelPosition(a,m,g,c),m.setHasFeeler(!0);var k=m.getY(),n=m.getY()+m.getHeight(),o,s;if(d)for(m=h-1;0<=m;m--)d=b[m],s=d.getHeight(),DvtPieLabelUtils._setOptimalLabelPosition(a,d,g,c),d.setHasFeeler(!0),o=d.getY(),k=o+s<k?o:k-s,d.setY(k);if(e)for(m=h+1;m<b.length;m++)d=b[m],s=d.getHeight(),DvtPieLabelUtils._setOptimalLabelPosition(a,
d,g,c),d.setHasFeeler(!0),o=d.getY(),n=o>n?o+s:n+s,d.setY(n-s)}};DvtPieLabelUtils._truncateSliceLabel=function(a,b,c,d){var e=c.getSliceLabel(),g=e.getCSSStyle(),h=0,h=a.getNumChildren(),k=!1;a.contains(e)||(a.addChild(e),k=!0);e.setCSSStyle(g);b=b.getSliceLabelString();e.setTextString(b);k&&a.removeChildAt(h);b=a.__getFrame();h=d?c.getX()-b.x:b.x+b.w-c.getX();a=DvtPieLabelUtils._getTextDimension(a,e,h,c.getInitialNumLines());c.setWidth(a.x);return c.getHeight()!=a.y?(c.setHeight(a.y),!0):!1};
DvtPieLabelUtils._generateInitialLayout=function(a){var b=Array(2),c=[],d=[],e,g,h=0,k=0,m,n,o=a.__getSlices(),s=o.length,t=a.__getFrame();if(0<s)for(m=0;m<s;m++)slice=o[m],n=DvtPieLabelUtils._createLabel(slice),h=slice.getAngleStart()+slice.getAngleExtent()/2,360<h&&(h-=360),0>h&&(h+=360),e=1+DvtPieLabelUtils._OUTSIDE_LABEL_DISTANCE,e=DvtPieRenderUtils.reflectAngleOverYAxis(h,a.getCenter().x,a.getCenter().y,a.getRadiusX()*e,a.getRadiusY()*e),g=90<=h&&270>h?e.x-t.x:t.x+t.w-e.x,g=DvtPieLabelUtils._getTextDimension(a,
n,g,DvtPieLabelUtils._MAX_LINES_PER_LABEL),165>h&&15<h?e.y-=1*g.y:15>h||345<h?(e.y-=0.5*g.y,e.x+=0.2*g.y):165<h&&195>h&&(e.y-=0.5*g.y,e.x-=0.2*g.y),k=DvtPieLabelUtils._adjustForDepth(h,a.getDepth()),e.y+=k,1==s&&(e.x-=g.x/2),e.y<t.y&&(e.y=t.y),e.y+g.y>t.y+t.h&&(e.y=t.y+t.h-g.y),90<=h&&270>h?(n.alignRight(),k=h-90,DvtPieLabelUtils._createLabelInfo(slice,n,h,k,g,e,c)):(k=90>=h?Math.abs(90-h):180-(h-270),DvtPieLabelUtils._createLabelInfo(slice,n,h,k,g,e,d));b[0]=c;b[1]=d;return b};
DvtPieLabelUtils._createLabelInfo=function(a,b,c,d,e,g,h){for(var k=-1,m,n=0;n<h.length;n++)if(m=h[n],m.getPosition()>d){k=n;break}-1==k&&(k=h.length);m=new DvtPieLabelInfo;m.setPosition(d);m.setAngle(c);m.setSliceLabel(b);m.setSlice(a);m.setWidth(e.x);m.setHeight(e.y);m.setX(g.x);m.setY(g.y);h.splice(k,0,m)};DvtPieLabelUtils._getTextDimension=function(a,b,c,d){b.setMaxLines(d);DvtTextUtils.fitText(b,c,Infinity,a);a.addChild(b);c=b.getDimensions();a.removeChild(b);return{x:c.w,y:c.h}};
var DvtChartRenderer={};DvtObj.createSubclass(DvtChartRenderer,DvtObj,"DvtChartRenderer");DvtChartRenderer._EMPTY_TEXT_GAP_WIDTH=2;DvtChartRenderer._EMPTY_TEXT_GAP_HEIGHT=1;DvtChartRenderer._BUTTON_SIZE=16;DvtChartRenderer._BUTTON_PADDING=5;DvtChartRenderer._BUTTON_CORNER_DIST=4;DvtChartRenderer._BUTTON_OPACITY=0.8;DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_SLOW=0.05;DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_FAST=0.2;
DvtChartRenderer.render=function(a,b,c){DvtChartRenderer._renderBackground(a,b,c);if(DvtChartDataUtils.hasData(a)){DvtChartRenderer._renderTitles(a,b,c);DvtChartRenderer._adjustAvailSpace(c);DvtChartLegendRenderer.render(a,b,c);DvtChartRenderer._adjustAvailSpace(c);var d=DvtChartRenderer._prerenderHorizScrollbar(a,b,c),e=DvtChartRenderer._prerenderVertScrollbar(a,b,c);DvtChartRenderer._adjustAvailSpace(c);a.__setAxisSpace(c.clone());DvtChartAxisRenderer.render(a,b,c);DvtChartRenderer._adjustAvailSpace(c);
a.__setPlotAreaSpace(c.clone());DvtChartRenderer._setEventHandlers(a);DvtChartRenderer._renderScrollbars(a,d,e);DvtChartRenderer._renderPlotArea(a,b,c);DvtChartTypeUtils.isPolar(a)&&b.addChild(a.yAxis);DvtChartRenderer._renderDragButtons(a,b)}else DvtChartRenderer.renderEmptyText(a,b,c)};
DvtChartRenderer._setEventHandlers=function(a){var b=a.getOptions(),c=a.getEventManager();if(DvtChartTypeUtils.hasAxes(a)&&!b._isOverview){var d=new DvtRectangle(0,0,a.getWidth(),a.getHeight()),e=a.__getPlotAreaSpace(),g=a.__getAxisSpace(),h=new DvtRectangle(e.x,g.y,e.w,g.h),g=new DvtRectangle(g.x,e.y,g.w,e.h),k=new DvtSolidFill(b.styleDefaults.marqueeColor),m=new DvtSolidStroke(b.styleDefaults.marqueeBorderColor),n;DvtChartTypeUtils.isScrollSupported(a)&&DvtChartEventUtils.isScrollable(a)&&(n=DvtChartEventUtils.isDelayedScroll(a)?
DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_FAST:DvtChartRenderer._MOUSE_WHEEL_ZOOM_RATE_SLOW,n=new DvtPanZoomHandler(a,e,d,n),n.setPanCursor(b._resources.panCursorUp,b._resources.panCursorDown),c.setPanZoomHandler(n),DvtChartEventUtils.isZoomable(a)&&(n=DvtChartTypeUtils.isHorizontal(a)?new DvtMarqueeHandler(a,e,d,k,m,!1,!0,null,g):DvtChartTypeUtils.isBLAC(a)?new DvtMarqueeHandler(a,e,d,k,m,!0,!1,h,null):new DvtMarqueeHandler(a,e,d,k,m,!0,!0,h,g),c.setMarqueeZoomHandler(n)));"multiple"==b.selection&&
(n=new DvtMarqueeHandler(a,e,d,k,m,!0,!0,h,g),c.setMarqueeSelectHandler(n))}};
DvtChartRenderer.rerenderAxisAndPlotArea=function(a,b){if(DvtChartDataUtils.hasData(a)){var c=a.__getAxisSpace().clone(),d=a.getSelectionHandler();if(d)var e=d.getSelectedIds();a.__cleanUpAxisAndPlotArea();DvtChartAxisRenderer.render(a,b,c);DvtChartRenderer._adjustAvailSpace(c);a.__setPlotAreaSpace(c.clone());DvtChartRenderer._renderPlotArea(a,b,c);d&&d.processInitialSelections(e,a.getObjects());a.getEventManager().autoToggleZoomButton();DvtChartRenderer.positionDragButtons(a)}};
DvtChartRenderer._renderBackground=function(a,b,c){var d=a.getOptions(),c=new DvtRect(a.getCtx(),c.x,c.y,c.w,c.h);c.setInvisibleFill();b.addChild(c);b=DvtChartEventManager.getUIEventParams(DvtChartConstants.BACKGROUND);a.getEventManager().associate(c,new DvtSimpleObjPeer(null,null,null,b));c.setAriaRole("img");c.setAriaProperty("label",d.shortDesc)};
DvtChartRenderer._renderTitles=function(a,b,c){var d=a.getOptions(),e=DvtChartDefaults.getGapSize(a,d.layout.outerGapWidth),g=DvtChartDefaults.getGapSize(a,d.layout.outerGapHeight);c.x+=e;c.w-=2*e;c.y+=g;c.h-=2*g;if(d.title.text){var g=DvtChartTextUtils.createText(a.getEventManager(),b,d.title.text,d.title.style,c.x,c.y,c.w,c.h,DvtChartEventManager.getUIEventParams(DvtChartConstants.TITLE)),h;g?(h=g.getDimensions(),e=h.h):(e=0,h=new DvtRectangle(0,0,0,0));if(d.subtitle.text){var k=new DvtOutputText(a.getCtx(),
d.subtitle.text,c.x,c.y);k.setCSSStyle(d.subtitle.style);b.addChild(k);var m=k.measureDimensions(),n=DvtChartDefaults.getGapSize(a,d.layout.titleSubtitleGapWidth),o=h.w+n+m.w;o>c.w?(n=DvtChartDefaults.getGapSize(a,d.layout.titleSubtitleGapHeight),k.setY(c.y+e+n),b.removeChild(k),DvtTextUtils.fitText(k,c.w,c.h,a)&&(m=k.measureDimensions(),e+=m.h+n,DvtAgent.isRightToLeft(a.getCtx())&&(k&&k.setX(c.w-m.w),g&&g.setX(c.w-h.w)))):(k.setY(h.h-m.h+c.y),DvtLayoutUtils.align(c,d.title.hAlign,g,o),DvtAgent.isRightToLeft(a.getCtx())?
(k.setX(g.getX()),g&&g.setX(g.getX()+m.w+n)):k.setX(g.getX()+o-m.w));k.setAriaProperty("hidden",null);a.getEventManager().associate(k,new DvtSimpleObjPeer(k.getUntruncatedTextString(),null,null,DvtChartEventManager.getUIEventParams(DvtChartConstants.SUBTITLE)))}else DvtLayoutUtils.align(c,d.title.hAlign,g,h.w);g.setAriaProperty("hidden",null);g="on"==d.titleSeparator.rendered?d.layout.titleSeparatorGap:d.layout.titlePlotAreaGap;c.y+=e+DvtChartDefaults.getGapSize(a,g);c.h-=e+DvtChartDefaults.getGapSize(a,
g);"on"==d.titleSeparator.rendered&&(e=new DvtLine(a.getCtx(),c.x,c.y,c.x+c.w,c.y),g=new DvtLine(a.getCtx(),c.x,c.y+1,c.x+c.w,c.y+1),e.setSolidStroke(d.titleSeparator.upperColor),g.setSolidStroke(d.titleSeparator.lowerColor),b.addChild(e),b.addChild(g),e=2+DvtChartDefaults.getGapSize(a,d.layout.titlePlotAreaGap),c.y+=e,c.h-=e)}if(d.footnote.text){if(b=DvtChartTextUtils.createText(a.getEventManager(),b,d.footnote.text,d.footnote.style,c.x,0,c.w,c.h,DvtChartEventManager.getUIEventParams(DvtChartConstants.FOOTNOTE)))e=
b.getDimensions(),b.setY(c.y+c.h-e.h),c.h-=e.h+DvtChartDefaults.getGapSize(a,d.layout.footnoteGap),DvtLayoutUtils.align(c,d.footnote.hAlign,b,e.w);b.setAriaProperty("hidden",null)}};
DvtChartRenderer._renderPlotArea=function(a,b,c){if(DvtChartTypeUtils.hasAxes(a)){var d=new DvtContainer(a.getCtx());d.setTranslate(c.x,c.y);b.addChild(d);a.setPlotArea(d);b=new DvtRectangle(0,0,c.w,c.h);DvtPlotAreaRenderer.render(a,d,b)}else DvtChartTypeUtils.isPie(a)?(d=new DvtPieChart(a,c),0<d.__getSlices().length?(b.addChild(d),d.render()):DvtChartRenderer.renderEmptyText(a,b,c)):DvtChartTypeUtils.isFunnel(a)&&DvtFunnelRenderer.render(a,b,c);c.w=0;c.h=0};
DvtChartRenderer.renderEmptyText=function(a,b,c){var d=a.getOptions(),e=d.emptyText;e||(e=a.getBundle().getTranslatedString("EMPTY_TEXT",null));var g=c.x+c.w/2,h=c.y+c.h/2,e=new DvtOutputText(a.getCtx(),e,g,h);e.setCSSStyle(d.title.style);e.alignCenter();e.alignMiddle();DvtTextUtils.fitText(e,c.w-2*DvtChartRenderer._EMPTY_TEXT_GAP_WIDTH,Infinity,b,0)&&(e.isTruncated()&&a.getEventManager().associate(e,new DvtSimpleObjPeer(e.getUntruncatedTextString())),e.setAriaProperty("hidden",null))};
DvtChartRenderer._prerenderHorizScrollbar=function(a,b,c){var d=c.w,e=0;if(DvtChartEventUtils.isScrollable(a)&&DvtChartTypeUtils.isHorizScrollbarSupported(a))if(DvtChartStyleUtils.isOverviewRendered(a)){var e=DvtChartStyleUtils.getOverviewHeight(a),g=a.overview?a.overview.getBackgroundChart():null;a.overview=new DvtChartOverview(a.getCtx(),a.processEvent,a,a.getId(),g);b.addChild(a.overview);DvtLayoutUtils.position(c,"bottom",a.overview,d,e,10)}else e=a.getOptions().styleDefaults._scrollbarHeight,
a.xScrollbar=new DvtSimpleScrollbar(a.getCtx(),a.processEvent,a),b.addChild(a.xScrollbar),DvtLayoutUtils.position(c,"bottom",a.xScrollbar,d,e,8);return new DvtDimension(d,e)};
DvtChartRenderer._prerenderVertScrollbar=function(a,b,c){var d=0,e=c.h;if(DvtChartEventUtils.isScrollable(a)&&DvtChartTypeUtils.isVertScrollbarSupported(a)){var d=a.getOptions().styleDefaults._scrollbarHeight,g=new DvtSimpleScrollbar(a.getCtx(),a.processEvent,a);b.addChild(g);DvtLayoutUtils.position(c,DvtAgent.isRightToLeft(a.getCtx())?"right":"left",g,d,e,8);DvtChartTypeUtils.isHorizontal(a)?a.xScrollbar=g:a.yScrollbar=g}return new DvtDimension(d,e)};
DvtChartRenderer._renderScrollbars=function(a,b,c){var d=a.getOptions(),e={color:d.styleDefaults._scrollbarHandleColor,backgroundColor:d.styleDefaults._scrollbarTrackColor},g=a.__getPlotAreaSpace(),h=DvtAgent.isTouchDevice()?8:4;if(a.xScrollbar){e.min=a.xAxis.getGlobalMin();e.max=a.xAxis.getGlobalMax();if(DvtChartTypeUtils.isHorizontal(a))e.isHorizontal=!1,e.isReversed=!1,a.xScrollbar.setTranslateY(g.y),a.xScrollbar.render(e,c.w,g.h);else{e.isHorizontal=!0;e.isReversed=DvtAgent.isRightToLeft(a.getCtx());
a.xScrollbar.setTranslateX(g.x);a.xScrollbar.render(e,g.w,b.h);var k=new DvtRect(a.getCtx(),0,-h,g.w,b.h+2*h);k.setInvisibleFill();a.xScrollbar.addChild(k)}a.xScrollbar.setViewportRange(a.xAxis.getViewportMin(),a.xAxis.getViewportMax())}a.yScrollbar&&(e.min=a.yAxis.getGlobalMin(),e.max=a.yAxis.getGlobalMax(),e.isHorizontal=!1,e.isReversed=!0,a.yScrollbar.setTranslateY(g.y),a.yScrollbar.render(e,c.w,g.h),a.yScrollbar.setViewportRange(a.yAxis.getViewportMin(),a.yAxis.getViewportMax()),k=new DvtRect(a.getCtx(),
-h,0,c.w+2*h,g.h),k.setInvisibleFill(),a.yScrollbar.addChild(k));a.overview&&(c={startTime:a.xAxis.getGlobalMin(),endTime:a.xAxis.getGlobalMax(),viewportStartTime:a.xAxis.getViewportMin(),viewportEndTime:a.xAxis.getViewportMax(),minimumWindowSize:a.xAxis.getMinimumExtent(),chart:DvtJSONUtils.clone(d)},DvtChartEventUtils.isZoomable(a)||(c.featuresOff="zoom"),a.overview.setTranslateX(g.x),a.overview.render(c,g.w,b.h),a.overview.setViewportRange(a.xAxis.getViewportMin(),a.xAxis.getViewportMax()))};
DvtChartRenderer._renderDragButtons=function(a){var b=a.getOptions();if(DvtChartTypeUtils.hasAxes(a)&&!b._isOverview){var c=DvtAgent.isTouchDevice(),d=DvtChartTypeUtils.isScrollSupported(a)&&DvtChartEventUtils.isScrollable(a),e=a.getEventManager();a.dragButtons=new DvtContainer(a.getCtx());var g=b._resources;if("multiple"==b.selection&&(c||d))b=d&&(c||DvtChartEventUtils.isZoomable(a))?"end":"solo",e.selectButton=DvtChartRenderer._createDragButton(a,a.dragButtons,g.selectUp,g.selectDown,e.onSelectButtonClick,
e,b),b=a.getBundle().getTranslatedString("MARQUEE_SELECT"),e.associate(e.selectButton,new DvtSimpleObjPeer(b));d&&(b=null==e.selectButton?"solo":"start",c?(e.panButton=DvtChartRenderer._createDragButton(a,a.dragButtons,g.panUp,g.panDown,e.onPanButtonClick,e,b),b=a.getBundle().getTranslatedString("PAN"),e.associate(e.panButton,new DvtSimpleObjPeer(b))):DvtChartEventUtils.isZoomable(a)&&(e.zoomButton=DvtChartRenderer._createDragButton(a,a.dragButtons,g.zoomUp,g.zoomDown,e.onZoomButtonClick,e,b),b=a.getBundle().getTranslatedString("MARQUEE_ZOOM"),
e.associate(e.zoomButton,new DvtSimpleObjPeer(b))));DvtChartRenderer.positionDragButtons(a);e.setDragMode(null);0<a.dragButtons.getNumChildren()&&(a.addChild(a.dragButtons),c?d&&(e.panButton.setToggled(!0),e.onPanButtonClick(null)):a.hideDragButtons(),a.dragButtons.setCursor("default"))}};
DvtChartRenderer._positionDragButton=function(a,b,c){DvtAgent.isRightToLeft(a.getCtx())?(a=c.x+DvtChartRenderer._BUTTON_PADDING,c.x+=DvtChartRenderer._BUTTON_SIZE+2*DvtChartRenderer._BUTTON_PADDING):a=c.x+c.w-DvtChartRenderer._BUTTON_SIZE-DvtChartRenderer._BUTTON_PADDING;c.w-=DvtChartRenderer._BUTTON_SIZE+2*DvtChartRenderer._BUTTON_PADDING;b.setTranslate(a,c.y+DvtChartRenderer._BUTTON_PADDING)};
DvtChartRenderer.positionDragButtons=function(a){var b=a.__getPlotAreaSpace().clone();b.x+=DvtChartRenderer._BUTTON_CORNER_DIST;b.w-=2*DvtChartRenderer._BUTTON_CORNER_DIST;b.y+=DvtChartRenderer._BUTTON_CORNER_DIST;var c=a.getEventManager();c.selectButton&&DvtChartRenderer._positionDragButton(a,c.selectButton,b);c.panButton&&DvtChartRenderer._positionDragButton(a,c.panButton,b);c.zoomButton&&DvtChartRenderer._positionDragButton(a,c.zoomButton,b)};
DvtChartRenderer._createDragButtonBackground=function(a,b){var c=2,d=2,e=DvtAgent.isRightToLeft(a);"start"==b?e?c=0:d=0:"end"==b&&(e?d=0:c=0);var e=-DvtChartRenderer._BUTTON_PADDING,g=DvtChartRenderer._BUTTON_SIZE+2*DvtChartRenderer._BUTTON_PADDING,c=DvtPathUtils.roundedRectangle(e,e,g,g,c,d,d,c),c=new DvtPath(a,c);1<DvtAgent.getDevicePixelRatio()?(c.setSolidStroke("#D8DEE3",1,1),c.setPixelHinting(!0)):c.setSolidStroke("#B8BDC1",1,1);return c};
DvtChartRenderer._createDragButton=function(a,b,c,d,e,g,h){var a=a.getCtx(),k=DvtChartRenderer._createDragButtonBackground(a,h);k.setSolidFill("#FFFFFF",DvtChartRenderer._BUTTON_OPACITY);k.addChild(new DvtImage(a,c,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));var m=DvtChartRenderer._createDragButtonBackground(a,h);m.setSolidFill("#E2E3E4",DvtChartRenderer._BUTTON_OPACITY);m.addChild(new DvtImage(a,c,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));var n=DvtChartRenderer._createDragButtonBackground(a,
h);n.setFill(new DvtLinearGradientFill(90,["#0527CE","#0586F0"],[DvtChartRenderer._BUTTON_OPACITY,DvtChartRenderer._BUTTON_OPACITY]));n.addChild(new DvtImage(a,d,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));c=DvtChartRenderer._createDragButtonBackground(a,h);c.setSolidFill("#0586F0",DvtChartRenderer._BUTTON_OPACITY);c.addChild(new DvtImage(a,d,0,0,DvtChartRenderer._BUTTON_SIZE,DvtChartRenderer._BUTTON_SIZE));d=new DvtButton(a,k,m,n,null,null,e,g);d.setOverDownState(c);d.setToggleEnabled(!0);
b.addChild(d);d.addEvtListener(DvtMouseEvent.MOUSEDOWN,function(a){a.stopPropagation()});DvtAgent.isTouchDevice()&&(b=DvtAgent.isRightToLeft(a),e=2*DvtChartRenderer._BUTTON_PADDING,h="solo"==h?new DvtRect(a,-e,-e,DvtChartRenderer._BUTTON_SIZE+2*e,DvtChartRenderer._BUTTON_SIZE+2*e):"start"==h&&!b||"end"==h&&b?new DvtRect(a,-e,-e,DvtChartRenderer._BUTTON_SIZE+1.5*e,DvtChartRenderer._BUTTON_SIZE+2*e):new DvtRect(a,-0.5*e,-e,DvtChartRenderer._BUTTON_SIZE+1.5*e,DvtChartRenderer._BUTTON_SIZE+2*e),h.setInvisibleFill(),
d.addChild(h));return d};DvtChartRenderer._adjustAvailSpace=function(a){a.x=Math.round(a.x);a.y=Math.round(a.y);a.w=Math.round(a.w);a.h=Math.round(a.h)};var DvtChartAxisRenderer={};DvtObj.createSubclass(DvtChartAxisRenderer,DvtObj,"DvtChartAxisRenderer");
DvtChartAxisRenderer.render=function(a,b,c){if(DvtChartTypeUtils.hasAxes(a)){var d=a.getOptions(),e=DvtChartTypeUtils.isHorizontal(a),g=DvtChartTypeUtils.isPolar(a),h=DvtAgent.isRightToLeft(a.getCtx()),k=DvtChartDataUtils.getGroupCount(a),m=c.clone(),n=d.layout.verticalAxisTopGap;DvtChartTypeUtils.isVertical(a)&&DvtChartAxisUtils.areYAxisLabelsRendered(a)&&(c.y+=n,c.h-=n);"bubble"==a.getType()&&DvtChartMarkerUtils.calcBubbleSizes(a,c.w,c.h);var o=DvtChartDefaults.getGapSize(a,d.layout.tickLabelGapWidth),
s=DvtChartDefaults.getGapSize(a,d.layout.tickLabelGapHeight),n=e?o:s,t=e?s:o,o=DvtChartAxisRenderer._createYAxis(a,b,c,m),s=DvtChartAxisRenderer._createY2Axis(a,b,c,m);o&&DvtLayoutUtils.position(c,o.position,o.axis,o.width,o.height,t);s&&DvtLayoutUtils.position(c,s.position,s.axis,s.width,s.height,t);"bubble"==a.getType()&&DvtChartMarkerUtils.calcBubbleSizes(a,c.w,c.h);"pixel"==DvtChartStyleUtils.getBarSpacing(a)&&DvtChartTypeUtils.isBar(a)&&c.w>k&&(t=Math.floor(c.w/k)*k,c.x+=(c.w-t)/2,c.w=t);b=DvtChartAxisRenderer._createXAxis(a,
b,c,m);g?(b.axis.setTranslateX(c.x),b.axis.setTranslateY(c.y),b.axis.render(b.options,c.w,c.h)):(b.axis.render(b.options,b.width,b.height),DvtLayoutUtils.position(c,b.position,b.axis,b.width,b.height,n));g&&o?(o.axis.setTranslateX(c.x),o.axis.setTranslateY(c.y),o.options._numGroups=k,o.axis.render(o.options,c.w,c.h)):e?(o&&(o.axis.setTranslateX(c.x),o.axis.render(o.options,c.w,o.height)),s&&(o&&this._alignYAxes(o.axis,s.axis,d,s.options),s.axis.setTranslateX(c.x),s.axis.render(s.options,c.w,s.height)),
e=o.axis.getLeftOverflow(),g=o.axis.getRightOverflow(),c.x+=e,c.w-=e+g):(e=b.axis.getLeftOverflow(),g=b.axis.getRightOverflow(),c.x+=e,c.w-=e+g,o&&(o.axis.setTranslateX(o.axis.getTranslateX()+(h?-g:e)),o.axis.render(o.options,o.width,c.h)),s&&(o&&this._alignYAxes(o.axis,s.axis,d,s.options),s.axis.setTranslateX(s.axis.getTranslateX()+(h?e:-g)),s.axis.render(s.options,s.width,c.h)));a.xAxis=b.axis;a.yAxis=o?o.axis:null;a.y2Axis=s?s.axis:null}};
DvtChartAxisRenderer._createXAxis=function(a,b,c,d){var e=a.getOptions(),g=DvtChartAxisUtils.getXAxisPosition(a),h=DvtJSONUtils.clone(e.xAxis);h.skin=e.skin;h.layout.gapRatio=a.getGapRatio();h.position=g;h.baselineScaling=e.xAxis.baselineScaling;h.title=e.xAxis?e.xAxis.title:null;h.groups=e.groups;h.timeAxisType=e.timeAxisType&&DvtChartTypeUtils.isTimeAxisSupported(a)?e.timeAxisType:"disabled";h.zoomAndScroll=e.zoomAndScroll;h._isOverview=e._isOverview;h.polarGridShape=DvtChartAxisUtils.isGridPolygonal(a)?
"polygon":"circle";h._radius=a.getRadius();if(!DvtChartAxisUtils.hasGroupAxis(a)){var k=DvtChartDataUtils.getMinMaxValue(a,"x");h.dataMin=null!=h.dataMin?h.dataMin:k.min;h.dataMax=null!=h.dataMax?h.dataMax:k.max}"tangential"==g&&DvtChartAxisUtils.hasGroupAxis(a)?DvtChartTypeUtils.isBar(a)?(h.startGroupOffset=0.5,h.endGroupOffset=0.5):h.endGroupOffset=1:(k=DvtChartAxisUtils.getBarAxisOffset(a),h.startGroupOffset=k,h.endGroupOffset=k);k="top"==g||"bottom"==g;h.leftBuffer=k?c.x-d.x:0;h.rightBuffer=k?
d.w+d.x-(c.w+c.x):0;h._renderGridAtLabels=!DvtChartTypeUtils.isBar(a)||DvtChartDataUtils.hasMixedFrequency(a);d=new DvtChartAxis(a.getCtx(),a.processEvent,a);b.addChild(d);b=k?c.w:e.layout.axisMaxSize*c.w;c=k?e.layout.axisMaxSize*c.h:c.h;"tangential"==g?e=new DvtDimension(0,0):e._duringAnimation?k?(e=new DvtDimension(b,a.xAxis.getHeight()),c=DvtAgent.isRightToLeft(a.getCtx()),h._startOverflow=c?a.xAxis.getRightOverflow():a.xAxis.getLeftOverflow(),h._endOverflow=c?a.xAxis.getLeftOverflow():a.xAxis.getRightOverflow()):
e=new DvtDimension(a.xAxis.getWidth(),c):e=d.getPreferredSize(h,b,c);return{axis:d,options:h,position:g,width:e.w,height:e.h}};
DvtChartAxisRenderer._createYAxis=function(a,b,c){var d=a.getOptions();if(DvtChartTypeUtils.hasY2DataOnly(a))return null;var e=DvtChartAxisUtils.getYAxisPosition(a),g="top"==e||"bottom"==e,h=DvtJSONUtils.clone(d.yAxis);h.skin=d.skin;h.layout.gapRatio=a.getGapRatio();h.position=e;h.baselineScaling=d.yAxis.baselineScaling;var k=DvtChartDataUtils.getMinMaxValue(a,"y",DvtChartTypeUtils.isBLAC(a));h.dataMin=null!=h.dataMin?h.dataMin:k.min;h.dataMax=null!=h.dataMax?h.dataMax:k.max;h.title=d.yAxis?d.yAxis.title:
null;h.timeAxisType="disabled";h.zoomAndScroll=d.zoomAndScroll;h.polarGridShape=DvtChartAxisUtils.isGridPolygonal(a)?"polygon":"circle";h._radius=a.getRadius();h._useBaselineColor=DvtChartTypeUtils.isBLAC(a);DvtChartEventUtils.isLiveScroll(a)&&DvtChartTypeUtils.isBLAC(a)&&!DvtChartTypeUtils.isPolar(a)&&(h._continuousExtent="on");k=DvtAgent.isRightToLeft(a.getCtx());h.leftBuffer=k?0:DvtAxis.MINIMUM_AXIS_BUFFER;h.rightBuffer=k?DvtAxis.MINIMUM_AXIS_BUFFER:0;k=new DvtChartAxis(a.getCtx(),a.processEvent,
a);b.addChild(k);b=g?c.w:d.layout.axisMaxSize*c.w;c=g?d.layout.axisMaxSize*c.h:c.h;a="radial"==e?new DvtDimension(0,0):d._duringAnimation?g?new DvtDimension(b,a.yAxis.getHeight()):new DvtDimension(a.yAxis.getWidth(),c):k.getPreferredSize(h,b,c);d.yAxis.min=h.min;d.yAxis.max=h.max;return{axis:k,options:h,position:e,width:a.w,height:a.h}};
DvtChartAxisRenderer._createY2Axis=function(a,b,c){var d=a.getOptions();if(DvtChartTypeUtils.hasY2Data(a)){var e=DvtChartAxisUtils.getY2AxisPosition(a),g=DvtJSONUtils.clone(d.y2Axis);g.skin=d.skin;g.layout.gapRatio=a.getGapRatio();g.position=e;g.baselineScaling=d.y2Axis.baselineScaling;var h=DvtChartDataUtils.getMinMaxValue(a,"y2",DvtChartTypeUtils.isBLAC(a));g.dataMin=null!=g.dataMin?g.dataMin:h.min;g.dataMax=null!=g.dataMax?g.dataMax:h.max;g.title=d.y2Axis?d.y2Axis.title:null;g.timeAxisType="disabled";
g.zoomAndScroll=d.zoomAndScroll;DvtChartEventUtils.isLiveScroll(a)&&DvtChartTypeUtils.isBLAC(a)&&!DvtChartTypeUtils.isPolar(a)&&(g._continuousExtent="on");h=DvtAgent.isRightToLeft(a.getCtx());g.leftBuffer=h?0:DvtAxis.MINIMUM_AXIS_BUFFER;g.rightBuffer=h?DvtAxis.MINIMUM_AXIS_BUFFER:0;h=new DvtChartAxis(a.getCtx(),a.processEvent,a);b.addChild(h);var k=(b="top"==e||"bottom"==e)?c.w:d.layout.axisMaxSize*c.w,c=b?d.layout.axisMaxSize*c.h:c.h,a=d._duringAnimation?b?new DvtDimension(k,a.y2Axis.getHeight()):
new DvtDimension(a.y2Axis.getWidth(),c):h.getPreferredSize(g,k,c);d.y2Axis.min=g.min;d.y2Axis.max=g.max;return{axis:h,options:g,position:e,width:a.w,height:a.h}}};DvtChartAxisRenderer._alignYAxes=function(a,b,c,d){var e=a.getMajorTickCount(),a=a.getMinorTickCount();"on"==c.y2Axis.alignTickMarks&&null==c.y2Axis.step&&(b.setMajorTickCount(e),b.setMinorTickCount(a),d.step=b.getMajorIncrement(),d.minorStep=b.getMinorIncrement())};var DvtChartLegendRenderer={};
DvtObj.createSubclass(DvtChartLegendRenderer,DvtObj,"DvtChartLegendRenderer");
DvtChartLegendRenderer.render=function(a,b,c){var d=a.getOptions(),e=d.legend.position,g=d.legend.scrolling;if("on"==d.legend.rendered){var h=DvtJSONUtils.clone(d.legend);delete h.position;h.skin=d.skin;h.layout.gapRatio=a.getGapRatio();h.hideAndShowBehavior=DvtChartEventUtils.getHideAndShowBehavior(a);h.hoverBehavior=DvtChartEventUtils.getHoverBehavior(a);DvtChartLegendRenderer._addLegendData(a,h);if(0!=h.sections.length){var k=DvtLegend.newInstance(a.getCtx(),a.processEvent,a);null!=a.getId()&&
k.setId(a.getId()+"legend");b.addChild(k);"auto"==e&&"asNeeded"!==g?e=c.w>=c.h?"end":"bottom":"auto"==e&&"asNeeded"==g&&(e="end");b=DvtAgent.isRightToLeft(a.getCtx());"start"==e?e=b?"right":"left":"end"==e&&(e=b?"left":"right");h.orientation="left"==e||"right"==e?"vertical":"horizontal";b="top"==e||"bottom"==e;b=k.getPreferredSize(h,b?c.w:d.layout.legendMaxSize*c.w,b?d.layout.legendMaxSize*c.h:c.h);k.render(h,b.w,b.h);d=DvtChartDefaults.getGapSize(a,d.layout.legendGap);DvtLayoutUtils.position(c,e,
k,b.w,b.h,d);a.legend=k}}};DvtChartLegendRenderer._addLegendData=function(a,b){var c=a.getOptions();b.title=c.legend?c.legend.title:null;b.sections=[];var d=DvtChartLegendRenderer._getSeriesItems(a);0<d.length&&b.sections.push({items:d});DvtChartLegendRenderer._addLegendSections(a,b.sections);d=DvtChartLegendRenderer._getRefObjItems(a);0<d.length&&b.sections.push({items:d,title:c.legend?c.legend.referenceObjectTitle:null});return b};
DvtChartLegendRenderer._getSeriesItems=function(a){var b=[],c;if("pie"==a.getType()){for(var d=DvtPieChartUtils.getRenderedSeriesIndices(a),e,g=0;g<d.length;g++)e=d[g],(c=DvtChartLegendRenderer._createLegendItem(a,e))&&b.push(c);DvtPieChartUtils.hasOtherSeries(a)&&(c={id:DvtPieChartUtils.OTHER_SLICE_SERIES_ID,text:a.getBundle().getTranslatedString("LABEL_OTHER",null),categoryVisibility:DvtPieChartUtils.getOtherSliceVisibility(a),type:"marker",color:a.getOptions().styleDefaults.otherColor,borderColor:a.getOptions().styleDefaults.borderColor},
b.push(c))}else{d=DvtChartDataUtils.getSeriesCount(a);for(e=0;e<d;e++)(c=DvtChartLegendRenderer._createLegendItem(a,e))&&b.push(c)}DvtChartTypeUtils.isStacked(a)&&DvtChartTypeUtils.isVertical(a)&&b.reverse();return b};
DvtChartLegendRenderer._createLegendItem=function(a,b){var c=DvtChartDataUtils.getSeriesItem(a,b),d=a.getType();if(!c||"off"==c.displayInLegend||"on"!=c.displayInLegend&&!DvtChartDataUtils.hasSeriesData(a,b))return null;var e=DvtChartDataUtils.getSeriesLabel(a,b);if(!e||0>=e.trim().length)return null;e={id:DvtChartDataUtils.getSeries(a,b),text:e,categoryVisibility:c.visibility};"line"==d?(e.lineStyle=DvtChartStyleUtils.getLineStyle(a,b),e.lineWidth=DvtChartStyleUtils.getLineWidth(a,b),"on"==DvtChartStyleUtils.getMarkerDisplayed(a,
b)?(e.type="lineWithMarker",e.markerShape=DvtChartStyleUtils.getMarkerShape(a,b),e.markerColor=DvtChartStyleUtils.getMarkerColor(a,b)):e.type="line"):"scatter"==d||"bubble"==d?(e.type="marker",e.markerShape=DvtChartStyleUtils.getMarkerShape(a,b)):e.type="marker";e.color=DvtChartStyleUtils.getColor(a,b);e.borderColor=DvtChartStyleUtils.getBorderColor(a,b);e.pattern=DvtChartStyleUtils.getPattern(a,b);"bubble"==d&&(e._borderWidth=0.5);e.action=c.action;e._spb=a.getShowPopupBehaviors(c._id);return e};
DvtChartLegendRenderer._addLegendSections=function(a,b){var c=a.getOptions();if(c&&c.legend&&c.legend.sections)for(var d=0;d<c.legend.sections.length;d++){var e=c.legend.sections[d];e&&e.items&&b.push({title:e.title,items:e.items})}};
DvtChartLegendRenderer._getRefObjItems=function(a){a=DvtChartRefObjUtils.getObjects(a);if(0>=a.length)return[];for(var b=[],c=0;c<a.length;c++){var d=a[c];if(d&&"on"==d.displayInLegend&&d.text){var e=DvtChartRefObjUtils.getType(d);b.push({type:"area"==e?"square":"line",text:d.text,color:DvtChartRefObjUtils.getColor(d),lineStyle:d.lineStyle,lineWidth:DvtChartRefObjUtils.getLineWidth(d)})}}return b};var DvtPlotAreaRenderer={};DvtObj.createSubclass(DvtPlotAreaRenderer,DvtObj,"DvtPlotAreaRenderer");
DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE=16;DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP=4;DvtPlotAreaRenderer._MIN_CHARS_DATA_LABEL=3;DvtPlotAreaRenderer.render=function(a,b,c){a._currentMarkers=[];a._currentAreas=[];DvtPlotAreaRenderer._renderBackgroundObjects(a,b,c);DvtPlotAreaRenderer._renderGridLines(a,b,c);DvtPlotAreaRenderer._renderForegroundObjects(a,b,c)};
DvtPlotAreaRenderer._renderBackgroundObjects=function(a,b,c){var d=a.getOptions(),e,g=a.getCtx();if(DvtChartTypeUtils.isPolar(a)){e=c.x+c.w/2;var h=c.y+c.h/2;DvtChartAxisUtils.isGridPolygonal(a)?(e=DvtPolygonUtils.getRegularPolygonPoints(e,h,DvtChartDataUtils.getGroupCount(a),a.getRadius(),0),e=new DvtPolygon(g,e)):e=new DvtCircle(g,e,h,a.getRadius())}else e=new DvtRect(g,c.x,c.y,c.w,c.h);d.plotArea.backgroundColor?e.setSolidFill(d.plotArea.backgroundColor):e.setInvisibleFill();b.addChild(e);h=DvtChartEventManager.getUIEventParams(DvtChartConstants.PLOT_AREA);
a.getEventManager().associate(e,new DvtSimpleObjPeer(null,null,null,h));if(d.xAxis.referenceObjects||d.yAxis.referenceObjects||d.y2Axis.referenceObjects)clipGroup=DvtPlotAreaRenderer.createClippedGroup(a,b,c),DvtRefObjRenderer.renderBackgroundObjects(a,clipGroup,c);if(DvtChartTypeUtils.isArea(a)||DvtChartTypeUtils.isCombo(a))d=new DvtContainer(g),b.addChild(d),DvtPlotAreaRenderer._renderAreas(a,d,c),a.__setAreaContainer(d)};
DvtPlotAreaRenderer._renderGridLines=function(a,b,c){var d=b.getCtx(),e=a.getOptions(),g=a.xAxis&&"off"!=e.xAxis.rendered,h=a.yAxis&&"off"!=e.yAxis.rendered,e=a.y2Axis&&"off"!=e.y2Axis.rendered;g&&DvtPlotAreaRenderer._positionGridLines(b,c,a.xAxis,a.xAxis.getMinorGridLines(d));h&&DvtPlotAreaRenderer._positionGridLines(b,c,a.yAxis,a.yAxis.getMinorGridLines(d));e&&DvtPlotAreaRenderer._positionGridLines(b,c,a.y2Axis,a.y2Axis.getMinorGridLines(d));g&&DvtPlotAreaRenderer._positionGridLines(b,c,a.xAxis,
a.xAxis.getMajorGridLines(d));h&&DvtPlotAreaRenderer._positionGridLines(b,c,a.yAxis,a.yAxis.getMajorGridLines(d));e&&DvtPlotAreaRenderer._positionGridLines(b,c,a.y2Axis,a.y2Axis.getMajorGridLines(d));g&&DvtPlotAreaRenderer._positionAxisLine(b,c,a.xAxis);h&&DvtPlotAreaRenderer._positionAxisLine(b,c,a.yAxis);e&&DvtPlotAreaRenderer._positionAxisLine(b,c,a.y2Axis)};
DvtPlotAreaRenderer._positionGridLines=function(a,b,c,d){for(var e=c.getPosition(),g=0;g<d.length;g++){var h=d[g];a.addChild(h);"radial"==e||"tangential"==e?(h.setTranslateX(b.x+b.w/2),h.setTranslateY(b.y+b.h/2)):"top"==e||"bottom"==e?(h.setY1(b.y),h.setY2(b.y+b.h),h.setX1(c.axisToPlotArea(h.getX1())),h.setX2(c.axisToPlotArea(h.getX2()))):(h.setX1(b.x),h.setX2(b.x+b.w),h.setY1(c.axisToPlotArea(h.getY1())),h.setY2(c.axisToPlotArea(h.getY2())))}};
DvtPlotAreaRenderer._positionAxisLine=function(a,b,c){var d=c.getAxisLine(a.getCtx());d&&(a.addChild(d),a=c.getPosition(),"radial"==a||"tangential"==a?(d.setTranslateX(b.x+b.w/2),d.setTranslateY(b.y+b.h/2)):"top"==a?(d.setX1(b.x),d.setX2(b.x+b.w),d.setY1(b.y),d.setY2(b.y)):"bottom"==a?(d.setX1(b.x),d.setX2(b.x+b.w),d.setY1(b.y+b.h),d.setY2(b.y+b.h)):"left"==a?(d.setX1(b.x),d.setX2(b.x),d.setY1(b.y),d.setY2(b.y+b.h)):"right"==a&&(d.setX1(b.x+b.w),d.setX2(b.x+b.w),d.setY1(b.y),d.setY2(b.y+b.h)))};
DvtPlotAreaRenderer._renderForegroundObjects=function(a,b,c){clipGroup=DvtPlotAreaRenderer.createClippedGroup(a,b,c);DvtChartTypeUtils.isBar(a)?DvtPlotAreaRenderer._renderBars(a,clipGroup,c):DvtChartTypeUtils.isLine(a)?DvtPlotAreaRenderer._renderLines(a,b,clipGroup,c):DvtChartTypeUtils.isCombo(a)?(DvtPlotAreaRenderer._renderBars(a,clipGroup,c),DvtPlotAreaRenderer._renderLines(a,b,clipGroup,c)):DvtChartTypeUtils.isScatter(a)?DvtPlotAreaRenderer._renderDataMarkers(a,b,!0,c):DvtChartTypeUtils.isBubble(a)&&
DvtPlotAreaRenderer._renderDataMarkers(a,clipGroup,!0,c);var d=a.getOptions();if(d.xAxis.referenceObjects||d.yAxis.referenceObjects||d.y2Axis.referenceObjects)clipGroup=DvtPlotAreaRenderer.createClippedGroup(a,b,c),DvtRefObjRenderer.renderForegroundObjects(a,clipGroup,c);b=DvtChartDataUtils.getInitialSelection(a);DvtChartEventUtils.setInitialSelection(a,b)};
DvtPlotAreaRenderer._renderDataLabel=function(a,b,c,d,e,g){if(!a.getOptions()._isOverview){var h=DvtChartDataUtils.getDataLabel(a,d,e);if(h){h=new DvtOutputText(a.getCtx(),h,0,0);h.setMouseEnabled(!1);var k=DvtChartStyleUtils.getDataLabelPosition(a,d,e),e=DvtChartStyleUtils.getDataLabelStyle(a,d,e,g,k);h.setCSSStyle(e);h.setY(c.y+c.h/2);h.setX(c.x+c.w/2);h.alignCenter();h.alignMiddle();e=h.measureDimensions();if("center"==k||"inBottom"==k||"inTop"==k||"inRight"==k||"inLeft"==k)if(c.x+=DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP/
2,c.y+=DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP/2,c.h-=DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP,c.w-=DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP,"bar"==DvtChartStyleUtils.getSeriesType(a,d)){if(e.w>c.w||e.h>c.h)return;"inRight"==k?h.setX(c.x+c.w-e.w/2-DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):"inLeft"==k?h.setX(c.x+e.w/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):"inTop"==k?h.setY(c.y+e.h/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):"inBottom"==k&&h.setY(c.y+c.h-e.h/2-DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP/
2)}else{if(DvtChartTypeUtils.isBubble(a)&&(a=h.getOptimalFontSize(c),h.setFontSize(a),!DvtTextUtils.fitText(h,c.w,c.h,b,DvtPlotAreaRenderer._MIN_CHARS_DATA_LABEL)))return}else"right"==k?h.setX(c.x+c.w+e.w/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):"left"==k?h.setX(c.x-e.w/2-DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP):"above"==k?h.setY(c.y-e.h/2):"below"==k&&h.setY(c.y+c.h+e.h/2+DvtPlotAreaRenderer._MARKER_DATA_LABEL_GAP/2);b.addChild(h)}}};
DvtPlotAreaRenderer._renderLabelForDataMarker=function(a,b,c){var d=a.getEventManager().getLogicalObject(c),e=new DvtRectangle(c.getX(),c.getY(),c.getWidth(),c.getHeight());DvtPlotAreaRenderer._renderDataLabel(a,b,e,d.getSeriesIndex(),d.getGroupIndex(),c.getDataColor())};
DvtPlotAreaRenderer._renderDataMarkers=function(a,b,c,d){for(var e=[],g=DvtChartDataUtils.getSeriesCount(a),h=0;h<g;h++)var k=DvtPlotAreaRenderer._getMarkersForSeries(a,h,d),e=e.concat(k);c&&DvtChartMarkerUtils.sortMarkers(e);c=e.length;for(d=0;d<c;d++)b.addChild(e[d]),this._renderLabelForDataMarker(a,b,e[d]);a._currentMarkers.push(e)};
DvtPlotAreaRenderer._renderDataMarkersForSeries=function(a,b,c,d){for(var c=DvtPlotAreaRenderer._getMarkersForSeries(a,c,d),d=c.length,e=0;e<d;e++)b.addChild(c[e]),this._renderLabelForDataMarker(a,b,c[e]);a._currentMarkers.push(c)};
DvtPlotAreaRenderer._getMarkersForSeries=function(a,b,c){if(!DvtChartStyleUtils.isSeriesRendered(a,b))return[];var d=DvtAgent.isTouchDevice(),e=a.getCtx(),g=a.xAxis,h=a.yAxis;DvtChartDataUtils.isAssignedToY2(a,b)&&(h=a.y2Axis);for(var k=a.getOptions(),m=DvtChartTooltipUtils.hasDatatips(a),n=DvtChartTypeUtils.isBubble(a),o=DvtChartTypeUtils.isPolar(a),s=[],t=0;t<DvtChartDataUtils.getGroupCount(a);t++){var u=DvtChartDataUtils.getValue(a,b,t);if(!(null==u||isNaN(u))&&!("multiple"!=k.selection&&DvtChartDataUtils.getDataItem(a,
b,t)._filtered)&&DvtChartStyleUtils.isDataItemRendered(a,b,t)){var u=DvtChartDataUtils.getXValue(a,b,t),v=DvtChartDataUtils.getCumulativeValue(a,b,t);if(n){if(o&&v<h.getViewportMin())continue;u=o?g.getCoordAt(u):g.getUnboundedCoordAt(u);v=h.getUnboundedCoordAt(v)}else u=g.getCoordAt(u),v=h.getCoordAt(v);if(!(null==u||null==v)){if(o)v=DvtPlotAreaRenderer.polarToCartesian(v,u,c),u=v.x,v=v.y;else if(DvtChartTypeUtils.isHorizontal(a))var w=u,u=v,v=w;w="on"==DvtChartStyleUtils.getMarkerDisplayed(a,b,t);
if(!w){var z=DvtChartDataUtils.getGroupCount(a)-1,A=o&&0<z&&t==z?0:t+1,z=DvtChartDataUtils.getValue(a,b,o&&0<z&&0==t?z:t-1),A=DvtChartDataUtils.getValue(a,b,A);if((null==z||isNaN(z))&&(null==A||isNaN(A))&&!DvtChartDataUtils.hasMixedFrequency(a))w=!0}if(!k._duringAnimation||w||DvtChartDataUtils.isDataSelected(a,b,t)){var A=new DvtPoint(u,v),z=DvtChartStyleUtils.getMarkerShape(a,b,t),C=DvtChartStyleUtils.getBorderColor(a,b,t),D=n?0.5:1,B=DvtChartStyleUtils.getMarkerSize(a,b,t),E=B/2;xCoordMinHalf=u-
DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE/2;yCoordMinHalf=v-DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE/2;var u=u-E,v=v-E,E=null,G=w?DvtChartStyleUtils.getMarkerColor(a,b,t):DvtChartStyleUtils.getColor(a,b,t),F=DvtSelectionEffectUtils.getHoverBorderColor(G),K=DvtChartStyleUtils.getSelectedInnerColor(a),J=DvtChartStyleUtils.getSelectedOuterColor(a)?DvtChartStyleUtils.getSelectedOuterColor(a):G;w?(E=new DvtMarker(e,z,DvtCSSStyle.SKIN_ALTA,u,v,B,B),a.isSelectionSupported()&&E.setCursor(DvtSelectionEffectUtils.getSelectingCursor()),
E.setFill(DvtChartSeriesEffectUtils.getMarkerFill(a,b,t)),C&&E.setSolidStroke(C,null,D),E.setDataColor(G),E.setHoverStroke(new DvtSolidStroke(F,1,2)),E.setSelectedStroke(new DvtSolidStroke(K,1,1.5),new DvtSolidStroke(J,1,4.5)),E.setSelectedHoverStroke(new DvtSolidStroke(K,1,1.5),new DvtSolidStroke(F,1,4.5)),d&&B<DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE&&(u=new DvtRect(e,u,v,DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE,DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE),u.setInvisibleFill(),E.addChild(u))):
(a.isSelectionSupported()?(E=new DvtChartLineMarker(e,z,u,v,B),E.setCursor(DvtSelectionEffectUtils.getSelectingCursor()),d&&(u=new DvtRect(e,xCoordMinHalf,yCoordMinHalf,DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE,DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE),u.setInvisibleFill(),E.addChild(u))):(d&&(u=xCoordMinHalf,v=yCoordMinHalf,B=DvtPlotAreaRenderer._MIN_TOUCH_MARKER_SIZE),m&&(E=new DvtMarker(e,DvtMarker.SQUARE,null,u,v,B,B))),null!=E&&(E.setInvisibleFill(),E.setDataColor(G,K,J)));null!=E&&(s.push(E),
DvtChartObjPeer.associate(E,a,b,t,A))}}}}return s};
DvtPlotAreaRenderer._renderBars=function(a,b,c){for(var d=a.getCtx(),e=a.getOptions(),g=a.xAxis,h=DvtChartTypeUtils.isHorizontal(a),k=DvtChartTypeUtils.isPolar(a),m=DvtChartTypeUtils.isStacked(a),n="pixel"==DvtChartStyleUtils.getBarSpacing(a),o=[],s=DvtChartDataUtils.getSeriesCount(a),t=0;t<s;t++)DvtChartStyleUtils.isSeriesRendered(a,t)&&"bar"==DvtChartStyleUtils.getSeriesType(a,t)&&o.push(t);DvtAgent.isRightToLeft(d)&&!m&&!h&&o.reverse();for(var s=e.groups?e.groups.length:0,u=o.length,v=DvtChartStyleUtils.getBarWidth(a,
u,g),w=DvtChartStyleUtils.getBarOffset(a,v,u),z=DvtChartStyleUtils.getY2BarOffset(a,v),A=0;A<u;A++){for(var t=o[A],C=DvtChartDataUtils.isAssignedToY2(a,t),D=C?a.y2Axis:a.yAxis,B=0;B<s;B++){var E=DvtChartDataUtils.getDataItem(a,t,B),G=DvtChartDataUtils.getXValue(a,t,B),F=DvtChartDataUtils.getValue(a,t,B),K=DvtChartDataUtils.getCumulativeValue(a,t,B);if(!(null==F||isNaN(F))){var J=g.getUnboundedCoordAt(G,!1),G=D.getBoundedCoordAt(K),I=D.getBaselineCoord(),H=m?D.getBoundedCoordAt(K-F):I;if(!(G==H&&null===
D.getCoordAt(K))){F=!1;1>Math.abs(G-H)&&(F=!0,G>H?G=H+3:G<=H&&(G=H-3));var J=C?J+w+z:J+w,M=J+v,K=k?DvtPlotAreaRenderer.polarToCartesian(G,(J+M)/2,c):h?new DvtPoint(G,(J+M)/2):new DvtPoint((J+M)/2,G),G=k?new DvtChartPolarBar(d,I,H,G,J,M,c):new DvtChartBar(d,h,m,I,H,G,J,M);b.addChild(G);a.isSelectionSupported()&&G.setCursor(DvtSelectionEffectUtils.getSelectingCursor());I=null;F?F=DvtSolidFill.invisibleFill():(F=DvtChartSeriesEffectUtils.getBarFill(a,t,B,h,v),(H=DvtChartStyleUtils.getBorderColor(a,t,
B))&&(I=new DvtSolidStroke(H)));H=DvtChartStyleUtils.getColor(a,t,B);J=DvtChartStyleUtils.getSelectedInnerColor(a);M=DvtChartStyleUtils.getSelectedOuterColor(a);G.setStyleProperties(F,I,H,J,M);n&&G.setPixelHinting(!0);E="outsideBarEdge"==(E.labelPosition?E.labelPosition:e.styleDefaults.dataLabelPosition)&&!DvtChartTypeUtils.isStacked(a)?b:G;DvtPlotAreaRenderer._renderDataLabel(a,E,G.getBoundingBox(),t,B,DvtChartStyleUtils.getColor(a,t,B));DvtChartObjPeer.associate(G,a,t,B,K);E=[];E.push(G);a._currentMarkers.push(E)}}}!m&&
!DvtChartDataUtils.hasMixedFrequency(a)&&(w+=v)}};
DvtPlotAreaRenderer._renderLines=function(a,b,c,d){for(var e=[],g=DvtChartDataUtils.getSeriesCount(a),h=0;h<g;h++)DvtChartStyleUtils.isSeriesRendered(a,h)&&"line"==DvtChartStyleUtils.getSeriesType(a,h)&&e.push(h);for(g=0;g<e.length;g++){var h=e[g],k=DvtChartStyleUtils.getColor(a,h),m=DvtChartStyleUtils.getLineWidth(a,h),n=DvtStroke.convertTypeString(DvtChartStyleUtils.getLineStyle(a,h)),k=new DvtSolidStroke(k,1,m);k.setStyle(n);DvtChartTypeUtils.isPolar(a)||DvtPlotAreaRenderer._filterPointsForSeries(a,
h);n=DvtPlotAreaRenderer._getCoordsForSeries(a,h,d);n=DvtPlotAreaRenderer.getLinesFromCoords(a,n,k,d);for(k=0;k<n.length;k++)c.addChild(n[k]),DvtChartObjPeer.associate(n[k],a,h)}for(g=0;g<e.length;g++)DvtPlotAreaRenderer._renderDataMarkersForSeries(a,b,e[g],d)};
DvtPlotAreaRenderer._renderAreas=function(a,b,c){for(var d=DvtChartTypeUtils.isStacked(a),e=[],g=DvtChartDataUtils.getSeriesCount(a),h=0;h<g;h++)DvtChartStyleUtils.isSeriesRendered(a,h)&&"area"==DvtChartStyleUtils.getSeriesType(a,h)&&e.push(h);d&&e.reverse();for(var g=DvtPlotAreaRenderer.createClippedGroup(a,b,c),k=0;k<e.length;k++){h=e[k];DvtPlotAreaRenderer._filterPointsForSeries(a,h);for(var m=a.yAxis?a.yAxis.getBaselineCoord():a.y2Axis.getBaselineCoord(),n=DvtPlotAreaRenderer._getCoordsForSeries(a,
h,c),o=DvtChartSeriesEffectUtils.getAreaFill(a,h),s=DvtChartStyleUtils.getBorderColor(a,h),s=s?new DvtSolidStroke(s):null,m=DvtPlotAreaRenderer.getAreasFromCoords(a,n,o,s,m,c),n=0;n<m.length;n++)g.addChild(m[n]),a._currentAreas.push(m[n]),DvtChartObjPeer.associate(m[n],a,h);d||(DvtPlotAreaRenderer._renderDataMarkersForSeries(a,b,h,c),k+1<e.length&&(g=DvtPlotAreaRenderer.createClippedGroup(a,b,c)))}if(d)for(k=0;k<e.length;k++)DvtPlotAreaRenderer._renderDataMarkersForSeries(a,b,e[k],c)};
DvtPlotAreaRenderer._filterPointsForSeries=function(a,b){var c=a.__getPlotAreaSpace().w,d=DvtChartDataUtils.getSeriesItem(a,b).items,e=(a.xAxis.getDataMax()-a.xAxis.getDataMin())/(a.xAxis.getViewportMax()-a.xAxis.getViewportMin()),c=Math.round(2*(d.length/e)/c);if(2>=c)for(e=0;e<d.length;e++)(n=d[e])&&(n._filtered=!1);else for(var g,h,k,m,n,o,e=0;e<d.length;e+=c){g=-1;h=-Infinity;k=-1;m=Infinity;for(var s=e;s<Math.min(e+c,d.length);s++)o=DvtChartDataUtils.getValue(a,b,s),n=d[s],null==o||null==n||
(o>h&&(g=s,h=o),o<m&&(k=s,m=o),n._filtered=!0);for(s=e;s<Math.min(e+c,d.length);s++)if(n=d[s],null!=n&&(s==g||s==k))n._filtered=!1}};
DvtPlotAreaRenderer._getCoordsForSeries=function(a,b){var c=a.xAxis,d=a.yAxis;DvtChartDataUtils.isAssignedToY2(a,b)&&(d=a.y2Axis);for(var e=[],g=0;g<DvtChartDataUtils.getGroupCount(a);g++){var h=DvtChartDataUtils.getValue(a,b,g);if(null==h||isNaN(h))e.push(null);else if(!DvtChartDataUtils.getDataItem(a,b,g)._filtered){var k=DvtChartDataUtils.getXValue(a,b,g),h=DvtChartDataUtils.getCumulativeValue(a,b,g);DvtChartTypeUtils.isPolar(a)&&(h=Math.max(h,d.getViewportMin()));k=c.getUnboundedCoordAt(k);h=
d.getUnboundedCoordAt(h);e.push(new DvtPoint(k,h))}}return e};DvtPlotAreaRenderer.getPointsFromCoords=function(a,b,c){var d=DvtChartTypeUtils.isPolar(a),e=[],g=[];e.push(g);for(var h,k,m=0;m<b.length;m++)null==b[m]?DvtChartDataUtils.hasMixedFrequency(a)||(g=[],e.push(g)):(h=b[m].x,k=b[m].y,d?(h=DvtPlotAreaRenderer.polarToCartesian(k,h,c),g.push(h.x,h.y)):DvtChartTypeUtils.isHorizontal(a)?g.push(k,h):g.push(h,k));d&&1<e.length&&(a=e.pop(),e[0]=a.concat(e[0]));return e};
DvtPlotAreaRenderer.getLinesFromCoords=function(a,b,c,d){for(var e=a.getCtx(),b=DvtPlotAreaRenderer.getPointsFromCoords(a,b,d),d=[],g=0;g<b.length;g++){var h=b[g];h&&1<h.length&&(DvtChartTypeUtils.isPolar(a)&&DvtChartAxisUtils.hasGroupAxis(a)&&h.length==2*DvtChartDataUtils.getGroupCount(a)?(h=new DvtPolygon(e,h),h.setFill(null)):h=new DvtPolyline(e,h),h.setStroke(c),d.push(h))}return d};
DvtPlotAreaRenderer.getAreasFromCoords=function(a,b,c,d,e,g){for(var h=a.getCtx(),b=DvtPlotAreaRenderer.getPointsFromCoords(a,b,g),k=[],m=0;m<b.length;m++){var n=b[m];n&&2<n.length&&(DvtChartTypeUtils.isPolar(a)?n.length<2*DvtChartDataUtils.getGroupCount(a)&&n.push(g.x+g.w/2,g.y+g.h/2):DvtChartTypeUtils.isHorizontal(a)?(n.push(e,n[n.length-1]),n.push(e,n[1])):(n.push(n[n.length-2],e),n.push(n[0],e)),n=new DvtPolygon(h,n),n.setFill(c),d&&n.setStroke(d),k.push(n))}return k};
DvtPlotAreaRenderer.createClippedGroup=function(a,b,c){var d=new DvtContainer(b.getCtx());b.addChild(d);b=new DvtClipPath(a.getId());if(DvtChartTypeUtils.isPolar(a)){var e=c.x+c.w/2,c=c.y+c.h/2;DvtChartAxisUtils.isGridPolygonal(a)?(a=DvtPolygonUtils.getRegularPolygonPoints(e,c,DvtChartDataUtils.getGroupCount(a),a.getRadius(),0),b.addPolygon(a)):b.addCircle(e,c,a.getRadius())}else b.addRect(c.x,c.y,c.w,c.h);d.setClipPath(b);return d};
DvtPlotAreaRenderer.polarToCartesian=function(a,b,c){x=c.x+c.w/2+a*Math.sin(b);y=c.y+c.h/2-a*Math.cos(b);return new DvtPoint(x,y)};var DvtFunnelRenderer={};DvtObj.createSubclass(DvtFunnelRenderer,DvtObj,"DvtFunnelRenderer");DvtFunnelRenderer._DEFAULT_3D_GAP_RATIO=1/36;DvtFunnelRenderer._DEFAULT_2D_GAP_RATIO=1/60;DvtFunnelRenderer._DEFAULT_NO_GAP_RATIO=1/360;DvtFunnelRenderer._MAX_WIDTH_FOR_GAPS=0.25;DvtFunnelRenderer._GROUP_INDEX=0;
DvtFunnelRenderer.render=function(a,b,c){var d=new DvtContainer(a.getCtx());d.setTranslate(c.x,c.y);b.addChild(d);a.setFunnelContainer(d);var e;if("horizontal"==a.getOptions().orientation)e=new DvtRectangle(0,0,c.w,c.h);else{var g=new DvtMatrix;DvtAgent.isRightToLeft(a.getCtx())?(g.translate(c.y-c.h/2,c.y-c.w/2),g.rotate(-Math.PI/2),g.translate(c.x+c.w/2,c.x+c.h/2)):(g.translate(-c.h/2,-c.w/2),g.rotate(Math.PI/2),g.translate(c.w/2,c.y+c.h/2));e=new DvtRectangle(0,0,c.h,c.w);d.setMatrix(g)}DvtFunnelRenderer._renderFunnelSlices(a,
d,e)||DvtChartRenderer.renderEmptyText(a,b,c);b=DvtChartDataUtils.getInitialSelection(a);DvtChartEventUtils.setInitialSelection(a,b)};
DvtFunnelRenderer._renderFunnelSlices=function(a,b,c){for(var d=a.getOptions(),e=DvtChartDataUtils.getSeriesCount(a),g="on"==d.styleDefaults.threeDEffect?DvtFunnelRenderer._DEFAULT_3D_GAP_RATIO*c.w:DvtFunnelRenderer._DEFAULT_2D_GAP_RATIO*c.w,g="on"==d.styleDefaults.funnelSliceGaps?Math.min(DvtFunnelRenderer._MAX_WIDTH_FOR_GAPS*c.w/(e-1),g):DvtFunnelRenderer._DEFAULT_NO_GAP_RATIO*c.w,h=d=0,k=0,m=0;m<e;m++)if(DvtChartStyleUtils.isSeriesRendered(a,m)){var n=DvtChartDataUtils.getTargetValue(a,m);null==
n&&(n=DvtChartDataUtils.getValue(a,m,DvtFunnelRenderer._GROUP_INDEX));0>=n||(d+=n)}if(0==d)return!1;for(m=e-1;0<=m;m--)DvtChartStyleUtils.isSeriesRendered(a,m)&&(n=DvtChartDataUtils.getValue(a,m,DvtFunnelRenderer._GROUP_INDEX),e=DvtChartDataUtils.getTargetValue(a,m),0>=n&&null==e||null!=e&&0>=e||(null!=e?(k+=e/d,e=new DvtFunnelSlice(a,m,h,c.w,c.h,1-k,e/d,n/e,g)):(k+=n/d,e=new DvtFunnelSlice(a,m,h,c.w,c.h,1-k,n/d,null,g)),h++,b.addChild(e),DvtChartObjPeer.associate(e,a,m,DvtFunnelRenderer._GROUP_INDEX)));
return!0};var DvtRefObjRenderer={};DvtObj.createSubclass(DvtRefObjRenderer,DvtObj,"DvtRefObjRenderer");DvtRefObjRenderer.renderBackgroundObjects=function(a,b,c){DvtRefObjRenderer._renderObjects(a,b,c,"back")};DvtRefObjRenderer.renderForegroundObjects=function(a,b,c){DvtRefObjRenderer._renderObjects(a,b,c,"front")};
DvtRefObjRenderer._renderObjects=function(a,b,c,d){DvtRefObjRenderer._renderObjectsForAxis(a,b,c,d,a.xAxis,DvtChartRefObjUtils.getXAxisObjects(a));DvtRefObjRenderer._renderObjectsForAxis(a,b,c,d,a.yAxis,DvtChartRefObjUtils.getYAxisObjects(a));DvtRefObjRenderer._renderObjectsForAxis(a,b,c,d,a.y2Axis,DvtChartRefObjUtils.getY2AxisObjects(a))};
DvtRefObjRenderer._renderObjectsForAxis=function(a,b,c,d,e,g){if(g&&e)for(var h=0;h<g.length;h++){var k=g[h];if(k&&DvtChartRefObjUtils.getLocation(k)==d){var m,n=DvtChartRefObjUtils.getType(k);"area"==n?m=DvtRefObjRenderer._createReferenceArea(k,a,c,e):"line"==n&&(m=DvtRefObjRenderer._createReferenceLine(k,a,c,e));null!=m&&(k=DvtChartTooltipUtils.getRefObjTooltip(a,k),a.getEventManager().associate(m,new DvtSimpleObjPeer(k)),b.addChild(m),m.setAriaRole("img"),m.setAriaProperty("label",k))}}};
DvtRefObjRenderer._createReferenceArea=function(a,b,c,d){var e=b.getCtx(),g=d.getPosition(),h="top"==g||"bottom"==g,k="radial"==g,g=DvtChartRefObjUtils.getColor(a);if(null!=a.items&&d==b.yAxis){var m=a.items,h=[],a=[];if(b.xAxis.isGroupAxis())for(;m.length<DvtChartDataUtils.getGroupCount(b);)m.push(null);for(k=0;k<m.length;k++){var n=m[k];if(null==n||null==n.min||null==n.max)h.push(null),a.push(null);else{var o=d.getUnboundedCoordAt(n.min),n=d.getUnboundedCoordAt(n.max),s=b.xAxis.getUnboundedCoordAt(DvtRefObjRenderer._getXValue(m,
k));h.push(new DvtPoint(s,n));a.push(new DvtPoint(s,o))}}g=DvtRefObjRenderer.getRangeAreasFromCoords(b,h,a,new DvtSolidFill(g),null,c);e=new DvtContainer(e);for(c=0;c<g.length;c++)e.addChild(g[c])}else{if(null==a.min||-Infinity==a.min)a.min=d.getGlobalMin();if(null==a.max||Infinity==a.max)a.max=d.getGlobalMax();m=DvtRefObjRenderer._getAxisCoord(b,d,a.min);d=DvtRefObjRenderer._getAxisCoord(b,d,a.max);DvtChartTypeUtils.isPolar(b)?(h=c.x+c.w/2,a=c.y+c.h/2,k?DvtChartAxisUtils.isGridPolygonal(b)?(c=DvtChartDataUtils.getGroupCount(b),
b=DvtPolygonUtils.getRegularPolygonPoints(h,a,c,d,0,1),c=DvtPolygonUtils.getRegularPolygonPoints(h,a,c,m,0,0),c=DvtPathUtils.polyline(b)+DvtPathUtils.polyline(c)+DvtPathUtils.closePath()):c=DvtPathUtils.moveTo(h,a-d)+DvtPathUtils.arcTo(d,d,Math.PI,1,h,a+d)+DvtPathUtils.arcTo(d,d,Math.PI,1,h,a-d)+DvtPathUtils.moveTo(h,a-m)+DvtPathUtils.arcTo(m,m,Math.PI,0,h,a+m)+DvtPathUtils.arcTo(m,m,Math.PI,0,h,a-m)+DvtPathUtils.closePath():(b=b.getRadius(),k=DvtPlotAreaRenderer.polarToCartesian(b,m,c),c=DvtPlotAreaRenderer.polarToCartesian(b,
d,c),c=DvtPathUtils.moveTo(h,a)+DvtPathUtils.lineTo(k.x,k.y)+DvtPathUtils.arcTo(b,b,d-m,1,c.x,c.y)+DvtPathUtils.lineTo(c.x,c.y)+DvtPathUtils.closePath()),e=new DvtPath(e,c)):e=new DvtPolygon(e,h?[m,0,d,0,d,c.h,m,c.h]:[0,m,0,d,c.w,d,c.w,m]);e.setSolidFill(g)}return e};
DvtRefObjRenderer._createReferenceLine=function(a,b,c,d){var e=d.getPosition(),g="top"==e||"bottom"==e,h="radial"==e,k="tangential"==e,e=DvtChartRefObjUtils.getLineWidth(a),m=DvtChartRefObjUtils.getColor(a),e=new DvtSolidStroke(m,1,e);a.lineStyle&&e.setStyle(DvtStroke.convertTypeString(a.lineStyle));m=b.getCtx();if(null!=a.items&&d==b.yAxis){g=a.items;h=[];[].push(h);if(b.xAxis.isGroupAxis())for(;g.length<DvtChartDataUtils.getGroupCount(b);)g.push(null);h=[];for(k=0;k<g.length;k++){var a=g[k],n=null;
null!=a&&(isNaN(a)?null!=a.value&&(n=a.value):n=a);null==n?h.push(null):(a=d.getUnboundedCoordAt(n),n=b.xAxis.getUnboundedCoordAt(DvtRefObjRenderer._getXValue(g,k)),h.push(new DvtPoint(n,a)))}c=DvtPlotAreaRenderer.getLinesFromCoords(b,h,e,c);b=new DvtContainer(m);for(e=0;e<c.length;e++)b.addChild(c[e])}else if(a.value){n=DvtRefObjRenderer._getAxisCoord(b,d,a.value);if(null===n)return null;d=c.x+c.w/2;a=c.y+c.h/2;h?(DvtChartAxisUtils.isGridPolygonal(b)?(h=DvtPolygonUtils.getRegularPolygonPoints(d,
a,DvtChartDataUtils.getGroupCount(b),n,0),b=new DvtPolygon(m,h)):b=new DvtCircle(m,d,a,n),b.setFill(null)):k?(b=DvtPlotAreaRenderer.polarToCartesian(b.getRadius(),n,c),b=new DvtLine(m,d,a,b.x,b.y)):(b=g?new DvtLine(m,n,0,n,c.h):new DvtLine(m,0,n,c.w,n),b.setPixelHinting(!0));b.setStroke(e)}else return null;return b};
DvtRefObjRenderer.getRangeAreasFromCoords=function(a,b,c,d,e,g){var h=a.getCtx(),b=DvtPlotAreaRenderer.getPointsFromCoords(a,b,g),c=DvtPlotAreaRenderer.getPointsFromCoords(a,c,g);if(b.length==c.length){for(var g=[],k=0;k<b.length;k++){var m=b[k],n=c[k];if(!(2>m.length)){DvtChartTypeUtils.isPolar(a)&&DvtChartAxisUtils.hasGroupAxis(a)&&m.length==2*DvtChartDataUtils.getGroupCount(a)&&(m.push(m[0],m[1]),n.push(n[0],n[1]));m=m.slice(0);for(n=0;n<c[k].length;n+=2)m.unshift(c[k][n],c[k][n+1]);m=new DvtPolygon(h,
m);m.setFill(d);e&&m.setSolidStroke(e);g.push(m)}}return g}};DvtRefObjRenderer._getXValue=function(a,b){var c=a[b];return isNaN(c.x)?b:c.x};DvtRefObjRenderer._getAxisCoord=function(a,b,c){return b.isGroupAxis()&&(a=DvtChartDataUtils.getGroupIndex(a,c),0<=a)?b.getUnboundedCoordAt(a):!isNaN(c)?b.getUnboundedCoordAt(c):null};var DvtDataCursor=function(a,b){this.Init(a,b)};DvtObj.createSubclass(DvtDataCursor,DvtContainer,"DvtDataCursor");DvtDataCursor._DEFAULT_COLOR="#5a5a5a";
DvtDataCursor.BEHAVIOR_SNAP="SNAP";DvtDataCursor.BEHAVIOR_SMOOTH="SMOOTH";DvtDataCursor.BEHAVIOR_AUTO="AUTO";DvtDataCursor._CURSOR_LINE_WIDTH=2;DvtDataCursor._DATATIP_BORDER_WIDTH=2;DvtDataCursor._DATATIP_TEXT_PADDING=2;DvtDataCursor._MARKER_SIZE_OUTER=16;DvtDataCursor._MARKER_SIZE_MIDDLE=12;DvtDataCursor._MARKER_SIZE_INNER=8;DvtDataCursor.TOOLTIP_ID="_dvtDataCursor";
DvtDataCursor.prototype.Init=function(a,b){DvtDataCursor.superclass.Init.call(this,a);this._bHoriz=b;this.setMouseEnabled(!1);this.setVisible(!1);b?(this._cursorLineRect=new DvtRect(this.getCtx(),0,0,0,DvtDataCursor._CURSOR_LINE_WIDTH,"dcLine"),this._cursorLineRect.setTranslateY(-DvtDataCursor._CURSOR_LINE_WIDTH/2)):(this._cursorLineRect=new DvtRect(this.getCtx(),0,0,DvtDataCursor._CURSOR_LINE_WIDTH,0,"dcLine"),this._cursorLineRect.setTranslateX(-DvtDataCursor._CURSOR_LINE_WIDTH/2));this._cursorLineRect.setSolidFill(DvtDataCursor._DEFAULT_COLOR);
this._cursorLineRect.setMouseEnabled(!1);this.addChild(this._cursorLineRect);this._marker=new DvtContainer(this._context,"dotContainer");this._marker.setMouseEnabled(!1);this.addChild(this._marker);var c=new DvtMarker(this._context,DvtMarker.CIRCLE,null,0,0,DvtDataCursor._MARKER_SIZE_OUTER,DvtDataCursor._MARKER_SIZE_OUTER);c.setTranslate(-DvtDataCursor._MARKER_SIZE_OUTER/2,-DvtDataCursor._MARKER_SIZE_OUTER/2);c.setSolidFill(DvtDataCursor._DEFAULT_COLOR);c.setMouseEnabled(!1);this._marker.addChild(c);
c=new DvtMarker(this._context,DvtMarker.CIRCLE,null,0,0,DvtDataCursor._MARKER_SIZE_MIDDLE,DvtDataCursor._MARKER_SIZE_MIDDLE);c.setTranslate(-DvtDataCursor._MARKER_SIZE_MIDDLE/2,-DvtDataCursor._MARKER_SIZE_MIDDLE/2);c.setSolidFill("white");c.setMouseEnabled(!1);this._marker.addChild(c);this._markerInnerCircle=new DvtMarker(this._context,DvtMarker.CIRCLE,null,0,0,DvtDataCursor._MARKER_SIZE_INNER,DvtDataCursor._MARKER_SIZE_INNER);this._markerInnerCircle.setTranslate(-DvtDataCursor._MARKER_SIZE_INNER/
2,-DvtDataCursor._MARKER_SIZE_INNER/2);this._markerInnerCircle.setMouseEnabled(!1);this._marker.addChild(this._markerInnerCircle)};
DvtDataCursor.prototype.render=function(a,b,c,d,e,g){var h=this.isHorizontal(),k=DvtAgent.isRightToLeft(this.getCtx()),m=this.getCtx().getStageAbsolutePosition(),n=this.getCtx().getTooltipManager(DvtDataCursor.TOOLTIP_ID);n.showDatatip(b+m.x,c+m.y,e,g,!1);var e=n.getTooltipBounds(),o,s;h?(o=k?a.x-0.75*e.w:a.x+a.w-e.w/4,s=d-e.h/2,!k&&o-b<DvtDataCursor._MARKER_SIZE_OUTER?o=b+DvtDataCursor._MARKER_SIZE_OUTER:k&&b-(o+e.w)<DvtDataCursor._MARKER_SIZE_OUTER&&(o=b-DvtDataCursor._MARKER_SIZE_OUTER-e.w)):(o=
d-e.w/2,s=a.y-0.75*e.h,c-(s+e.h)<DvtDataCursor._MARKER_SIZE_OUTER&&(s=c-DvtDataCursor._MARKER_SIZE_OUTER-e.h));n.positionTip(o+m.x,s+m.y);e=n.getTooltipBounds();o=e.x-m.x;s=e.y-m.y;this._markerInnerCircle.setSolidFill(g);h?(this.setTranslate(a.x,d),this._marker.setTranslate(b-a.x,c-d),this._cursorLineRect.setWidth(Math.max(o+DvtDataCursor._DATATIP_BORDER_WIDTH/2-a.x,0)),k&&(e=o+e.w+DvtDataCursor._DATATIP_BORDER_WIDTH/2-a.x,this._cursorLineRect.setX(e),this._cursorLineRect.setWidth(Math.max(a.w-e,
0)))):(this.setTranslate(d,a.y+DvtDataCursor._DATATIP_BORDER_WIDTH/2),this._marker.setTranslate(b-d,c-a.y),b=DvtAgent.isBrowserChrome(),c=a.y+a.h-s-e.h+(b?2*DvtDataCursor._DATATIP_BORDER_WIDTH:0),this._cursorLineRect.setTranslateY(s+e.h-(a.y+(b?2*DvtDataCursor._DATATIP_BORDER_WIDTH:DvtDataCursor._DATATIP_BORDER_WIDTH/2))),this._cursorLineRect.setHeight(Math.max(c,0)));DvtAgent.workaroundFirefoxRepaint(this._marker)};DvtDataCursor.prototype.isHorizontal=function(){return this._bHoriz};
DvtDataCursor.prototype.setLineColor=function(a){this._cursorLineRect.setSolidFill(a)};DvtDataCursor.prototype.setTooltipFill=function(){};DvtDataCursor.prototype.getBehavior=function(){return this._behavior?this._behavior:DvtDataCursor.BEHAVIOR_AUTO};DvtDataCursor.prototype.setBehavior=function(a){this._behavior=a};var DvtDCEH=function(){};DvtObj.createSubclass(DvtDCEH,DvtObj,"DvtDCEH");
DvtDCEH.prototype._Init=function(a,b){this._context=a;this._isNumericMainAxis=this._useAllInGroup=this._horizontal=this._dataCursorShown=!1;this._dataCursor=b;this._threeDHorizontalOffset=0};DvtDCEH.prototype.processMove=function(a,b,c,d){if(c){b=this._context.pageToStageCoords(a,b);a=b.x;b=b.y;if(d=this.getActionablePlotRect(a,b,d))return this._showDataCursor(d,a,b,c),!0;this._removeDataCursor();return!1}this._removeDataCursor()};DvtDCEH.prototype.processEnd=function(){this._removeDataCursor()};
DvtDCEH.prototype.processOut=function(a){this.getPlotRect().containsPoint(a.x,a.y)||this._removeDataCursor()};
DvtDCEH.prototype._showDataCursor=function(a,b,c,d){var e=this._dataCursor,g=this.getClosestMatch(b,c,d,a);if(null==g)this._removeDataCursor();else{d=DvtGeomUtils.getCenterPoint(g.matchRegion);e.getBehavior()==DvtDataCursor.BEHAVIOR_SNAP&&(e.isHorizontal()?c=Math.min(Math.max(d.y,a.y),a.y+a.h):b=Math.min(Math.max(d.x,a.x),a.x+a.w));if(this._threeDHorizontalOffset){var h=a.x+a.w-this._threeDHorizontalOffset;b>h&&(b=h)}h=this.getTooltipText(g);!h||""==h?e.setVisible(!1):(e.setVisible(!0),g=this.getSeriesColor(g.sidx,
g.gidx),b=e.isHorizontal()?c:b,e.render(a,d.x,d.y,b,h,g),this._dataCursorShown=!0)}};DvtDCEH.prototype._removeDataCursor=function(){this._dataCursor.getVisible()&&this._dataCursor.setVisible(!1);this._context.getTooltipManager(DvtDataCursor.TOOLTIP_ID).hideTooltip();this._dataCursorShown=!1};DvtDCEH.prototype.isDataCursorShown=function(){return this._dataCursorShown};
DvtDCEH.AddPotentialMatch=function(a,b,c,d){var e=b.matchRegion;if(d){if(e.y+e.h<c.y||e.y>c.y+c.h)return!1}else if(e.x+e.w<c.x||e.x>c.x+c.w)return!1;a.push(b);return!0};DvtDCEH.GetClosestMatchSecondDirection=function(a,b,c,d){for(var e=null,g=1E8,h=0;h<a.length;h++){var k=a[h],m=Math.abs(((b?k.matchRegion.x:k.matchRegion.y)+(b?k.matchRegion.x+k.matchRegion.w:k.matchRegion.y+k.matchRegion.h))/2-(b?c:d));m<g&&(g=m,e=k)}return e};
DvtDCEH.GetClosestMatchesFirstDirection=function(a,b,c,d){for(var e=1E7,g=[],h=0;h<a.length;h++){var k=a[h],m=Math.abs(((b?k.matchRegion.y:k.matchRegion.x)+(b?k.matchRegion.y+k.matchRegion.h:k.matchRegion.x+k.matchRegion.w))/2-(b?d:c));m<=e&&(m<e&&(g=[]),g.push(k),e=m)}return g};DvtDCEH.prototype.getActionablePlotRect=function(){return null};DvtDCEH.prototype.getPlotRect=function(){return null};DvtDCEH.prototype.getSeriesColor=function(){return"black"};DvtDCEH.prototype.getTooltipText=function(){return"Base class should override"};
DvtDCEH.prototype.findMatches=function(){return null};
DvtDCEH.prototype.getClosestMatch=function(a,b,c,d){var e=this._horizontal,g=this._useAllInGroup,h=this._isNumericMainAxis,k=[];if(c=this.findMatches(a,b,c,k,d))return c;c=DvtDCEH.GetClosestMatchesFirstDirection(k,e,a,b);if(!h){for(var h=1E6,d=-1E6,m=null,n=0;n<c.length;n++)m=c[n],h=Math.min(h,e?m.matchRegion.y:m.matchRegion.x),d=Math.max(d,e?m.matchRegion.y+m.matchRegion.h:m.matchRegion.x+m.matchRegion.w),m=m.gidx;for(n=0;n<k.length;n++){var o=k[n],s=o.gidx;g?m==s&&c.push(o):(s=((e?o.matchRegion.y:
o.matchRegion.x)+(e?o.matchRegion.y+o.matchRegion.h:o.matchRegion.x+o.matchRegion.w))/2,d>=s&&h<=s&&c.push(o))}}return DvtDCEH.GetClosestMatchSecondDirection(c,e,a,b)};var DvtChartDCEH=function(a){this._Init(a)};DvtObj.createSubclass(DvtChartDCEH,DvtDCEH,"DvtChartDCEH");
DvtChartDCEH.prototype._Init=function(a){DvtChartDCEH.superclass._Init.call(this,a.getCtx(),a.DataCursor);this._Chart=a;this._horizontal=DvtChartTypeUtils.isHorizontal(a);this._useAllInGroup=DvtChartTypeUtils.isArea(a)||DvtChartTypeUtils.isLine(a);this._isNumericMainAxis=DvtChartTypeUtils.isScatterBubble(a);this._isStockChart=!1;this._isArea=DvtChartTypeUtils.isArea(a)};DvtChartDCEH.prototype.getPlotRect=function(){return this._Chart.__getPlotAreaSpace()};
DvtChartDCEH.prototype.getActionablePlotRect=function(a,b){var c=this.getPlotRect();return c.containsPoint(a,b)?c:null};
DvtChartDCEH.prototype.findMatches=function(a,b,c,d){a=this._Chart;b=a.getCtx().getStage();c=a.getEventManager();if(!a._currentMarkers)return null;for(var e=0;e<a._currentMarkers.length;e++)for(var g=a._currentMarkers[e],h=g.length,k=0;k<h;k++){var m=g[k],n=c.GetLogicalObject(m),o=m.getDimensionsSelf?m.getDimensionsSelf(b):m.getDimensions(b),m={obj:m,matchRegion:o,gidx:n.getGroupIndex(),sidx:n.getSeriesIndex(),marker:null};d.push(m)}return null};
DvtChartDCEH.prototype.getSeriesColor=function(a,b){return DvtChartTooltipUtils.getDatatipColor(this._Chart,a,b)};DvtChartDCEH.prototype.getTooltipText=function(a){return DvtChartTooltipUtils.getDatatip(a.obj,this._Chart,a.sidx,a.gidx)};var DvtSparkChart=function(){};DvtObj.createSubclass(DvtSparkChart,DvtBaseComponent,"DvtSparkChart");DvtSparkChart.newInstance=function(a,b,c){var d=new DvtSparkChart;d.Init(a,b,c);return d};DvtSparkChart.getDefaults=function(a){return(new DvtSparkChartDefaults).getDefaults(a)};
DvtSparkChart.prototype.Init=function(a,b,c){DvtSparkChart.superclass.Init.call(this,a,b,c);this.Defaults=new DvtSparkChartDefaults;this._eventHandler=new DvtEventManager(a);this._eventHandler.addListeners(this);this._chart=DvtChart.newInstance(a);this.addChild(this._chart);this._tooltipMask=new DvtRect(a);this.addChild(this._tooltipMask);this.setId("sparkChart1000"+Math.floor(1E9*Math.random()))};
DvtSparkChart.prototype.SetOptions=function(a){a?(this.Options=this.Defaults.calcOptions(a),DvtAgent.isEnvironmentBrowser()||(this.Options.animationOnDisplay="none",this.Options.animationOnDataChange="none")):this.Options||(this.Options=this.GetDefaults())};DvtSparkChart.prototype.setId=function(a){DvtSparkChart.superclass.setId.call(this,a);this._chart&&this._chart.setId(a+"chart")};
DvtSparkChart.prototype.render=function(a,b,c){this.SetOptions(a);!isNaN(b)&&!isNaN(c)&&(this.Width=b,this.Height=c);DvtSparkChartRenderer.render(this,this.Width,this.Height);a=this.Options.shortDesc;this._tooltipMask.setWidth(this.Width);this._tooltipMask.setHeight(this.Height);this._tooltipMask.setInvisibleFill();a&&this._eventHandler.associate(this._tooltipMask,new DvtSimpleObjPeer(null,a,this.Options.color));this.setAriaRole("img");this.setAriaProperty("label",a)};
DvtSparkChart.prototype.__getChart=function(){return this._chart};DvtSparkChart.prototype.__getOptions=function(){return this.Options};var DvtSparkChartDefaults=function(){this.Init({skyros:DvtSparkChartDefaults.VERSION_1,alta:DvtSparkChartDefaults.SKIN_ALTA})};DvtObj.createSubclass(DvtSparkChartDefaults,DvtBaseComponentDefaults,"DvtSparkChartDefaults");DvtSparkChartDefaults.SKIN_ALTA={skin:DvtCSSStyle.SKIN_ALTA,color:"#267db3"};
DvtSparkChartDefaults.VERSION_1={skin:DvtCSSStyle.SKIN_SKYROS,type:"line",animationOnDisplay:"none",animationOnDataChange:"none",emptyText:null,color:"#666699",firstColor:null,lastColor:null,highColor:null,lowColor:null,visualEffects:"auto",baselineScaling:"min",barSpacing:"auto",lineWidth:1,lineStyle:"solid",markerSize:5,markerShape:"auto",barGapRatio:0.25};var DvtSparkChartRenderer={};DvtObj.createSubclass(DvtSparkChartRenderer,DvtObj,"DvtSparkChartRenderer");
DvtSparkChartRenderer.render=function(a,b,c){var d=a.__getChart(),e=DvtSparkChartRenderer._convertOptionsObj(a),g=a.__getOptions();if("area"==g.type||"line"==g.type){var a=DvtSparkChartRenderer._getDataItems(a),h=!1;if(g.firstColor||g.lastColor||g.highColor||g.lowColor)h=!0;else for(var k=0;k<a.length;k++)if(a[k]&&"on"==a[k].markerDisplayed){h=!0;break}h&&0<a.length&&(g=g.markerSize/2,b-=2*g,c-=2*g,d.setTranslate(g,g))}d.render(e,b,c)};
DvtSparkChartRenderer._getDataItems=function(a){return(a=a.__getOptions())&&a.items?a.items:[]};
DvtSparkChartRenderer._convertOptionsObj=function(a){for(var b=a.__getOptions(),c={styleDefaults:{},xAxis:{},yAxis:{},__layout:{}},d="floatingBar"==b.type,e=[],g=[],h=-1,k=-1,m=-Infinity,n=Infinity,a=DvtSparkChartRenderer._getDataItems(a),o=0;o<a.length;o++){var s=a[o],t={};s instanceof Object?(t.y=s.value,s.date&&(t.x=s.date,c.timeAxisType="enabled"),"on"==s.markerDisplayed&&(t.markerDisplayed="on"),s.color&&(t.color=s.color),s.borderColor&&(t.borderColor=s.borderColor),s.markerShape&&(t.markerShape=
s.markerShape),s.markerSize&&(t.markerSize=s.markerSize),d&&(s=s.floatValue,isNaN(s)&&(s=0),g.push(s))):(t.y=s,d&&g.push(0));e.push(t);m<t.y&&(m=t.y,h=o);n>t.y&&(n=t.y,k=o)}b.highColor&&0<=h&&(e[h].markerDisplayed="on",e[h].color||(e[h].color=b.highColor));b.lowColor&&0<=k&&(e[k].markerDisplayed="on",e[k].color||(e[k].color=b.lowColor));b.firstColor&&0<e.length&&(e[0].markerDisplayed="on",e[0].color||(e[0].color=b.firstColor));b.lastColor&&0<e.length&&(e[e.length-1].markerDisplayed="on",e[e.length-
1].color||(e[e.length-1].color=b.lastColor));c.series=[{items:e}];d&&c.series.splice(0,0,{items:g,color:"rgba(0, 0, 0, 0)"});b.referenceObjects&&(c.yAxis.referenceObjects=b.referenceObjects);c.__spark=!0;e=b.barSpacing;"auto"==e&&(e=1<DvtAgent.getDevicePixelRatio()?"subpixel":"pixel");c.__sparkBarSpacing=e;c.type=b.type;c.animationOnDataChange=b.animationOnDataChange;c.animationOnDisplay=b.animationOnDisplay;c.emptyText=b.emptyText;c.styleDefaults.colors=[b.color];c.styleDefaults.animationDuration=
b.animationDuration;c.styleDefaults.animationIndicators="none";c.styleDefaults.lineWidth=b.lineWidth;c.styleDefaults.lineStyle=b.lineStyle;c.styleDefaults.markerSize=b.markerSize;c.styleDefaults.markerShape=b.markerShape;c.styleDefaults.barGapRatio=b.barGapRatio;c.styleDefaults.seriesTooltipType="none";c.styleDefaults.groupTooltipType="none";c.styleDefaults.valueTooltipType="none";c.xAxis.rendered="off";c.yAxis.baselineScaling=b.baselineScaling;c.yAxis.rendered="off";d&&(c.type="bar",c.stack="on");
c.styleDefaults.seriesEffect="none"==b.visualEffects||"area"!=b.type?"color":"gradient";c.layout={gapRatio:0};c.legend={rendered:"off"};c.title=c.title?c.title:{};c.title.style="font-size: 12px; color: #404259;";return c};