var DvtTimeComponent=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtTimeComponent,DvtContainer,"DvtTimeComponent");DvtTimeComponent.BACKGROUND_ID="bg";DvtTimeComponent.prototype.Init=function(a,b,c){DvtTimeComponent.superclass.Init.call(this,a);this._callback=b;this._callbackObj=c;this._virtualize=!1};DvtTimeComponent.prototype.render=function(a,b,c){this._options=c;this.Width=a;this.Height=b;this._fetchStartPos=0;this._fetchEndPos=a;null==c&&this.removeChildren();c&&this._applyParsedProperties(this.Parse(c))};
DvtTimeComponent.prototype.addTick=function(a,b,c,d,e,g){b=new DvtLine(this.getCtx(),b,c,b,d,g);b.setStroke(e);b.setPixelHinting(!0);a.addChild(b);return b};DvtTimeComponent.prototype.addAxisLabel=function(a,b,c,d,e){b.setX(c);b.setY(d);DvtTextUtils.fitText(b,e,Infinity,a);b.alignCenter()};
DvtTimeComponent.prototype.addLabel=function(a,b,c,d,e,g,h,k,m){c=new DvtOutputText(this.getCtx(),c,b,0,h);null!=g&&c.setCSSStyle(g);a.addChild(c);var n=c.getDimensions();a.removeChild(c);e-=n.h;c.setY(e);k&&(b=new DvtRect(this.getCtx(),b-m,e-m,Math.min(n.w+2*m,d),n.h+2*m,"ob_"+h),b.setCSSStyle(g),b.setCornerRadius(3),a.addChild(b));DvtTextUtils.fitText(c,d,Infinity,a);return c};
DvtTimeComponent.prototype._applyParsedProperties=function(a){this._origStart=a.origStart;this._origEnd=a.origEnd;this._start=a.start;this._end=a.end;this._orientation=a.orientation;this._isRtl=a.isRtl;this._inlineStyle=a.inlineStyle;this._scale=a.scale;this._seriesScale=a.seriesScale;this._converter=a.converter;this.applyStyleValues()};DvtTimeComponent.prototype.applyStyleValues=function(){this._style.parseInlineStyle(this._inlineStyle)};DvtTimeComponent.prototype.isAnimationEnabled=function(){return!0};
DvtTimeComponent.prototype.getAdjustedStartTime=function(){return this._start};DvtTimeComponent.prototype.getAdjustedEndTime=function(){return this._end};DvtTimeComponent.prototype.getContainerWidth=function(){return this._contentWidth};DvtTimeComponent.prototype.setContainerWidth=function(a){this._contentWidth=this._canvasWidth<a?a:this._canvasWidth;this._virtualize||(this._fetchStartPos=0,this._fetchEndPos=this._contentWidth)};
DvtTimeComponent.prototype.renderScrollableCanvas=function(){null==this._canvas&&(this._canvas=new DvtContainer(this.getCtx(),"canvas"),this.addChild(this._canvas))};DvtTimeComponent.prototype.updateTimeAxis=function(){};DvtTimeComponent.prototype.getTimeAxisWidth=function(){null==this._timeAxisWidth&&(this._timeAxisWidth=30);return this._timeAxisWidth};DvtTimeComponent.prototype.isRTL=function(){return!1};
DvtTimeComponent.prototype.setVScrollPos=function(a){null!=this._canvas&&this._canvas.setTranslateY(0-a)};var DvtTimeComponentAxis=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtTimeComponentAxis,DvtContainer,"DvtTimeComponentAxis");DvtTimeComponentAxis.DEFAULT_INTERVAL_WIDTH=50;DvtTimeComponentAxis.DEFAULT_INTERVAL_HEIGHT=21;DvtTimeComponentAxis.DEFAULT_INTERVAL_PADDING=2;DvtTimeComponentAxis.DEFAULT_BORDER_TOP_WIDTH=1;DvtTimeComponentAxis.DEFAULT_BORDER_BOTTOM_WIDTH=1;
DvtTimeComponentAxis.prototype.Init=function(a){DvtTimeComponentAxis.superclass.Init.call(this,a);this._calendar=new DvtTimeComponentCalendar;this._formatter=new DvtTimeComponentAxisFormatter(DvtTimeComponentAxisFormatter.SHORT);this._contentHeight=DvtTimeComponentAxis.DEFAULT_INTERVAL_HEIGHT;this._borderTopWidth=DvtTimeComponentAxis.DEFAULT_BORDER_TOP_WIDTH;this._borderBottomWidth=DvtTimeComponentAxis.DEFAULT_BORDER_BOTTOM_WIDTH;this._zoomOrders="days,weeks,months,quarters,halfyears,years".split(",");
this._zoomLevels={days:"Days",weeks:"Weeks",quarters:"Quarters",halfyears:"Half Years",years:"Years"}};DvtTimeComponentAxis.prototype.setScale=function(a){this._scale=a};DvtTimeComponentAxis.prototype.setConverter=function(a){a&&"function"===typeof a.getAsString&&(this._converter=a)};DvtTimeComponentAxis.prototype.getContentHeight=function(){return this._contentHeight};
DvtTimeComponentAxis.prototype.setContentHeight=function(a){a>DvtTimeComponentAxis.DEFAULT_INTERVAL_HEIGHT&&(this._contentHeight=a)};DvtTimeComponentAxis.prototype.setBorderTopWidth=function(a){this._borderTopWidth=a};DvtTimeComponentAxis.prototype.setBorderBottomWidth=function(a){this._borderBottomWidth=a};DvtTimeComponentAxis.prototype.getHeight=function(){return this._contentHeight+this._borderTopWidth+this._borderBottomWidth};
DvtTimeComponentAxis.prototype.getPosHeight=function(){return this._contentHeight+(this._borderTopWidth+this._borderBottomWidth)/2};DvtTimeComponentAxis.prototype.setType=function(a){this._formatter=new DvtTimeComponentAxisFormatter(a)};DvtTimeComponentAxis.prototype.adjustDate=function(a){return this._calendar.adjustDate(new Date(a),this._scale)};DvtTimeComponentAxis.prototype.getNextDate=function(a){return this._calendar.getNextDate(new Date(a),this._scale)};
DvtTimeComponentAxis.prototype.formatDate=function(a){return this._converter?this._converter.getAsString(a):this._formatter.format(a,this._scale)};DvtTimeComponentAxis.prototype.getZoomOrders=function(){return this._zoomOrders};DvtTimeComponentAxis.prototype.setZoomOrders=function(a){this._zoomOrders=a};DvtTimeComponentAxis.prototype.getZoomLabel=function(a){return this._zoomLevels[a]};var DvtTimeComponentAxisFormatter=function(a,b){this.Init(a,b)};
DvtObj.createSubclass(DvtTimeComponentAxisFormatter,DvtObj,"DvtTimeComponentAxisFormatter");DvtTimeComponentAxisFormatter.LONG=0;DvtTimeComponentAxisFormatter.SHORT=1;
DvtTimeComponentAxisFormatter.prototype.Init=function(a,b){this._type=a;this._locale=b;this._formats=[];this._formats[0]={};this._formats[0].weeks="mmmm dd yyyy";this._formats[0].months="mmmm yyyy";this._formats[0].days="ddd, mmm dd yyyy";this._formats[0].hours="HH:MM";this._formats[0].quarters="mmmm";this._formats[0].halfyears="yyyy";this._formats[0].years="yyyy";this._formats[0].twoyears="yyyy";this._formats[1]={};this._formats[1].weeks="m/dd";this._formats[1].months="mmm";this._formats[1].days=
"m/dd";this._formats[1].hours="HH:MM";this._formats[1].quarters="mmm";this._formats[1].halfyears="yy";this._formats[1].years="yy";this._formats[1].twoyears="yy"};DvtTimeComponentAxisFormatter.prototype.setPattern=function(a,b){this._formats[this._type][a]=b};DvtTimeComponentAxisFormatter.prototype.format=function(a,b){var c=this._formats[this._type][b];return null!=c?a.format(c):a.toLocaleString()};
var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a};return function(e,g,h){var k=dateFormat;1==arguments.length&&"[object String]"==Object.prototype.toString.call(e)&&!/\d/.test(e)&&(g=e,e=void 0);e=e?new Date(e):new Date;if(isNaN(e))throw SyntaxError("invalid date");
g=""+(k.masks[g]||g||k.masks["default"]);"UTC:"==g.slice(0,4)&&(g=g.slice(4),h=!0);var m=h?"getUTC":"get",n=e[m+"Date"](),o=e[m+"Day"](),s=e[m+"Month"](),t=e[m+"FullYear"](),u=e[m+"Hours"](),v=e[m+"Minutes"](),w=e[m+"Seconds"](),m=e[m+"Milliseconds"](),z=h?0:e.getTimezoneOffset(),A={d:n,dd:d(n),ddd:k.i18n.dayNames[o],dddd:k.i18n.dayNames[o+7],m:s+1,mm:d(s+1),mmm:k.i18n.monthNames[s],mmmm:k.i18n.monthNames[s+12],yy:(""+t).slice(2),yyyy:t,h:u%12||12,hh:d(u%12||12),H:u,HH:d(u),M:v,MM:d(v),s:w,ss:d(w),
l:d(m,3),L:d(99<m?Math.round(m/10):m),t:12>u?"a":"p",tt:12>u?"am":"pm",T:12>u?"A":"P",TT:12>u?"AM":"PM",Z:h?"UTC":((""+e).match(b)||[""]).pop().replace(c,""),o:(0<z?"-":"+")+d(100*Math.floor(Math.abs(z)/60)+Math.abs(z)%60,4),S:["th","st","nd","rd"][3<n%10?0:(10!=n%100-n%10)*n%10]};return g.replace(a,function(a){return a in A?A[a]:a.slice(1,a.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),monthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December".split(",")};
Date.prototype.format=function(a,b){return dateFormat(this,a,b)};var DvtTimeComponentCalendar=function(a){this.Init(a)};DvtObj.createSubclass(DvtTimeComponentCalendar,DvtObj,"DvtTimeComponentCalendar");DvtTimeComponentCalendar.prototype.Init=function(){this._dayInMillis=864E5};DvtTimeComponentCalendar.prototype.getFirstDayOfWeek=function(){return 0};
DvtTimeComponentCalendar.prototype.adjustDate=function(a,b){var c=new Date(a.getTime());if("weeks"==b){c.setHours(0,0,0);var d=(a.getDay()-this.getFirstDayOfWeek()+7)%7;0<d&&c.setTime(c.getTime()-d*this._dayInMillis)}else"months"==b?c.setDate(1):"days"==b?c.setHours(0,0,0):"hours"==b?c.setMinutes(0,0,0):"quarters"==b?(c.setDate(1),d=2-(a.getMonth()+11)%3,0<d&&c.setMonth(c.getMonth()+d)):"halfyears"==b?(_adjustdDate.setDate(1),d=5-(a.getMonth()+11)%6,0<d&&c.setMonth(c.getMonth()+d)):"years"==b?(c.setMonth(0),
c.setDate(1)):"twoyears"==b&&(c.setMonth(0),c.setDate(1));return c};
DvtTimeComponentCalendar.prototype.getNextDate=function(a,b){var c=new Date(a.getTime());"days"==b?c.setDate(a.getDate()+1):"weeks"==b?c.setDate(a.getDate()+7):"months"==b?c.setMonth(a.getMonth()+1):"hours"==b?c.setHours(a.getHours()+1):"quarters"==b?c.setMonth(a.getMonth()+3):"halfyears"==b?c.setMonth(a.getMonth()+6):"years"==b?c.setFullYear(a.getFullYear()+1):"twoyears"==b?c.setFullYear(a.getFullYear()+2):c.setYear(a.getYear()+1);return c};var DvtTimeComponentParser=function(a){this.Init(a)};
DvtObj.createSubclass(DvtTimeComponentParser,DvtObj,"DvtTimeComponentParser");DvtTimeComponentParser.prototype.Init=function(a){this._view=a;this._calendar=new DvtTimeComponentCalendar};DvtTimeComponentParser.prototype.parse=function(a){this._startTime=new Date(a.startTime);this._endTime=new Date(a.endTime);var b=this.ParseRootAttributes();b.inlineStyle=a.style;return b};
DvtTimeComponentParser.prototype.ParseRootAttributes=function(){var a={};a.origStart=this._startTime;a.origEnd=this._endTime;a.orientation="horizontal";return a};DvtTimeComponentParser.prototype.getCalendar=function(){return this._calendar};DvtTimeComponentParser.prototype.setCalendar=function(a){this._calendar=a};DvtTimeComponentParser.prototype.getDate=function(a){return null==a?null:a.getTime?a.getTime():isNaN(a)?(new Date(a)).getTime()+0:a};
DvtTimeComponentParser.prototype.adjustDate=function(a,b){return this._calendar.adjustDate(a,b)};DvtTimeComponentParser.prototype.getNextDate=function(a,b){return this._calendar.getNextDate(a,b)};var DvtElementNode=function(){};DvtElementNode.prototype.getChildNodes=function(){return this.childNodes};DvtElementNode.prototype.getName=function(){return this.getAttribute("name")};DvtElementNode.prototype.getAttribute=function(a){return this[a]};DvtTimeUtils={supportsTouch:function(){return DvtAgent.isTouchDevice()}};
DvtObj.createSubclass(DvtTimeUtils,DvtObj,"DvtTimeUtils");DvtTimeUtils.getDatePosition=function(a,b,c,d){c=(c-a)*d;a=b-a;return 0==c||0==a?0:c/a};DvtTimeUtils.getPositionDate=function(a,b,c,d){b=c*(b-a);return 0==b||0==d?a:b/d+a};var DvtTimeline=function(){};DvtObj.createSubclass(DvtTimeline,DvtTimeComponent,"DvtTimeline");DvtTimeline.DEFAULT_TIMELINE_STYLE="border:1px #d9dfe3;";DvtTimeline.DEFAULT_AXIS_STYLE="background-color:#f9f9f9;border:1px #d9dfe3;";DvtTimeline.DEFAULT_AXIS_LABEL_STYLE="color:#333333;font-size:12px;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;";
DvtTimeline.DEFAULT_SERIES_AXIS_LABEL_STYLE="background-color:rgba(249,249,249,0.8);color:#4f4f4f;white-space:nowrap;font-size:14px;font-weight:bold;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;";DvtTimeline.DEFAULT_SERIES_AXIS_LABEL_PADDING=1;DvtTimeline.DEFAULT_AXIS_SEPARATOR_STYLE="color:#bcc7d2";DvtTimeline.DEFAULT_HOTSPOT_BACKGROUND_COLOR="#000000";DvtTimeline.DEFAULT_HOTSPOT_BORDER_RADIUS=2;DvtTimeline.DEFAULT_HOTSPOT_OPACITY=0.6;DvtTimeline.DEFAULT_HOTSPOT_WIDTH=28;
DvtTimeline.DEFAULT_HOTSPOT_HEIGHT=28;DvtTimeline.DEFAULT_HOTSPOT_PADDING=3;DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH=14;DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT=14;DvtTimeline.newInstance=function(a,b,c){var d=new DvtTimeline;d.Init(a,b,c);return d};
DvtTimeline.prototype.Init=function(a,b,c){DvtTimeline.superclass.Init.call(this,a,b,c);this.setId("timeline1000"+Math.floor(1E9*Math.random()));DvtTimeUtils.supportsTouch()?(this.addEvtListener("touchstart",this.HandleTouchStart,!1,this),this.addEvtListener("touchmove",this.HandleTouchMove,!1,this),this.addEvtListener("touchend",this.HandleTouchEnd,!1,this)):(this.addEvtListener("mousedown",this.HandleMouseDown,!1,this),this.addEvtListener("mouseup",this.HandleMouseUp,!1,this),this.addEvtListener("mousemove",
this.HandleMouseMove,!1,this))};DvtTimeline.prototype._setOptions=function(a){this._options=a};DvtTimeline.prototype._getOptions=function(){return this._options};DvtTimeline.prototype.Parse=function(a){this._parser=new DvtTimelineParser(this);return this._parser.parse(a)};
DvtTimeline.prototype._applyParsedProperties=function(a){DvtTimeline.superclass._applyParsedProperties.call(this,a);this._selectionMode=a.selectionMode;this._axisInlineStyle=a.axisStyle;this._shortDesc=a.shortDesc;this._timeAxis=new DvtTimeComponentAxis(this.getCtx());this._timeAxis.setScale(this._scale);this._timeAxis.setConverter(this._converter);this._seriesScale&&(this._seriesConverter=a.seriesConverter,this._seriesTimeAxis=new DvtTimeComponentAxis(this.getCtx()),this._seriesTimeAxis.setScale(this._seriesScale),
this._seriesTimeAxis.setConverter(this._seriesConverter),this._seriesTimeAxis.setType(DvtTimeComponentAxisFormatter.LONG));this._defaultInversions=[!1,!0]};DvtTimeline.prototype.getTimeAxisHeight=function(){return this._timeAxis.getHeight()};
DvtTimeline.prototype.render=function(a,b,c){this._setOptions(a);this._fetchStartPos=0;this._fetchEndPos=b;this._resources=a._resources;null==this._resources&&(this._resources=[]);this._compWidth=b;this._compHeight=c;a&&this._applyParsedProperties(this.Parse(a));this.removeChildren();this._axisStyle=new DvtCSSStyle(DvtTimeline.DEFAULT_AXIS_STYLE);a.styleDefaults&&(this._axisStyleDefaults=a.styleDefaults.timeAxis,this._itemStyleDefaults=a.styleDefaults.timelineItem,this._seriesStyleDefaults=a.styleDefaults.timelineSeries);
this.prepareTimeAxis(this._start,this._end);this._populateSeries();this.createBackground();this.renderScrollableCanvas();this.setupInnerCanvas();this.applyAxisStyleValues();this.renderSeries();this.renderSeriesLabels();this.applyInitialSelections();this.renderAxis();this.renderScrollHotspots();this.showThenHideHotspots()};
DvtTimeline.prototype.renderScrollHotspots=function(){if(this._series){var a=this._series.length;this._scrollHotspots=[];for(var b=0;b<a;b++){var c=this._series[b],d=new DvtContainer(this.getCtx(),"hotspots_s"+b);this.addChild(d);if(this._contentWidth>this._canvasWidth){var e=this._startX+DvtTimeline.DEFAULT_HOTSPOT_PADDING,g=this._startX+this._canvasWidth-DvtTimeline.DEFAULT_HOTSPOT_WIDTH-DvtTimeline.DEFAULT_HOTSPOT_PADDING,h=this._startY+b*(this._seriesHeight+this.getTimeAxisHeight())+(this._seriesHeight-
DvtTimeline.DEFAULT_HOTSPOT_HEIGHT)/2,k=e+DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH/2,m=g+DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH/2,n=h+DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT/2,e=new DvtRect(this.getCtx(),e,h,DvtTimeline.DEFAULT_HOTSPOT_WIDTH,DvtTimeline.DEFAULT_HOTSPOT_HEIGHT,"lhs");e.setFill(new DvtSolidFill(DvtTimeline.DEFAULT_HOTSPOT_BACKGROUND_COLOR,1));e.setCornerRadius(DvtTimeline.DEFAULT_HOTSPOT_BORDER_RADIUS);e.hotspot="left";e.setAlpha(0);k=new DvtImage(this.getCtx(),this._resources.scrollLeft,
k,n,DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH,DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT,"lhs_arr");k.hotspot="left";e.addChild(k);g=new DvtRect(this.getCtx(),g,h,DvtTimeline.DEFAULT_HOTSPOT_WIDTH,DvtTimeline.DEFAULT_HOTSPOT_HEIGHT,"rhs");g.setFill(new DvtSolidFill(DvtTimeline.DEFAULT_HOTSPOT_BACKGROUND_COLOR,1));g.setCornerRadius(DvtTimeline.DEFAULT_HOTSPOT_BORDER_RADIUS);g.hotspot="right";g.setAlpha(0);m=new DvtImage(this.getCtx(),this._resources.scrollRight,m,n,DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH,
DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT,"rhs_arr");m.hotspot="right";g.addChild(m);d.addChild(e);this._scrollHotspots.push(e);d.addChild(g);this._scrollHotspots.push(g)}c._maxHeight>this._seriesHeight&&(e=this._startX+(this._canvasWidth-DvtTimeline.DEFAULT_HOTSPOT_WIDTH)/2,n=this._startY+b*(this._seriesHeight+this.getTimeAxisHeight())+DvtTimeline.DEFAULT_HOTSPOT_PADDING,g=this._startY+(b+1)*this._seriesHeight+b*this.getTimeAxisHeight()-DvtTimeline.DEFAULT_HOTSPOT_WIDTH-DvtTimeline.DEFAULT_HOTSPOT_PADDING,
c=e+DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH/2,h=n+DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT/2,m=g+DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT/2,n=new DvtRect(this.getCtx(),e,n,DvtTimeline.DEFAULT_HOTSPOT_WIDTH,DvtTimeline.DEFAULT_HOTSPOT_HEIGHT,"ths"),n.setFill(new DvtSolidFill(DvtTimeline.DEFAULT_HOTSPOT_BACKGROUND_COLOR,1)),n.setCornerRadius(DvtTimeline.DEFAULT_HOTSPOT_BORDER_RADIUS),n.hotspot="top",n.setAlpha(0),h=new DvtImage(this.getCtx(),this._resources.scrollUp,c,h,DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH,
DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT,"ths_arr"),h.hotspot="top",n.addChild(h),e=new DvtRect(this.getCtx(),e,g,DvtTimeline.DEFAULT_HOTSPOT_WIDTH,DvtTimeline.DEFAULT_HOTSPOT_HEIGHT,"bhs"),e.setFill(new DvtSolidFill(DvtTimeline.DEFAULT_HOTSPOT_BACKGROUND_COLOR,1)),e.setCornerRadius(DvtTimeline.DEFAULT_HOTSPOT_BORDER_RADIUS),e.hotspot="bottom",e.setAlpha(0),c=new DvtImage(this.getCtx(),this._resources.scrollDown,c,m,DvtTimeline.DEFAULT_HOTSPOT_ARROW_WIDTH,DvtTimeline.DEFAULT_HOTSPOT_ARROW_HEIGHT,
"bhs_arr"),c.hotspot="bottom",e.addChild(c),d.addChild(n),this._scrollHotspots.push(n),d.addChild(e),this._scrollHotspots.push(e))}}};
DvtTimeline.prototype.showThenHideHotspots=function(a){var b=this._scrollHotspots.length;if(0!=b){for(var c=new DvtAnimator(this.getCtx(),0.5,0,DvtEasing.linear),d=0;d<b;d++){var e=this._scrollHotspots[d],g=!0;if(null!=a){var h=e.getParent().getId();a!=h.substring(h.length-1)&&(g=!1)}g&&c.addProp(DvtAnimator.TYPE_NUMBER,e,e.getAlpha,e.setAlpha,DvtTimeline.DEFAULT_HOTSPOT_OPACITY)}DvtPlayable.appendOnEnd(c,this.hideHotspots,this);c.play()}};
DvtTimeline.prototype.hideHotspots=function(){var a=this._scrollHotspots.length;if(0!=a){for(var b=new DvtAnimator(this.getCtx(),0.5,0,DvtEasing.linear),c=0;c<a;c++){var d=this._scrollHotspots[c];b.addProp(DvtAnimator.TYPE_NUMBER,d,d.getAlpha,d.setAlpha,0)}b.play()}};
DvtTimeline.prototype.applyStyleValues=function(){this._style=new DvtCSSStyle(DvtTimeline.DEFAULT_TIMELINE_STYLE);DvtTimeline.superclass.applyStyleValues.call(this);var a=this._style.getBorderSideWidth("border-left-width"),b=this._style.getBorderSideWidth("border-top-width"),c=this._style.getBorderSideWidth("border-right-width"),d=this._style.getBorderSideWidth("border-bottom-width");this._startX=a;this._startY=b;this._backgroundWidth=this._compWidth-(a+c)/2;this._backgroundHeight=this._compHeight-
(b+d)/2;this._canvasWidth=this._backgroundWidth-(a+c)/2;this._canvasHeight=this._backgroundHeight-(b+d)/2};
DvtTimeline.prototype.applyAxisStyleValues=function(){if(this._axisStyleDefaults){var a="",b=this._axisStyleDefaults.backgroundColor;b&&(a=a+"background-color:"+b+";");(b=this._axisStyleDefaults.borderColor)&&(a=a+"border-color:"+b+";");(b=this._axisStyleDefaults.borderWidth)&&(a=a+"border-width:"+b+";");this._axisStyle.parseInlineStyle(a)}this._axisStyle.parseInlineStyle(this._axisInlineStyle);this._timeAxis.setBorderTopWidth(this._axisStyle.getBorderSideWidth("border-top-width"));this._timeAxis.setBorderBottomWidth(this._axisStyle.getBorderSideWidth("border-bottom-width"));
a=this._axisStyle.getBorderSideWidth("border-left-width");b=this._axisStyle.getBorderSideWidth("border-right-width");this._axisWidth=this._contentWidth+(a+b)/2;this._axisStartX=-a/2};
DvtTimeline.prototype.createBackground=function(){this._background=new DvtRect(this.getCtx(),this._startX/2,this._startY/2,this._backgroundWidth,this._backgroundHeight,"bg");this._background.setCSSStyle(this._style);this._background.setPixelHinting(!0);this._shortDesc&&this._background.setAriaProperty("label",this._shortDesc);this.addChild(this._background)};
DvtTimeline.prototype.setupInnerCanvas=function(){var a=new DvtClipPath;a.addRect(this._startX,this._startY,this._canvasWidth,this._canvasHeight);this._canvas.setClipPath(a);this._innerCanvas=new DvtContainer(this.getCtx(),"iCanvas");this._innerCanvas.setTranslateX(this._startX);this._innerCanvas.setTranslateY(this._startY);this._canvas.addChild(this._innerCanvas)};
DvtTimeline.prototype.prepareTimeAxis=function(a,b){var c=this.getCtx(),d=new DvtCSSStyle(DvtTimeline.DEFAULT_AXIS_LABEL_STYLE);this._axisStyleDefaults&&d.parseInlineStyle(this._axisStyleDefaults.labelStyle);var e=new DvtRect(c,0,0,0,0,"tempAxis"),g=Infinity,h=0;this._dates=[];this._labels=[];var k=this._timeAxis.adjustDate(a).getTime();for(this._dates.push(k);k<b;){var m=this._timeAxis.formatDate(this._timeAxis.adjustDate(k)),n=new DvtOutputText(c,m,0,0,"s_label"+k);n.setCSSStyle(d);n.time=k;this._labels.push(n);
m=this._timeAxis.getNextDate(this._timeAxis.adjustDate(k)).getTime();e.addChild(n);var o=n.getDimensions();e.removeChild(n);n=Math.max(DvtTimeComponentAxis.DEFAULT_INTERVAL_WIDTH,o.w+2*DvtTimeComponentAxis.DEFAULT_INTERVAL_PADDING);k=(m-k)/n;k<g&&(g=k);o.h>h&&(h=o.h);k=m;this._dates.push(k)}this._timeAxis.setContentHeight(h+2*DvtTimeComponentAxis.DEFAULT_INTERVAL_PADDING);this.setContainerWidth((b-a)/g)};
DvtTimeline.prototype._populateSeries=function(){this._series=[];this._seriesOptions=[];var a=this._options.series;if(a)for(var b=Math.min(a.length,2),c=0;c<b;c++){var d=a[c];d.startTime=this._start;d.endTime=this._end;d.inverted=this._defaultInversions[c];this._options.axis&&(d.scale=this._options.axis.scale);a[0].axis&&(d.seriesScale=a[0].axis.scale,0==c&&(d.converter=d.axis.converter));this._options.styleDefaults&&(d.styleDefaults=this._seriesStyleDefaults,d.itemStyleDefaults=this._itemStyleDefaults);
this._seriesOptions.push(d);this._series.push(new DvtTimelineSeries(this.getCtx(),this.HandleEvent,this))}};
DvtTimeline.prototype.renderAxis=function(){var a=this._series.length;if(null==this._axis){var b=this._timeAxis.getPosHeight(),c=1==a?this._canvasHeight-b:this._canvasHeight/a-b/2;this._axis=new DvtRect(this.getCtx(),this._axisStartX,c,this._axisWidth,b,"axis");this._axis.setCSSStyle(this._axisStyle);this._axis.setPixelHinting(!0);this._innerCanvas.addChild(this._axis)}this.createSeriesTicks(this._contentWidth,a)};
DvtTimeline.prototype.createSeriesTicks=function(a,b){this._axis.removeChildren();var c=new DvtCSSStyle(DvtTimeline.DEFAULT_AXIS_SEPARATOR_STYLE),d=new DvtCSSStyle(DvtTimeline.DEFAULT_SERIES_AXIS_LABEL_STYLE);if(this._axisStyleDefaults){var e=this._axisStyleDefaults.separatorColor;e&&c.parseInlineStyle("color:"+e+";");this._seriesStyleDefaults&&d.parseInlineStyle(this._seriesStyleDefaults.axisLabelStyle)}var c=new DvtSolidStroke(c.getStyle(DvtCSSStyle.COLOR)),e=this._timeAxis.getContentHeight(),g=
1==b?this._canvasHeight-e:this._canvasHeight/b-e/2;this.renderTimeAxis(this._fetchStartPos,this._fetchEndPos,this._axis,a,g+e,g,g,c);this._seriesScale&&this.renderSeriesTimeAxis(this._fetchStartPos,this._fetchEndPos,this._innerCanvas,"o_",a,d)};
DvtTimeline.prototype.renderTimeAxis=function(a,b,c,d,e,g,h,k){var m=new DvtContainer(this.getCtx(),"block_"+a+"_"+b);m.startPos=a;m.endPos=b;c.addChild(m);for(a=0;a<this._dates.length-1;a++){var b=this._dates[a],n=this._dates[a+1],c=DvtTimeUtils.getDatePosition(this._start,this._end,b,d),n=DvtTimeUtils.getDatePosition(this._start,this._end,n,d),o=n-c;0!=c&&(this.addTick(m,c,e,g,k,"s_tick"+b).time=b);this.addAxisLabel(m,this._labels[a],c+(n-c)/2,h+2,o)}};
DvtTimeline.prototype.renderSeriesTimeAxis=function(a,b,c,d,e,g){for(var h=this._start,k=this._end,a=DvtTimeUtils.getPositionDate(h,k,a,e),m=this._seriesTimeAxis.adjustDate(a),a=new Date(a),m=DvtTimeUtils.getDatePosition(h,k,m,e);m<b;){var n=this._seriesTimeAxis.formatDate(this._seriesTimeAxis.adjustDate(a)),o=this._seriesTimeAxis.getNextDate(this._seriesTimeAxis.adjustDate(a)),s=DvtTimeUtils.getDatePosition(h,k,o,e),t=s-m,u=m;this.isRTL()&&(u=e-u);this.addLabel(c,u+5,n,t,this._seriesHeight-2,g,d+
"label"+m+"_s0",!0,DvtTimeline.DEFAULT_SERIES_AXIS_LABEL_PADDING).time=a.getTime();c.lastDate=a;c.lastDatePos=m;a=o;m=s}};
DvtTimeline.prototype.renderSeries=function(){if(this._series){var a=this._series.length;this._seriesHeight=(this._canvasHeight-this.getTimeAxisHeight()+1)/a;for(var b=0;b<a;b++){var c=new DvtMatrix(1,0,0,1,0,b*(this._seriesHeight+this.getTimeAxisHeight())),d=this._series[b],e=new DvtClipPath;e.addRect(0,b*(this._seriesHeight+this.getTimeAxisHeight()),this._contentWidth,this._seriesHeight);d.setClipPath(e);d.setMatrix(c);this._innerCanvas.addChild(d);d.render(this._contentWidth,this._seriesHeight,
this._seriesOptions[b])}}};
DvtTimeline.prototype.renderSeriesLabels=function(){if(this._series)for(var a=this._series.length,b=0;b<a;b++){var c=this._series[b],d=c.getLabel();if(null!=d){var e=c.getLabelStyle(),d=new DvtOutputText(this.getCtx(),d,0,0,"sl_s"+b);d.setCSSStyle(e);this.addChild(d);var g=d.getDimensions();this.removeChild(d);var h=new DvtRect(this.getCtx(),0,0,g.w+2*DvtTimelineSeries.DEFAULT_LABEL_PADDING,g.h+2*DvtTimelineSeries.DEFAULT_LABEL_PADDING,"slb_s"+b);h.setCSSStyle(e);h.setCornerRadius(3);var e=this._startX+
20,k=b*(this._canvasHeight-g.h-40)+20+this._startY,g=new DvtMatrix(1,0,0,1,e,k);d.setMatrix(g);g=new DvtMatrix(1,0,0,1,e-DvtTimelineSeries.DEFAULT_LABEL_PADDING,k-DvtTimelineSeries.DEFAULT_LABEL_PADDING);h.setMatrix(g);this.addChild(h);this.addChild(d)}c._isEmpty&&(d=c.getEmptyText(),null!=d&&(h=c.getEmptyTextStyle(),c=new DvtOutputText(this.getCtx(),d,0,0,"et_s"+b),c.setCSSStyle(h),this.addChild(c),g=c.getDimensions(),this.removeChild(c),g=new DvtMatrix(1,0,0,1,(this._canvasWidth-g.w)/2+this._startX,
b*(this._seriesHeight+this.getTimeAxisHeight())+(this._seriesHeight-g.h)/2+this._startY),c.setMatrix(g),this.addChild(c)))}};DvtTimeline.prototype.HandleTouchStart=function(a){var b=a.getNativeEvent().touches;if(b&&1==b.length){if(this._dragPanSeries=this._findSeries(a.target))var c=this._series[0]==this._dragPanSeries?0:1;this.showThenHideHotspots(c);this.beginDragPan(b[0].pageX,b[0].pageY)}else b&&1<b.length&&(this._isActive=this._isDragPan=!1,this._dragPanSeries=null)};
DvtTimeline.prototype.HandleMouseDown=function(a){if(this._dragPanSeries=this._findSeries(a.target))var b=this._series[0]==this._dragPanSeries?0:1;this.showThenHideHotspots(b);this.beginDragPan(a.pageX,a.pageY)};DvtTimeline.prototype.beginDragPan=function(a,b){this._isActive=!0;this._currentX=a;this._currentY=b};DvtTimeline.prototype.HandleTouchEnd=function(a){this._isDragPan?this.endDragPan(a):this.handleShapeClick(a)};
DvtTimeline.prototype.HandleMouseUp=function(a){this._isActive=!1;this._isDragPan?this.endDragPan(a):this.handleShapeClick(a)};DvtTimeline.prototype.endDragPan=function(){this._isActive=this._isDragPan=!1};DvtTimeline.prototype.HandleTouchMove=function(a){a=a.getNativeEvent();a.preventDefault();(a=a.touches)&&1==a.length&&this.contDragPan(a[0].pageX,a[0].pageY)};DvtTimeline.prototype.HandleMouseMove=function(a){this.contDragPan(a.pageX,a.pageY)};
DvtTimeline.prototype.contDragPan=function(a,b){if(this._isDragPan){var c=this._currentX-a,d=this._currentY-b;this._currentX=a;this._currentY=b;var c=this._innerCanvas.getTranslateX()-c,e=-(this._contentWidth-this._canvasWidth-this._startX),g=this._startX;c<e?c=e:c>g&&(c=g);this._innerCanvas.setTranslateX(c);this._dragPanSeries&&(d=this._dragPanSeries.getTranslateY()-d,this._dragPanSeries._isInverted?(c=this.getTimeAxisHeight()+2*this._dragPanSeries.Height-this._dragPanSeries._maxHeight,e=this._dragPanSeries.Height+
this.getTimeAxisHeight()):(c=0,e=this._dragPanSeries._maxHeight-this._dragPanSeries.Height),d<c?d=c:d>e&&(d=e),this._dragPanSeries.setTranslateY(d))}else this._isActive&&(this._isDragPan=!0)};DvtTimeline.prototype.HandleEvent=function(a){var b=a.getType();("selection"==b||"dvtAct"==b)&&DvtEventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,a)};
DvtTimeline.prototype.handleShapeClick=function(a){if(a){a=this._findDrawable(a.target);if("single"==this._selectionMode)if(a)for(var b=this._findSeries(a),c=0;c<this._series.length;c++){var d=this._series[c];d==b?d.HandleItemClick(a._node,!1):d.removeAllSelectedItems()}else for(c=0;c<this._series.length;c++)this._series[c].removeAllSelectedItems();a&&(b=this._findSeries(a),b.HandleItemAction(a._node))}};
DvtTimeline.prototype.applyInitialSelections=function(){if("single"==this._selectionMode)for(var a=0;a<this._series.length;a++){var b=this._series[a];if(b._initialSelection&&0<b._initialSelection.length){for(var a=b._initialSelection[0],c=0;c<b._items.length;c++)b._items[c].getId()==a&&b.HandleItemClick(b._items[c],!1);break}}};
DvtTimeline.prototype._findSeries=function(a){if(a&&a!=this){var b=a.getId();return b&&"series"==b.substr(0,6)?a:b&&"_s0"==b.substring(b.length-3,b.length)?this._series[0]:b&&"_s1"==b.substring(b.length-3,b.length)?this._series[1]:this._findSeries(a.getParent())}return null};
DvtTimeline.prototype._findDrawable=function(a){if(a){var b=a.getId();if(b&&"_duration_"==b.substr(0,10)&&a._node)return a;if(a=a.getParent()){if(b&&"_bubble_"==b.substr(0,8)&&a._node)return a;if(a=a.getParent())if((b=a.getId())&&"_bubble_"==b.substr(0,8)&&a.getParent())return a.getParent()}}return null};var DvtTimelineParser=function(a){this.Init(a)};DvtObj.createSubclass(DvtTimelineParser,DvtTimeComponentParser,"DvtTimelineParser");
DvtTimelineParser.prototype.parse=function(a){this._itemSelection=a.itemSelection;var b=DvtTimelineParser.superclass.parse.call(this,a);b.scale=a.axis.scale;var c=a.series[0].axis;c&&(b.seriesScale=c.scale,b.seriesConverter=c.converter);b.converter=a.axis.converter;b.axisStyle=a.axis.style;b.shortDesc=a.shortDesc;return b};
DvtTimelineParser.prototype.ParseRootAttributes=function(){var a=DvtTimelineParser.superclass.ParseRootAttributes.call(this);a.start=this._startTime.getTime();a.end=this._endTime.getTime();a.selectionMode="none";null!=this._itemSelection&&(a.selectionMode=this._itemSelection);return a};var DvtTimelineSeries=function(a,b,c){this.Init(a,b,c)};DvtObj.createSubclass(DvtTimelineSeries,DvtTimeComponent,"DvtTimelineSeries");DvtTimelineSeries.DEFAULT_BUBBLE_OFFSET=20;
DvtTimelineSeries.DEFAULT_BUBBLE_SPACING=15;DvtTimelineSeries.DEFAULT_DURATION_FEELER_OFFSET=10;DvtTimelineSeries.ENABLED_STATE_KEY="en";DvtTimelineSeries.SELECTED_STATE_KEY="sel";DvtTimelineSeries.FEELER_WIDTH_KEY="fw";DvtTimelineSeries.FEELER_COLOR_KEY="fc";DvtTimelineSeries.DEFAULT_STYLE="background-color:#f9f9f9;";DvtTimelineSeries.DEFAULT_LABEL_STYLE="background-color:rgba(249,249,249,0.8);color:#252525;white-space:nowrap;font-size:13px;font-weight:bold;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;";
DvtTimelineSeries.DEFAULT_LABEL_PADDING=2;DvtTimelineSeries.DEFAULT_EMPTY_TEXT_STYLE="color:#333333;white-space:nowrap;font-size:12px;font-weight:normal;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;";DvtTimelineSeries.DEFAULT_SERIES_AXIS_SEPARATOR_STYLE="color:#bcc7d2";DvtTimelineSeries.DEFAULT_ITEM_ENABLED_STYLE="background-color:#ffffff;border:1px #648baf";DvtTimelineSeries.DEFAULT_ITEM_SELECTED_STYLE="background-color:#ffffff;border:2px #333333";
DvtTimelineSeries.DEFAULT_ITEM_TITLE_STYLE="color:#000000;white-space:nowrap;font-size:12px;font-weight:bold;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;";DvtTimelineSeries.DEFAULT_ITEM_DESCRIPTION_STYLE="color:#084B8A;white-space:nowrap;font-size:12px;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;";DvtTimelineSeries.DEFAULT_FEELER_ENABLED_WIDTH="1";DvtTimelineSeries.DEFAULT_FEELER_SELECTED_WIDTH="2";DvtTimelineSeries.DEFAULT_FEELER_ENABLED_COLOR="#648baf";
DvtTimelineSeries.DEFAULT_FEELER_SELECTED_COLOR="#333333";DvtTimelineSeries.DEFAULT_EMPTY_TEXT="No data to display.";DvtTimelineSeries.DEFAULT_COLORS_ARRAY="#267DB3,#68C182,#FAD55C,#ED6647,#8561C8,#6DDBDB,#FFB54D,#E371B2,#47BDEF,#A2BF39,#A75DBA,#F7F37B".split(",");DvtTimelineSeries.prototype.Init=function(a,b,c){DvtTimelineSeries.superclass.Init.call(this,a,b,c);this.setId("series1000"+Math.floor(1E9*Math.random()));this._blocks=[];this._itemListeners=[]};
DvtTimelineSeries.prototype.resetAnimators=function(){if(null!=this._animatorQueue)for(var a=0;a<this._animatorQueue.length;a++)this._animatorQueue[a].stop(!0);null!=this._animationTimer&&this._animationTimer.stop();delete this._animatorQueue;delete this._animationTimer};DvtTimelineSeries.prototype.addAnimator=function(a){null==this._animatorQueue&&(this._animatorQueue=[]);this._animatorQueue.push(a)};
DvtTimelineSeries.prototype.startAnimations=function(){if(null!=this._animatorQueue&&0<this._animatorQueue.length){if(this._animatorQueue.shift().play(),null==this._animationTimer){var a=2500/this._animatorQueue.length/2;this._animationTimer=new DvtTimer(this.getCtx(),a,this.startAnimations,this);this._animationTimer.start()}}else null!=this._animationTimer&&this._animationTimer.stop()};
DvtTimelineSeries.prototype.render=function(a,b,c){this._style=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_STYLE);DvtTimelineSeries.superclass.render.call(this,a,b,c);this._maxHeight=b;this._isInverted=c.inverted;this._colorCount=0;this._maxDurationY=1;this._styleDefaults=c.styleDefaults;this._itemStyleDefaults=c.itemStyleDefaults;this._colors=DvtTimelineSeries.DEFAULT_COLORS_ARRAY;this._labelStyle=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_LABEL_STYLE);this._emptyTextStyle=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_EMPTY_TEXT_STYLE);
if(this._styleDefaults){(c=this._styleDefaults.backgroundColor)&&this._style.parseInlineStyle("background-color:"+c+";");if(c=this._styleDefaults.colors)this._colors=c;(c=this._styleDefaults.labelStyle)&&this._labelStyle.parseInlineStyle(c);(c=this._styleDefaults.emptyTextStyle)&&this._emptyTextStyle.parseInlineStyle(c)}this.createBackground(a,b);this._seriesScale&&(this._seriesTicks=new DvtContainer(this.getCtx(),"seriesTicks"),this.addChild(this._seriesTicks));this.renderScrollableCanvas();this.parseDataXML();
this._seriesScale&&this.createSeriesTicks(a)};DvtTimelineSeries.prototype.createSeriesTicks=function(a){var b=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_SERIES_AXIS_SEPARATOR_STYLE);if(this._styleDefaults){var c=this._styleDefaults.axisSeparatorColor;c&&b.parseInlineStyle("color:"+c+";")}b=new DvtSolidStroke(b.getStyle(DvtCSSStyle.COLOR));b.setStyle(DvtStroke.DASHED,3);this.renderSeriesTimeAxis(this._fetchStartPos,this._fetchEndPos,this._seriesTicks,"o_",a,b)};
DvtTimelineSeries.prototype.renderSeriesTimeAxis=function(a,b,c,d,e,g){c.removeChildren();for(var h=this._start,k=this._end,a=DvtTimeUtils.getPositionDate(h,k,a,e),m=this._seriesTimeAxis.adjustDate(a),a=new Date(a),m=DvtTimeUtils.getDatePosition(h,k,m,e);m<b;){var n=this._seriesTimeAxis.getNextDate(this._seriesTimeAxis.adjustDate(a)),o=DvtTimeUtils.getDatePosition(h,k,n,e),s=m;this.isRTL()&&(s=e-s);if(this._isInverted)var t=0,u=this._maxHeight;else t=this.Height-this._maxHeight,u=this.Height;this.addTick(c,
s,t,u,g,d+"tick"+m).time=a.getTime();c.lastDate=a;c.lastDatePos=m;a=n;m=o}};DvtTimelineSeries.prototype.createBackground=function(a,b){this._background=new DvtRect(this.getCtx(),0,0,a,b,"bg");this._background.setCSSStyle(this._style);this._background.setPixelHinting(!0);this.addChild(this._background)};DvtTimelineSeries.prototype.Parse=function(a){this._parser=new DvtTimelineSeriesParser(this);return this._parser.parse(a)};
DvtTimelineSeries.prototype._applyParsedProperties=function(a){DvtTimelineSeries.superclass._applyParsedProperties.call(this,a);this._seriesScale&&(this._seriesTimeAxis=new DvtTimeComponentAxis(this.getCtx()),this._seriesTimeAxis.setScale(this._seriesScale),this._seriesTimeAxis.setConverter(this._converter),this._seriesTimeAxis.setType(DvtTimeComponentAxisFormatter.LONG));this._isEmpty=(this._items=a.items)&&0<this._items.length?!1:!0;this._initialSelection=a.initialSelection;this._defaultStyles=
a.defaultStyles;this._itemTitleStyle=a.itemTitleStyle;this._itemDescriptionStyle=a.itemDescriptionStyle;this._label=a.label;this._emptyText=a.emptyText;null==this._emptyText&&(this._emptyText=DvtTimelineSeries.DEFAULT_EMPTY_TEXT)};
DvtTimelineSeries.prototype.renderItems=function(a,b,c){var d=new DvtContainer(this.getCtx(),"itemBlock_"+a+"_"+b);d.startPos=a;d.endPos=b;this.prepareDurations(this._items);this._initialY=20+DvtTimelineSeries.DEFAULT_BUBBLE_SPACING+10*this._maxDurationY;for(var e=0;e<this._items.length;e++){var g=this._items[e],h=DvtTimeUtils.getDatePosition(this._start,this._end,g.getStartTime(),this.Width);h<a||h>b||this.addItem(d,d.feelers,d.durations,g,c)}this.renderDurations(d.durations);this._canvas.addChild(d);
this._blocks.push(d)};
DvtTimelineSeries.prototype.renderDurations=function(a){for(var b=this.getCtx(),c=this._maxDurationY;0<c;c--)for(var d=0;d<this._items.length;d++){var e=this._items[d];if(null!=e.getEndTime()&&c==e.getDurationLevel()){var g=DvtTimeUtils.getDatePosition(this._start,this._end,e.getStartTime(),this.Width),h="_duration_"+e.getId(),k=22+10*e.getDurationLevel(),m=DvtTimeUtils.getDatePosition(this._start,this._end,e.getEndTime(),this.Width),g=this._isInverted?new DvtRect(b,g,-5,m-g,k,h):new DvtRect(b,g,
this.Height-k+5,m-g,k,h);g.setCornerRadius(5);g.setFill(new DvtSolidFill(e.getDurationFillColor()));h=this.getStyle(DvtTimelineSeries.ENABLED_STATE_KEY+DvtTimelineSeries.FEELER_WIDTH_KEY);m=this.getStyle(DvtTimelineSeries.ENABLED_STATE_KEY+DvtTimelineSeries.FEELER_COLOR_KEY);h=new DvtSolidStroke(m,1,parseInt(h));g.setStroke(h);g._node=e;a.addChild(g);e.setDurationBar(g);e.setDurationY(k-5)}}};
DvtTimelineSeries.prototype.parseDataXML=function(){null!=this._items&&(this.resetAnimators(),this.renderItems(this._fetchStartPos,this._fetchEndPos),this.adjustFeelers(),this._isInverted||(this.adjustDurations(),this.adjustItems()),this.adjustBackground(),this.startAnimations())};
DvtTimelineSeries.prototype.adjustBackground=function(){if(this._maxHeight>this.Height&&(this._background.setHeight(this._maxHeight),!this._isInverted)){var a=this._maxHeight-this.Height;this._background.setTranslateY(this._background.getTranslateY()-a)}};
DvtTimelineSeries.prototype.calculateY=function(a,b){if(!(null==this._items||0==this._items.length)){var c=a.getX(),d=a.getY();null==d&&(d=this._initialY);for(var e=this._maxHeight,g=DvtTimelineSeries.DEFAULT_BUBBLE_SPACING,h=0;h<b;h++){var k=this._items[h],m=k.getWidth(),n=k.getHeight();if(null!=k.getX()&&k!=a){var o=k.getX();null==o&&(o=0);k=k.getY();null==k&&(k=this._initialY);c>=o&&c<=o+m&&d>=k&&d<=k+n&&(d=k+n+g,a.setY(d),d=this.calculateY(a,b))}e<d+n&&(e=d+n)}e>this._maxHeight&&(this._maxHeight=
e+DvtTimelineSeries.DEFAULT_BUBBLE_SPACING);return d}};
DvtTimelineSeries.prototype.calculateDurationY=function(a,b){if(!(null==this._items||0==this._items.length)&&null!=a.getEndTime()){var c=a.getStartTime(),d=a.getDurationLevel();null==d&&(d=1);for(var e=0;e<b;e++){var g=this._items[e];if(g!=a){var h=g.getEndTime();if(null!=h){var k=g.getStartTime(),g=g.getDurationLevel();null==g&&(g=1);c>=k&&c<=h&&d==g&&(d=g+1,a.setDurationLevel(d),d=this.calculateDurationY(a,b))}}}d>this._maxDurationY&&(this._maxDurationY=d);return d}};
DvtTimelineSeries.prototype.prepareDurations=function(){for(var a=0;a<this._items.length;a++){var b=this._items[a];null!=b.getEndTime()&&(b.setDurationLevel(this.calculateDurationY(b,this._items.length)),null==b.getDurationFillColor()&&(b.setDurationFillColor(this._colors[this._colorCount]),this._colorCount++,this._colorCount==this._colors.length&&(this._colorCount=0)))}};
DvtTimelineSeries.prototype.addItem=function(a,b,c,d,e){var g=this.getCtx(),h=d.getId();null==b&&(b=new DvtContainer(g,"feelers"),a.addChild(b),a.feelers=b);null==c&&(c=new DvtContainer(g,"durations"),a.addChild(c),a.durations=c);var c=DvtTimeUtils.getDatePosition(this._start,this._end,d.getStartTime(),this.Width),k=d.getEndTime();k&&(k=DvtTimeUtils.getDatePosition(this._start,this._end,k,this.Width)-c,c+=Math.min(DvtTimelineSeries.DEFAULT_DURATION_FEELER_OFFSET,k/2));d.setX(c);k=this.calculateY(d,
this._items.length);d.setY(k);var m=this.getStyle(DvtTimelineSeries.ENABLED_STATE_KEY);m.parseInlineStyle(d.getStyle());var n=this.getItemContent(d,null);this.addChild(n);var o=n.getDimensions();this.removeChild(n);d.setWidth(o.w+10);d.setHeight(o.h+10);void 0==e&&(e=this.isAnimationEnabled());if(this._isInverted)o=0,s=k;else var o=this.Height,s=this.Height-k;o=new DvtLine(g,c,o,c,s,"_feeler_"+h);e&&o.setAlpha(0);b.addChild(o);b=this.getStyle(DvtTimelineSeries.ENABLED_STATE_KEY+DvtTimelineSeries.FEELER_WIDTH_KEY);
s=this.getStyle(DvtTimelineSeries.ENABLED_STATE_KEY+DvtTimelineSeries.FEELER_COLOR_KEY);b=new DvtSolidStroke(s,1,parseInt(b));o.setStroke(b);o._node=d;b=new DvtRect(g,0,0,d.getWidth(),d.getHeight(),"_bubble_"+h);b.setCornerRadius(5);b.setCSSStyle(m);n.setTranslate(5,5);b.addChild(n);var t="_tip_"+h,n="_tipc_"+h,u=parseInt(m.getStyle(DvtCSSStyle.BORDER_WIDTH));if(this._isInverted)var v=-6,s=DvtMarker.TRIANGLE_UP,w=v+u;else v=b.getHeight(),s=DvtMarker.TRIANGLE_DOWN,w=v-u;t=new DvtMarker(g,s,null,DvtTimelineSeries.DEFAULT_BUBBLE_OFFSET-
6,v,6,6,t,2,1);t.setPixelHinting(!0);u=new DvtSolidStroke(m.getStyle(DvtCSSStyle.BORDER_COLOR),1,u);m=new DvtSolidFill(m.getStyle(DvtCSSStyle.BACKGROUND_COLOR));t.setStroke(u);t.setFill(m);h=new DvtContainer(g,"_bt_"+h);e&&h.setAlpha(0);h.addChild(b);h.addChild(t);t=new DvtMarker(g,s,null,DvtTimelineSeries.DEFAULT_BUBBLE_OFFSET-6,w,6,6,n,2,1);t.setPixelHinting(!0);t.setFill(m);h.addChild(t);h._node=d;k=this._isInverted?k:this.Height-k-b.getHeight();h.setTranslate(c-DvtTimelineSeries.DEFAULT_BUBBLE_OFFSET,
k);0<=c&&a.addChild(h);d.setBubble(h);d.setFeeler(o);e&&(a=new DvtAnimator(g,1,0,DvtEasing.linear),a.addProp(DvtAnimator.TYPE_NUMBER,h,h.getAlpha,h.setAlpha,1),a.addProp(DvtAnimator.TYPE_NUMBER,o,o.getAlpha,o.setAlpha,1),this.addAnimator(a));return b};
DvtTimelineSeries.prototype.getItemContent=function(a){var b=this.getCtx(),c=a.getTitle(),a=a.getDescription();null==a&&(a="");var b=new DvtContainer(b),d=0;null!=c&&(c=new DvtOutputText(this.getCtx(),c,0,d),c.setCSSStyle(this._itemTitleStyle),d=15,b.addChild(c));null!=a&&(c=new DvtOutputText(this.getCtx(),a,0,d),c.setCSSStyle(this._itemDescriptionStyle),b.addChild(c));return b};DvtTimelineSeries.prototype.getLabel=function(){return this._label};DvtTimelineSeries.prototype.getLabelStyle=function(){return this._labelStyle};
DvtTimelineSeries.prototype.getEmptyText=function(){return this._emptyText};DvtTimelineSeries.prototype.getEmptyTextStyle=function(){return this._emptyTextStyle};
DvtTimelineSeries.prototype.adjustFeelers=function(){if(this._isInverted)var a=1;else if(a=-1,this._maxHeight>this.Height)for(var b=this._maxHeight-this.Height,c=0;c<this._blocks.length;c++){var d=this._blocks[c];if(d=d.feelers)for(var e=d.getNumChildren(),g=0;g<e;g++){var h=d.getChildAt(g);h.setTranslateY(h.getTranslateY()+b)}}for(c=0;c<this._blocks.length;c++)if(d=this._blocks[c],d=d.feelers){e=d.getNumChildren();for(g=0;g<e;g++)h=d.getChildAt(g),(b=h._node.getDurationY())&&h.setY1(h.getY1()+b*
a)}};DvtTimelineSeries.prototype.adjustDurations=function(){if(this._maxHeight>this.Height)for(var a=this._maxHeight-this.Height,b=0;b<this._blocks.length;b++)for(var c=this._blocks[b].durations,d=c.getNumChildren(),e=0;e<d;e++){var g=c.getChildAt(e);g.setTranslateY(g.getTranslateY()+a)}};
DvtTimelineSeries.prototype.adjustItems=function(){if(this._maxHeight>this.Height){for(var a=this._maxHeight-this.Height,b=0;b<this._blocks.length;b++)for(var c=this._blocks[b],d=c.getNumChildren(),e=2;e<d;e++){var g=c.getChildAt(e);g.setTranslateY(g.getTranslateY()+a)}this.setVScrollPos(a)}};DvtTimelineSeries.prototype.findItem=function(a){if(null!=this._items)for(var b=0;b<this._items.length;b++){var c=this._items[b];if(c.getId()==a)return c}return null};
DvtTimelineSeries.prototype.selectItem=function(a,b){b||this.removeAllSelectedItems();this.addSelectedItem(a)};DvtTimelineSeries.prototype.addSelectedItem=function(a){null==this._selectedItems&&(this._selectedItems=[]);this._selectedItems.push(a);this.applyState(a,DvtTimelineSeries.SELECTED_STATE_KEY);a=new DvtTimelineSeriesSelectionEvent(this._selectedItems);DvtEventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,a)};
var DvtTimelineSeriesSelectionEvent=function(a){DvtTimelineSeriesSelectionEvent.superclass.Init.call(this,a)};DvtObj.createSubclass(DvtTimelineSeriesSelectionEvent,DvtSelectionEvent,"DvtTimelineSeriesSelectionEvent");DvtTimelineSeries.prototype.removeAllSelectedItems=function(){if(null!=this._selectedItems){for(var a=0;a<this._selectedItems.length;a++)this.applyState(this._selectedItems[a],DvtTimelineSeries.ENABLED_STATE_KEY);delete this._selectedItems;this._selectedItems=null}};
DvtTimelineSeries.prototype.applyState=function(a,b){var c=a.getBubble();if(null!=c){var d=c.getChildAt(0),e=c.getChildAt(1),g=c.getChildAt(2),c=a.getFeeler(),h=a.getDurationBar(),k=this.getStyle(b);k.parseInlineStyle(a.getStyle());d.setCSSStyle(k);var d=e.getStroke().getWidth(),m=parseInt(k.getStyle(DvtCSSStyle.BORDER_WIDTH)),n=new DvtSolidStroke(k.getStyle(DvtCSSStyle.BORDER_COLOR),1,m),k=new DvtSolidFill(k.getStyle(DvtCSSStyle.BACKGROUND_COLOR));e.setStroke(n);e.setFill(k);b!=DvtTimelineSeries.ENABLED_STATE_KEY?
this._isInverted?g.setTranslateY(m-d):g.setTranslateY(d-m):g.setTranslateY(0);e=this.getStyle(b+DvtTimelineSeries.FEELER_WIDTH_KEY);g=this.getStyle(b+DvtTimelineSeries.FEELER_COLOR_KEY);e=new DvtSolidStroke(g,1,parseInt(e));c.setStroke(e);h&&h.setStroke(e)}};DvtTimelineSeries.prototype.getStyle=function(a){a=this._defaultStyles[a];return a instanceof DvtCSSStyle?a.clone():a};
DvtTimelineSeries.prototype.HandleItemClick=function(a,b){this._selectedItems&&a==this._selectedItems[0]||this.selectItem(a,b)};DvtTimelineSeries.prototype.HandleItemAction=function(a){var b=a.getAction();b&&(a=new DvtTimelineSeriesActionEvent(b,a.getId()),DvtEventDispatcher.dispatchEvent(this._callback,this._callbackObj,this,a))};var DvtTimelineSeriesActionEvent=function(a,b){DvtTimelineSeriesActionEvent.superclass.constructor.call(this,DvtActionEvent.SUBTYPE_ACTION,a,b)};
DvtObj.createSubclass(DvtTimelineSeriesActionEvent,DvtActionEvent,"DvtTimelineSeriesActionEvent");var DvtTimelineSeriesNode=function(a){this.Init(a)};DvtObj.createSubclass(DvtTimelineSeriesNode,DvtObj,"DvtTimelineSeriesNode");
DvtTimelineSeriesNode.prototype.Init=function(a){this._id=a.id;this._rowKey=a.rowKey;this._startTime=parseInt(a.startTime);a.endTime&&(this._endTime=parseInt(a.endTime));this._title=a.title;this._desc=a.desc;this._style=a.style;this._data=a.data;this._action=a.action;this._durationFillColor=a.durationFillColor};DvtTimelineSeriesNode.prototype.getId=function(){return this._id};DvtTimelineSeriesNode.prototype.getRowKey=function(){return this._rowKey};DvtTimelineSeriesNode.prototype.getStartTime=function(){return this._startTime};
DvtTimelineSeriesNode.prototype.getEndTime=function(){return this._endTime};DvtTimelineSeriesNode.prototype.getTitle=function(){return this._title};DvtTimelineSeriesNode.prototype.getDescription=function(){return this._desc};DvtTimelineSeriesNode.prototype.getStyle=function(){return this._style};DvtTimelineSeriesNode.prototype.getData=function(){return this._data};DvtTimelineSeriesNode.prototype.getBubble=function(){return this._bubble};
DvtTimelineSeriesNode.prototype.setBubble=function(a){this._bubble=a};DvtTimelineSeriesNode.prototype.getFeeler=function(){return this._feeler};DvtTimelineSeriesNode.prototype.setFeeler=function(a){this._feeler=a};DvtTimelineSeriesNode.prototype.getDurationBar=function(){return this._durationBar};DvtTimelineSeriesNode.prototype.setDurationBar=function(a){this._durationBar=a};DvtTimelineSeriesNode.prototype.getX=function(){return this._x};DvtTimelineSeriesNode.prototype.setX=function(a){this._x=a};
DvtTimelineSeriesNode.prototype.getY=function(){return this._y};DvtTimelineSeriesNode.prototype.setY=function(a){this._y=a};DvtTimelineSeriesNode.prototype.getDurationLevel=function(){return this._durationLevel};DvtTimelineSeriesNode.prototype.setDurationLevel=function(a){this._durationLevel=a};DvtTimelineSeriesNode.prototype.getDurationY=function(){return this._durationY};DvtTimelineSeriesNode.prototype.setDurationY=function(a){this._durationY=a};
DvtTimelineSeriesNode.prototype.getDurationFillColor=function(){return this._durationFillColor};DvtTimelineSeriesNode.prototype.setDurationFillColor=function(a){this._durationFillColor=a};DvtTimelineSeriesNode.prototype.getWidth=function(){return this._w};DvtTimelineSeriesNode.prototype.setWidth=function(a){this._w=a};DvtTimelineSeriesNode.prototype.getHeight=function(){return this._h};DvtTimelineSeriesNode.prototype.setHeight=function(a){this._h=a};DvtTimelineSeriesNode.prototype.getAction=function(){return this._action};
var DvtTimelineSeriesParser=function(a){this.Init(a)};DvtObj.createSubclass(DvtTimelineSeriesParser,DvtTimeComponentParser,"DvtTimelineSeriesParser");
DvtTimelineSeriesParser.prototype.parse=function(a){var b=eval(this.buildData(a)),c=DvtTimelineSeriesParser.superclass.parse.call(this,a);c.scale=a.scale;c.seriesScale=a.seriesScale;c.converter=a.converter;c.initialSelection=a.selectedItems;c.label=a.label;c.emptyText=a.emptyText;c.items=this._parseDataNode(b.data);c.rtl="false";var b={},d=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_ITEM_ENABLED_STYLE),e=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_ITEM_SELECTED_STYLE),g=DvtTimelineSeries.DEFAULT_FEELER_ENABLED_WIDTH,
h=DvtTimelineSeries.DEFAULT_FEELER_SELECTED_WIDTH,k=DvtTimelineSeries.DEFAULT_FEELER_ENABLED_COLOR,m=DvtTimelineSeries.DEFAULT_FEELER_SELECTED_COLOR,n=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_ITEM_TITLE_STYLE),o=new DvtCSSStyle(DvtTimelineSeries.DEFAULT_ITEM_DESCRIPTION_STYLE);if(a=a.itemStyleDefaults){var s="",t="",u=a.backgroundColor;u&&(s=s+"background-color:"+u+";");(u=a.selectedBackgroundColor)&&(t=t+"background-color:"+u+";");(u=a.borderWidth)&&(s=s+"border-width:"+u+";");(u=a.selectedBorderWidth)&&
(t=t+"border-width:"+u+";");(u=a.borderColor)&&(s=s+"border-color:"+u+";");(u=a.selectedBorderColor)&&(t=t+"border-color:"+u+";");d.parseInlineStyle(s);e.parseInlineStyle(t);(u=a.titleStyle)&&n.parseInlineStyle(u);(u=a.descriptionStyle)&&o.parseInlineStyle(u);(u=a.feelerWidth)&&(g=u);(u=a.selectedFeelerWidth)&&(h=u);(u=a.feelerColor)&&(k=u);(u=a.selectedFeelerColor)&&(m=u)}b[DvtTimelineSeries.ENABLED_STATE_KEY]=d;b[DvtTimelineSeries.SELECTED_STATE_KEY]=e;b[DvtTimelineSeries.ENABLED_STATE_KEY+DvtTimelineSeries.FEELER_WIDTH_KEY]=
g;b[DvtTimelineSeries.SELECTED_STATE_KEY+DvtTimelineSeries.FEELER_WIDTH_KEY]=h;b[DvtTimelineSeries.ENABLED_STATE_KEY+DvtTimelineSeries.FEELER_COLOR_KEY]=k;b[DvtTimelineSeries.SELECTED_STATE_KEY+DvtTimelineSeries.FEELER_COLOR_KEY]=m;c.itemTitleStyle=n;c.itemDescriptionStyle=o;c.defaultStyles=b;return c};DvtTimelineSeriesParser.prototype.buildData=function(a){var b={},c=[];if(a=a.items)for(var d=0;d<a.length;d++)c.push(a[d]);b.data=c;return b};
DvtTimelineSeriesParser.prototype.ParseRootAttributes=function(){var a=DvtTimelineSeriesParser.superclass.ParseRootAttributes.call(this);a.start=this._startTime.getTime();a.end=this._endTime.getTime();return a};DvtTimelineSeriesParser.prototype._parseDataNode=function(a){var b=[];if(a)for(var c=0;c<a.length;c++){var d=this.ParseNodeAttributes(a[c]);if(d){for(var d=new DvtTimelineSeriesNode(d),e=d.getStartTime(),g=!0,h=0;h<b.length;h++)if(e<b[h].getStartTime()){b.splice(h,0,d);g=!1;break}g&&b.push(d)}}return b};
DvtTimelineSeriesParser.prototype.ParseNodeAttributes=function(a){var b={};b.id=a.id;b.rowKey=b.id;b.startTime=this.getDate(a.startTime);b.endTime=this.getDate(a.endTime);if((b.endTime?b.endTime:b.startTime)<this._startTime.getTime()||b.startTime>this._endTime.getTime())return null;b.title=a.title;b.desc=a.description;b.data=a;b.style=a.style;b.action=a.action;b.durationFillColor=a.durationFillColor;return b};